{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = undefined;\n\nvar _debounce = require('../debounce');\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar _constant = require('../constant');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\n\n\nvar createSensor = exports.createSensor = function createSensor(element) {\n  // 感应器\n  var sensor = undefined; // callback\n\n  var listeners = [];\n  /**\n   * 创建 sensor 的 object DOM\n   * @returns {HTMLObjectElement}\n   */\n\n  var newSensor = function newSensor() {\n    // 调整样式\n    if (getComputedStyle(element).position === 'static') {\n      element.style.position = 'relative';\n    }\n\n    var obj = document.createElement('object');\n\n    obj.onload = function () {\n      obj.contentDocument.defaultView.addEventListener('resize', resizeListener); // 直接触发一次 resize\n\n      resizeListener();\n    };\n\n    obj.setAttribute('style', _constant.SensorStyle);\n    obj.setAttribute('class', _constant.SensorClassName);\n    obj.type = 'text/html'; // 添加到 dom 结构中\n\n    element.appendChild(obj); // 对于 ie 需要滞后，否则白屏，所以放到后面\n\n    obj.data = 'about:blank';\n    return obj;\n  };\n  /**\n   * 统一触发 listeners\n   */\n\n\n  var resizeListener = (0, _debounce2.default)(function () {\n    // 依次触发执行\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n  /**\n   * 监听某一个 callback\n   * @param cb\n   */\n\n  var bind = function bind(cb) {\n    // 如果不存在 sensor，则创建一个 object\n    if (!sensor) {\n      sensor = newSensor();\n    }\n\n    if (listeners.indexOf(cb) === -1) {\n      listeners.push(cb);\n    }\n  };\n  /**\n   * 完全 destroy\n   */\n\n\n  var destroy = function destroy() {\n    if (sensor && sensor.parentNode) {\n      if (sensor.contentDocument) {\n        // 移除事件\n        sensor.contentDocument.defaultView.removeEventListener('resize', resizeListener);\n      } // 移除 dom\n\n\n      sensor.parentNode.removeChild(sensor); // 初始化\n\n      sensor = undefined;\n      listeners = [];\n    }\n  };\n  /**\n   * 取消绑定\n   * @param cb\n   */\n\n\n  var unbind = function unbind(cb) {\n    var idx = listeners.indexOf(cb);\n\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    } // 不存在 listener，并且存在 sensor object\n    // 则移除 object\n\n\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n};","map":{"version":3,"sources":["/Users/eduardjacobs/Desktop/files/inHouse-website/client/node_modules/size-sensor/lib/sensors/object.js"],"names":["Object","defineProperty","exports","value","createSensor","undefined","_debounce","require","_debounce2","_interopRequireDefault","_constant","obj","__esModule","default","element","sensor","listeners","newSensor","getComputedStyle","position","style","document","createElement","onload","contentDocument","defaultView","addEventListener","resizeListener","setAttribute","SensorStyle","SensorClassName","type","appendChild","data","forEach","listener","bind","cb","indexOf","push","destroy","parentNode","removeEventListener","removeChild","unbind","idx","splice","length"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = undefined;\n\nvar _debounce = require('../debounce');\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar _constant = require('../constant');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\n\nvar createSensor = exports.createSensor = function createSensor(element) {\n  // 感应器\n  var sensor = undefined;\n  // callback\n  var listeners = [];\n\n  /**\n   * 创建 sensor 的 object DOM\n   * @returns {HTMLObjectElement}\n   */\n  var newSensor = function newSensor() {\n    // 调整样式\n    if (getComputedStyle(element).position === 'static') {\n      element.style.position = 'relative';\n    }\n\n    var obj = document.createElement('object');\n    obj.onload = function () {\n      obj.contentDocument.defaultView.addEventListener('resize', resizeListener);\n      // 直接触发一次 resize\n      resizeListener();\n    };\n    obj.setAttribute('style', _constant.SensorStyle);\n    obj.setAttribute('class', _constant.SensorClassName);\n    obj.type = 'text/html';\n\n    // 添加到 dom 结构中\n    element.appendChild(obj);\n    // 对于 ie 需要滞后，否则白屏，所以放到后面\n    obj.data = 'about:blank';\n    return obj;\n  };\n\n  /**\n   * 统一触发 listeners\n   */\n  var resizeListener = (0, _debounce2.default)(function () {\n    // 依次触发执行\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n\n  /**\n   * 监听某一个 callback\n   * @param cb\n   */\n  var bind = function bind(cb) {\n    // 如果不存在 sensor，则创建一个 object\n    if (!sensor) {\n      sensor = newSensor();\n    }\n\n    if (listeners.indexOf(cb) === -1) {\n      listeners.push(cb);\n    }\n  };\n\n  /**\n   * 完全 destroy\n   */\n  var destroy = function destroy() {\n    if (sensor && sensor.parentNode) {\n      if (sensor.contentDocument) {\n        // 移除事件\n        sensor.contentDocument.defaultView.removeEventListener('resize', resizeListener);\n      }\n      // 移除 dom\n      sensor.parentNode.removeChild(sensor);\n      // 初始化\n      sensor = undefined;\n      listeners = [];\n    }\n  };\n\n  /**\n   * 取消绑定\n   * @param cb\n   */\n  var unbind = function unbind(cb) {\n    var idx = listeners.indexOf(cb);\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    }\n\n    // 不存在 listener，并且存在 sensor object\n    // 则移除 object\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n};"]},"metadata":{},"sourceType":"script"}