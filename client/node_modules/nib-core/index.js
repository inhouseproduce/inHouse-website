!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("constants"),require("react-dom"),require("react")):"function"==typeof define&&define.amd?define(["constants","react-dom","react"],t):e.core=t(e.constants,e.ReactDOM,e.React)}(this,function(e,h,w){"use strict";var m="default"in h?h.default:h,I="default"in w?w.default:w;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function g(e,t){return e(t={exports:{}},t.exports),t.exports}var y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var k=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))b.call(n,a)&&(o[a]=n[a]);if(y){r=y(n);for(var s=0;s<r.length;s++)C.call(n,r[s])&&(o[r[s]]=n[r[s]])}}return o},E="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",x=function(){};if("production"!==process.env.NODE_ENV){var S=E,O={};x=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}var M=function(e,t,n,r,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(e.hasOwnProperty(i)){var a;try{if("function"!=typeof e[i]){var s=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.");throw s.name="Invariant Violation",s}a=e[i](t,i,r,n,null,S)}catch(e){a=e}if(!a||a instanceof Error||x((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in O)){O[a.message]=!0;var l=o?o():"";x("Failed "+n+" type: "+a.message+(null!=l?l:""))}}},A=function(){};function D(){return null}"production"!==process.env.NODE_ENV&&(A=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});var T=function(s,d){var i="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";var f="<<anonymous>>",e={array:t("array"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:n(D),arrayOf:function(c){return n(function(e,t,n,r,o){if("function"!=typeof c)return new h("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var i=e[t];if(!Array.isArray(i)){var a=m(i);return new h("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected an array.")}for(var s=0;s<i.length;s++){var l=c(i,s,n,r,o+"["+s+"]",E);if(l instanceof Error)return l}return null})},element:n(function(e,t,n,r,o){var i=e[t];if(s(i))return null;var a=m(i);return new h("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected a single ReactElement.")}),instanceOf:function(l){return n(function(e,t,n,r,o){if(e[t]instanceof l)return null;var i=l.name||f,a=(s=e[t],s.constructor&&s.constructor.name?s.constructor.name:f);var s;return new h("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected instance of `"+i+"`.")})},node:n(function(e,t,n,r,o){return l(e[t])?null:new h("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(c){return n(function(e,t,n,r,o){if("function"!=typeof c)return new h("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var i=e[t],a=m(i);if("object"!==a)return new h("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected an object.");for(var s in i)if(i.hasOwnProperty(s)){var l=c(i,s,n,r,o+"."+s,E);if(l instanceof Error)return l}return null})},oneOf:function(l){if(!Array.isArray(l))return"production"!==process.env.NODE_ENV&&A("Invalid argument supplied to oneOf, expected an instance of array."),D;return n(function(e,t,n,r,o){for(var i=e[t],a=0;a<l.length;a++)if(c(i,l[a]))return null;var s=JSON.stringify(l);return new h("Invalid "+r+" `"+o+"` of value `"+i+"` supplied to `"+n+"`, expected one of "+s+".")})},oneOfType:function(s){if(!Array.isArray(s))return"production"!==process.env.NODE_ENV&&A("Invalid argument supplied to oneOfType, expected an instance of array."),D;for(var e=0;e<s.length;e++){var t=s[e];if("function"!=typeof t)return A("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+r(t)+" at index "+e+"."),D}return n(function(e,t,n,r,o){for(var i=0;i<s.length;i++){var a=s[i];if(null==a(e,t,n,r,o,E))return null}return new h("Invalid "+r+" `"+o+"` supplied to `"+n+"`.")})},shape:function(u){return n(function(e,t,n,r,o){var i=e[t],a=m(i);if("object"!==a)return new h("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected `object`.");for(var s in u){var l=u[s];if(l){var c=l(i,s,n,r,o+"."+s,E);if(c)return c}}return null})},exact:function(p){return n(function(e,t,n,r,o){var i=e[t],a=m(i);if("object"!==a)return new h("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected `object`.");var s=k({},e[t],p);for(var l in s){var c=p[l];if(!c)return new h("Invalid "+r+" `"+o+"` key `"+l+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(p),null,"  "));var u=c(i,l,n,r,o+"."+l,E);if(u)return u}return null})}};function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){this.message=e,this.stack=""}function n(c){if("production"!==process.env.NODE_ENV)var u={},p=0;function e(e,t,n,r,o,i,a){if(r=r||f,i=i||n,a!==E){if(d){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var l=r+":"+n;!u[l]&&p<3&&(A("You are manually calling a React.PropTypes validation function for the `"+i+"` prop on `"+r+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),u[l]=!0,p++)}}return null==t[n]?e?null===t[n]?new h("The "+o+" `"+i+"` is marked as required in `"+r+"`, but its value is `null`."):new h("The "+o+" `"+i+"` is marked as required in `"+r+"`, but its value is `undefined`."):null:c(t,n,r,o,i)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(s){return n(function(e,t,n,r,o,i){var a=e[t];return m(a)===s?null:new h("Invalid "+r+" `"+o+"` of type `"+u(a)+"` supplied to `"+n+"`, expected `"+s+"`.")})}function l(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(l);if(null===e||s(e))return!0;var t=function(e){var t=e&&(i&&e[i]||e[a]);if("function"==typeof t)return t}(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!l(n.value))return!1}else for(;!(n=r.next()).done;){var o=n.value;if(o&&!l(o[1]))return!1}return!0;default:return!1}}function m(e){var t,n=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(t=e,"symbol"===n||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol?"symbol":n)}function u(e){if(null==e)return""+e;var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function r(e){var t=u(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return h.prototype=Error.prototype,e.checkPropTypes=M,e.PropTypes=e};function N(){}var R=g(function(e){if("production"!==process.env.NODE_ENV){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=T(function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},!0)}else e.exports=function(){function e(e,t,n,r,o,i){if(i!==E){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=N,n.PropTypes=n}()});var P=function(){function e(e){this.isSpeedy=void 0===e.speedy?"production"===process.env.NODE_ENV:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.before=null}var t=e.prototype;return t.insert=function(t){if(this.ctr%(this.isSpeedy?65e3:1)==0){var e,n=(r=this,(o=document.createElement("style")).setAttribute("data-emotion",r.key),void 0!==r.nonce&&o.setAttribute("nonce",r.nonce),o.appendChild(document.createTextNode("")),o);e=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(n,e),this.tags.push(n)}var r,o,i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(i);try{var s=105===t.charCodeAt(1)&&64===t.charCodeAt(0);a.insertRule(t,s?0:a.cssRules.length)}catch(e){"production"!==process.env.NODE_ENV&&console.warn('There was a problem inserting the following rule: "'+t+'"',e)}}else i.appendChild(document.createTextNode(t));this.ctr++},t.flush=function(){this.tags.forEach(function(e){return e.parentNode.removeChild(e)}),this.tags=[],this.ctr=0},e}();function F(e){function A(e,t,n){var r=t.trim().split(p),o=(t=r).length,i=e.length;switch(i){case 0:case 1:var a=0;for(e=0===i?"":e[0]+" ";a<o;++a)t[a]=c(e,t[a],n).trim();break;default:var s=a=0;for(t=[];a<o;++a)for(var l=0;l<i;++l)t[s++]=c(e[l]+" ",r[a],n).trim()}return t}function c(e,t,n){var r=t.charCodeAt(0);switch(r<33&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(o,"$1"+e.trim());case 58:return e.trim()+t.replace(o,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(o,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function D(e,t,n,r){var o=e+";",i=2*t+3*n+4*r;if(944===i){e=o.indexOf(":",9)+1;var a=o.substring(e,o.length-1).trim();return a=o.substring(0,e).trim()+a+";",1===$||2===$&&T(a,1)?"-webkit-"+a+a:a}if(0===$||2===$&&!T(o,1))return o;switch(i){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(v,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(a=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+a+o;case 1005:return l.test(o)?o.replace(s,":-webkit-")+o.replace(s,":-moz-")+o:o;case 1e3:switch(t=(a=o.substring(13).trim()).indexOf("-")+1,a.charCodeAt(0)+a.charCodeAt(t)){case 226:a=o.replace(d,"tb");break;case 232:a=o.replace(d,"tb-rl");break;case 220:a=o.replace(d,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+a+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,i=(a=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|a.charCodeAt(7))){case 203:if(a.charCodeAt(8)<111)break;case 115:o=o.replace(a,"-webkit-"+a)+";"+o;break;case 207:case 102:o=o.replace(a,"-webkit-"+(102<i?"inline-":"")+"box")+";"+o.replace(a,"-webkit-"+a)+";"+o.replace(a,"-ms-"+a+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return a=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+a+"-ms-flex-"+a+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(h,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(h,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===m.test(e))return 115===(a=e.substring(e.indexOf(":")+1)).charCodeAt(0)?D(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(a,"-webkit-"+a)+o.replace(a,"-moz-"+a.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(u,"$1-webkit-$2")+o}return o}function T(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),a(2!==t?r:r.replace(i,"$1"),n,t)}function N(e,t){var n=D(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(r," or ($1)").substring(4):"("+t+")"}function R(e,t,n,r,o,i,a,s,l,c){for(var u,p=0,d=t;p<H;++p)switch(u=g[p].call(f,e,d,n,r,o,i,a,s,l,c)){case void 0:case!1:case!0:case null:break;default:d=u}if(d!==t)return d}function t(e){return void 0!==(e=e.prefix)&&(a=null,e?"function"!=typeof e?$=1:($=2,a=e):$=0),t}function f(e,t){var n=e;if(n.charCodeAt(0)<33&&(n=n.trim()),n=[n],0<H){var r=R(-1,t,n,n,z,V,0,0,0,0);void 0!==r&&"string"==typeof r&&(t=r)}var o=function e(t,n,r,o,i){for(var a,s,l,c,u,p=0,d=0,f=0,h=0,m=0,v=0,g=l=a=0,y=0,b=0,w=0,C=0,k=r.length,E=k-1,x="",S="",O="",M="";y<k;){if(s=r.charCodeAt(y),y===E&&0!==d+h+f+p&&(0!==d&&(s=47===d?10:47),h=f=p=0,k++,E++),0===d+h+f+p){if(y===E&&(0<b&&(x=x.replace(F,"")),0<x.trim().length)){switch(s){case 32:case 9:case 59:case 13:case 10:break;default:x+=r.charAt(y)}s=59}switch(s){case 123:for(a=(x=x.trim()).charCodeAt(0),l=1,C=++y;y<k;){switch(s=r.charCodeAt(y)){case 123:l++;break;case 125:l--;break;case 47:switch(s=r.charCodeAt(y+1)){case 42:case 47:e:{for(g=y+1;g<E;++g)switch(r.charCodeAt(g)){case 47:if(42!==s||42!==r.charCodeAt(g-1)||y+2===g)break;y=g+1;break e;case 10:if(47===s){y=g+1;break e}}y=g}}break;case 91:s++;case 40:s++;case 34:case 39:for(;y++<E&&r.charCodeAt(y)!==s;);}if(0===l)break;y++}switch(l=r.substring(C,y),0===a&&(a=(x=x.replace(P,"").trim()).charCodeAt(0)),a){case 64:switch(0<b&&(x=x.replace(F,"")),s=x.charCodeAt(1)){case 100:case 109:case 115:case 45:b=n;break;default:b=W}if(C=(l=e(n,b,l,s,i+1)).length,0<H&&(u=R(3,l,b=A(W,x,w),n,z,V,C,s,i,o),x=b.join(""),void 0!==u&&0===(C=(l=u.trim()).length)&&(s=0,l="")),0<C)switch(s){case 115:x=x.replace(B,N);case 100:case 109:case 45:l=x+"{"+l+"}";break;case 107:l=(x=x.replace(_,"$1 $2"))+"{"+l+"}",l=1===$||2===$&&T("@"+l,3)?"@-webkit-"+l+"@"+l:"@"+l;break;default:l=x+l,112===o&&(S+=l,l="")}else l="";break;default:l=e(n,A(n,x,w),l,o,i+1)}O+=l,l=w=b=g=a=0,x="",s=r.charCodeAt(++y);break;case 125:case 59:if(1<(C=(x=(0<b?x.replace(F,""):x).trim()).length))switch(0===g&&(a=x.charCodeAt(0),45===a||96<a&&a<123)&&(C=(x=x.replace(" ",":")).length),0<H&&void 0!==(u=R(1,x,n,t,z,V,S.length,o,i,o))&&0===(C=(x=u.trim()).length)&&(x="\0\0"),a=x.charCodeAt(0),s=x.charCodeAt(1),a){case 0:break;case 64:if(105===s||99===s){M+=x+r.charAt(y);break}default:58!==x.charCodeAt(C-1)&&(S+=D(x,a,s,x.charCodeAt(2)))}w=b=g=a=0,x="",s=r.charCodeAt(++y)}}switch(s){case 13:case 10:47===d?d=0:0===1+a&&107!==o&&0<x.length&&(b=1,x+="\0"),0<H*U&&R(0,x,n,t,z,V,S.length,o,i,o),V=1,z++;break;case 59:case 125:if(0===d+h+f+p){V++;break}default:switch(V++,c=r.charAt(y),s){case 9:case 32:if(0===h+p+d)switch(m){case 44:case 58:case 9:case 32:c="";break;default:32!==s&&(c=" ")}break;case 0:c="\\0";break;case 12:c="\\f";break;case 11:c="\\v";break;case 38:0===h+d+p&&(b=w=1,c="\f"+c);break;case 108:if(0===h+d+p+j&&0<g)switch(y-g){case 2:112===m&&58===r.charCodeAt(y-3)&&(j=m);case 8:111===v&&(j=v)}break;case 58:0===h+d+p&&(g=y);break;case 44:0===d+f+h+p&&(b=1,c+="\r");break;case 34:case 39:0===d&&(h=h===s?0:0===h?s:h);break;case 91:0===h+d+f&&p++;break;case 93:0===h+d+f&&p--;break;case 41:0===h+d+p&&f--;break;case 40:if(0===h+d+p){if(0===a)switch(2*m+3*v){case 533:break;default:a=1}f++}break;case 64:0===d+f+h+p+g+l&&(l=1);break;case 42:case 47:if(!(0<h+p+f))switch(d){case 0:switch(2*s+3*r.charCodeAt(y+1)){case 235:d=47;break;case 220:C=y,d=42}break;case 42:47===s&&42===m&&C+2!==y&&(33===r.charCodeAt(C+2)&&(S+=r.substring(C,y+1)),c="",d=0)}}0===d&&(x+=c)}v=m,m=s,y++}if(0<(C=S.length)){if(b=n,0<H&&void 0!==(u=R(2,S,b,t,z,V,C,o,i,o))&&0===(S=u).length)return M+S+O;if(S=b.join(",")+"{"+S+"}",0!=$*j){switch(2!==$||T(S,2)||(j=0),j){case 111:S=S.replace(L,":-moz-$1")+S;break;case 112:S=S.replace(I,"::-webkit-input-$1")+S.replace(I,"::-moz-$1")+S.replace(I,":-ms-input-$1")+S}j=0}}return M+S+O}(W,n,t,0,0);return 0<H&&(void 0!==(r=R(-2,o,n,n,z,V,o.length,0,0,0))&&(o=r)),"",j=0,V=z=1,o}var P=/^\0+/g,F=/[\0\r\f]/g,s=/: */g,l=/zoo|gra/,u=/([,: ])(transform)/g,p=/,\r+?/g,o=/([\t\r\n ])*\f?&/g,_=/@(k\w+)\s*(\S*)\s*/,I=/::(place)/g,L=/:(read-only)/g,d=/[svh]\w+-[tblr]{2}/,B=/\(\s*(.*)\s*\)/g,r=/([\s\S]*?);/g,h=/-self|flex-/g,i=/[^]*?(:[rp][el]a[\w-]+)[^]*/,m=/stretch|:\s*\w+\-(?:conte|avail)/,v=/([^-])(image-set\()/,V=1,z=1,j=0,$=1,W=[],g=[],H=0,a=null,U=0;return f.use=function e(t){switch(t){case void 0:case null:H=g.length=0;break;default:if("function"==typeof t)g[H++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else U=0|!!t}return e},f.set=t,void 0!==e&&t(e),f}var _=function(n){var r=new WeakMap;return function(e){if(r.has(e))return r.get(e);var t=n(e);return r.set(e,t),t}},L="/*|*/";function B(e){e&&V.current.insert(e+"}")}var V={current:null},z=function(e,t,n,r,o,i,a,s,l,c){switch(e){case 1:switch(t.charCodeAt(0)){case 64:return V.current.insert(t+";"),"";case 108:if(98===t.charCodeAt(2))return""}break;case 2:if(0===s)return t+L;break;case 3:switch(s){case 102:case 112:return V.current.insert(n[0]+t),"";default:return t+(0===c?L:"")}case-2:t.split("/*|*/}").forEach(B)}};function j(t,n,e){var r="";return e.split(" ").forEach(function(e){void 0!==t[e]?n.push(t[e]):r+=e+" "}),r}var $=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var o=t;do{e.insert("."+r,o,e.sheet,!0);o=o.next}while(void 0!==o)}};var W={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var H,U,K=/[A-Z]|^ms/g,q=/_EMO_([^_]+?)_([^]*?)_EMO_/g,J=(H=function(e){return e.replace(K,"-$&").toLowerCase()},U={},function(e){return void 0===U[e]&&(U[e]=H(e)),U[e]}),G=function(e,t){if(null==t||"boolean"==typeof t)return"";switch(e){case"animation":case"animationName":"string"==typeof t&&(t=t.replace(q,function(e,t,n){return ie={name:t,styles:n,next:ie},t}))}return 1!==W[e]&&45!==e.charCodeAt(1)&&"number"==typeof t&&0!==t?t+"px":t};if("production"!==process.env.NODE_ENV){var X=/(attr|calc|counters?|url)\(/,Y=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit","unset"],Z=G,Q=/^-ms-/,ee=/-(.)/g,te={};G=function(e,t){return"content"===e&&("string"!=typeof t||-1===Y.indexOf(t)&&!X.test(t)&&(t.charAt(0)!==t.charAt(t.length-1)||'"'!==t.charAt(0)&&"'"!==t.charAt(0)))&&console.error("You seem to be using a value for 'content' without quotes, try replacing it with `content: '\""+t+"\"'`"),45!==e.charCodeAt(1)&&-1!==e.indexOf("-")&&void 0===te[e]&&(te[e]=!0,console.error("Using kebab-case for css properties in objects is not supported. Did you mean "+e.replace(Q,"ms-").replace(ee,function(e,t){return t.toUpperCase()})+"?")),Z(e,t)}}var ne=!0;function re(e,t,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles){if("production"!==process.env.NODE_ENV&&"NO_COMPONENT_SELECTOR"===n.toString())throw new Error("Component selectors can only be used in conjunction with babel-plugin-emotion.");return n}switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return ie={name:n.name,styles:n.styles,next:ie},n.name;if(void 0===n.styles)return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=re(e,t,n[o],!1);else for(var i in n){var a=n[i];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":r+=J(i)+":"+G(i,a)+";";else{if("NO_COMPONENT_SELECTOR"===i&&"production"!==process.env.NODE_ENV)throw new Error("Component selectors can only be used in conjunction with babel-plugin-emotion.");if(Array.isArray(a)&&(null==t||"string"==typeof a[0]&&void 0===t[a[0]]))for(var s=0;s<a.length;s++)r+=J(i)+":"+G(i,a[s])+";";else r+=i+"{"+re(e,t,a,!1)+"}"}}return r}(e,t,n);var o=n.next;if(void 0!==o)for(;void 0!==o;)ie={name:o.name,styles:o.styles,next:ie},o=o.next;var i=n.styles;return"production"!==process.env.NODE_ENV&&void 0!==n.map&&(i+=n.map),i;case"function":if(void 0!==e){var a=ie,s=n(e);return ie=a,re(e,t,s,r)}"production"!==process.env.NODE_ENV&&console.error("Functions that are interpolated in css calls will be stringified.\nIf you want to have a css call based on props, create a function that returns a css call like this\nlet dynamicStyle = (props) => css`color: ${props.color}`\nIt can be called directly with props or interpolated in a styled call like this\nlet SomeComponent = styled('div')`${dynamicStyle}`");default:if(null==t)return n;var l=t[n];return"production"!==process.env.NODE_ENV&&r&&ne&&void 0!==l&&(console.error("Interpolating a className from css`` is not recommended and will cause problems with composition.\nInterpolating a className from css`` will be completely unsupported in a future major version of Emotion"),ne=!1),void 0===l||r?n:l}}var oe,ie,ae=/label:\s*([^\s;\n{]+)\s*;/g;"production"!==process.env.NODE_ENV&&(oe=/\/\*#\ssourceMappingURL=data:application\/json;\S+\s+\*\//);var se=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";ie=void 0;var i,a=e[0];null==a||void 0===a.raw?o+=re(n,t,a,r=!1):o+=a[0];for(var s=1;s<e.length;s++)o+=re(n,t,e[s],46===o.charCodeAt(o.length-1)),r&&(o+=a[s]);"production"!==process.env.NODE_ENV&&(o=o.replace(oe,function(e){return i=e,""})),ae.lastIndex=0;for(var l,c="";null!==(l=ae.exec(o));)c+="-"+l[1];var u=function(e){for(var t,n=e.length,r=n^n,o=0;4<=n;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)}(o)+c;return"production"!==process.env.NODE_ENV?{name:u,styles:o,map:i,next:ie}:{name:u,styles:o,next:ie}};var le=w.createContext(function(e){void 0===e&&(e={});var t,n=e.key||"css";void 0!==e.prefix&&(t={prefix:e.prefix});var a=new F(t);if("production"!==process.env.NODE_ENV&&/[^a-z-]/.test(n))throw new Error('Emotion key must only contain lower case alphabetical characters and - but "'+n+'" was passed');var r,o={};r=e.container||document.head;var i,s=document.querySelectorAll("style[data-emotion-"+n+"]");if(Array.prototype.forEach.call(s,function(e){e.getAttribute("data-emotion-"+n).split(" ").forEach(function(e){o[e]=!0}),e.parentNode!==r&&r.appendChild(e)}),a.use(e.stylisPlugins)(z),i=function(e,t,n,r){var o=t.name;if(V.current=n,"production"!==process.env.NODE_ENV&&void 0!==t.map){var i=t.map;V.current={insert:function(e){n.insert(e+i)}}}a(e,t.styles),r&&(u.inserted[o]=!0)},"production"!==process.env.NODE_ENV){var l=/\/\*/g,c=/\*\//g;a.use(function(e,t){switch(e){case-1:for(;l.test(t);){if(c.lastIndex=l.lastIndex,!c.test(t))throw new Error('Your styles have an unterminated comment ("/*" without corresponding "*/").');l.lastIndex=c.lastIndex}l.lastIndex=0}}),a.use(function(e,t,n){switch(e){case 2:for(var r=0,o=n.length;r<o;r++){var i=n[r].match(/:(first|nth|nth-last)-child/);null!==i&&console.error('The pseudo class "'+i[0]+'" is potentially unsafe when doing server-side rendering. Try changing it to "'+i[1]+'-of-type"')}}})}var u={key:n,sheet:new P({key:n,container:r,nonce:e.nonce,speedy:e.speedy}),nonce:e.nonce,inserted:o,registered:{},insert:i};return u}()),ce=w.createContext({}),ue=(le.Provider,function(r){return w.forwardRef(function(t,n){return w.createElement(le.Consumer,null,function(e){return r(t,e,n)})})}),pe="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",de="__EMOTION_LABEL_PLEASE_DO_NOT_USE__",fe=Object.prototype.hasOwnProperty,he=function(e,t,n,r){var o=t[pe],i=[],a="",s=null===n?t.css:t.css(n);"string"==typeof s&&void 0!==e.registered[s]&&(s=e.registered[s]),i.push(s),void 0!==t.className&&(a=j(e.registered,i,t.className));var l=se(i);if("production"!==process.env.NODE_ENV&&-1===l.name.indexOf("-")){var c=t[de];c&&(l=se([l,"label:"+c+";"]))}$(e,l,"string"==typeof o);a+=e.key+"-"+l.name;var u={};for(var p in t)!fe.call(t,p)||"css"===p||p===pe||"production"!==process.env.NODE_ENV&&p===de||(u[p]=t[p]);return u.ref=r,u.className=a,w.createElement(o,u)},me=(ue(function(t,n,r){return"function"==typeof t.css?w.createElement(ce.Consumer,null,function(e){return he(n,t,e,r)}):he(n,t,null,r)}),w.Component,function(){var e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return se(t)}.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}});ue(function(r,u){return w.createElement(ce.Consumer,null,function(e){var l=!1,c=function(){if(l&&"production"!==process.env.NODE_ENV)throw new Error("css can only be used during render");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=se(t,u.registered);return $(u,r,!1),u.key+"-"+r.name},t={css:c,cx:function(){if(l&&"production"!==process.env.NODE_ENV)throw new Error("cx can only be used during render");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=u.registered,o=c,i=function e(t){for(var n=t.length,r=0,o="";r<n;r++){var i=t[r];if(null!=i){var a=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))a=e(i);else for(var s in a="",i)i[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=i}a&&(o&&(o+=" "),o+=a)}}return o}(t),s=j(r,a=[],i),a.length<2?i:s+o(a);var r,o,i,a,s},theme:e},n=r.children(t);return l=!0,n})});var ve={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ge={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ye=Object.defineProperty,be=Object.getOwnPropertyNames,we=Object.getOwnPropertySymbols,Ce=Object.getOwnPropertyDescriptor,ke=Object.getPrototypeOf,Ee=ke&&ke(Object);var xe=function e(t,n,r){if("string"==typeof n)return t;if(Ee){var o=ke(n);o&&o!==Ee&&e(t,o,r)}var i=be(n);we&&(i=i.concat(we(n)));for(var a=0;a<i.length;++a){var s=i[a];if(!(ve[s]||ge[s]||r&&r[s])){var l=Ce(n,s);try{ye(t,s,l)}catch(e){}}}return t},Se=_(function(t){return _(function(e){return function(e,t){if("function"==typeof t){var n=t(e);if("production"!==process.env.NODE_ENV&&(null==n||"object"!=typeof n||Array.isArray(n)))throw new Error("[ThemeProvider] Please return an object from your theme function, i.e. theme={() => ({})}!");return n}if("production"!==process.env.NODE_ENV&&(null==t||"object"!=typeof t||Array.isArray(t)))throw new Error("[ThemeProvider] Please make your theme prop a plain object");return k({},e,t)}(t,e)})}),Oe=function(t){return w.createElement(ce.Consumer,null,function(e){return t.theme!==e&&(e=Se(e)(t.theme)),w.createElement(ce.Provider,{value:e},t.children)})};function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ae=function(r){var e=r.displayName||r.name||"Component",t=w.forwardRef(function(t,n){return w.createElement(ce.Consumer,null,function(e){return w.createElement(r,Me({theme:e,ref:n},t))})});return t.displayName="WithTheme("+e+")",xe(t,r)},De=function(e){function i(){var e,o;a(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(o=f(this,(e=d(i)).call.apply(e,[this].concat(n)))).getVisibleModal=function(){for(var e=o.props.modals,t=0;t<e.length;t++){var n=e[t],r=document.getElementsByClassName(n.elmClassName);if(r[0])return{marker:r[0],ModalComponent:n.component}}},o}return c(i,w.Component),s(i,[{key:"render",value:function(){var e=this.getVisibleModal();if(!e)return null;var t=this.props,n=t.view,r=t.editorWrapper,o=e.ModalComponent,i=e.marker;return I.createElement(o,{view:n,editorWrapper:r,marker:i})}}]),i}();var Te,Ne,Re=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Pe=(Te=function(e){return Re.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91},Ne={},function(e){return void 0===Ne[e]&&(Ne[e]=Te(e)),Ne[e]}),Fe=function(e){return"theme"!==e&&"innerRef"!==e},_e=function(e){return"string"==typeof e&&96<e.charCodeAt(0)?Pe:Fe},Ie=function o(i,a){if("production"!==process.env.NODE_ENV&&void 0===i)throw new Error("You are trying to create a styled element with an undefined component.\nYou may have forgotten to import it.");var h,m,v;void 0!==a&&(h=a.label,v=a.target,m=i.__emotion_forwardProp&&a.shouldForwardProp?function(e){return i.__emotion_forwardProp(e)&&a.shouldForwardProp(e)}:a.shouldForwardProp);var s=i.__emotion_real===i,g=s&&i.__emotion_base||i;"function"!=typeof m&&s&&(m=i.__emotion_forwardProp);var y=m||_e(g),b=!y("as");return function(){var e=arguments,f=s&&void 0!==i.__emotion_styles?i.__emotion_styles.slice(0):[];if(void 0!==h&&f.push("label:"+h+";"),null==e[0]||void 0===e[0].raw)f.push.apply(f,e);else{f.push(e[0][0]);for(var t=e.length,n=1;n<t;n++)f.push(e[n],e[0][n])}var r=ue(function(u,p,d){return w.createElement(ce.Consumer,null,function(e){var t=b&&u.as||g,n="",r=[],o=u;if(null==u.theme){for(var i in o={},u)o[i]=u[i];o.theme=e}"string"==typeof u.className&&(n+=j(p.registered,r,u.className));var a=se(f.concat(r),p.registered,o);$(p,a,"string"==typeof t),n+=p.key+"-"+a.name,void 0!==v&&(n+=" "+v);var s=b&&void 0===m?_e(t):y,l={};for(var c in u)b&&"as"===c||s(c)&&(l[c]=u[c]);return l.className=n,l.ref=d||u.innerRef,"production"!==process.env.NODE_ENV&&u.innerRef&&console.error("`innerRef` is deprecated and will be removed in a future major version of Emotion, please use the `ref` prop instead"+(void 0===h?"":" in the usage of `"+h+"`")),w.createElement(t,l)})});return r.displayName=void 0!==h?h:"Styled("+("string"==typeof g?g:g.displayName||g.name||"Component")+")",r.defaultProps=i.defaultProps,(r.__emotion_real=r).__emotion_base=g,r.__emotion_styles=f,r.__emotion_forwardProp=m,Object.defineProperty(r,"toString",{value:function(){return void 0===v&&"production"!==process.env.NODE_ENV?"NO_COMPONENT_SELECTOR":"."+v}}),r.withComponent=function(e,t){return o(e,void 0!==t?k({},a||{},t):a).apply(void 0,f)},r}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){Ie[e]=Ie(e)});var Le=function(e){return I.createElement(Be,e)},Be=Ie("button",{target:"e5b46pv0"})("align-items:center;cursor:pointer;display:flex;justify-content:center;background-color:",function(e){return e.theme.button.toolbar.backgroundColor},";color:",function(e){return e.theme.button.toolbar.color},";border:",function(e){return e.theme.button.toolbar.border},";border-radius:",function(e){return e.theme.button.toolbar.borderRadius},";height:",function(e){return e.theme.button.toolbar.height},";width:",function(e){return e.theme.button.toolbar.width},";margin:",function(e){return e.theme.button.toolbar.margin},";padding:",function(e){return e.theme.button.toolbar.padding},";font-size:",function(e){return e.theme.button.toolbar.fontSize},";:active{",function(e){var t=e.disabled,n=e.theme;return!t&&n.button.toolbar["&:active"]},";}:focus{",function(e){var t=e.disabled,n=e.theme;return!t&&n.button.toolbar["&:hover"]},";}:hover{",function(e){var t=e.disabled,n=e.theme;return!t&&n.button.toolbar["&:hover"]},";}",function(e){var t=e.selected,n=e.theme;return t&&n.button.toolbar["&:selected"]},";",function(e){var t=e.disabled,n=e.theme;return t&&n.button.toolbar["&:disabled"]},";"),Ve=function(e){return I.createElement(ze,e)},ze=Ie("button",{target:"eyuvjzl0"})("align-items:center;cursor:pointer;display:flex;justify-content:center;background-color:",function(e){return e.theme.button.link.backgroundColor},";color:",function(e){return e.theme.button.link.color},";border:",function(e){return e.theme.button.link.border},";border-radius:",function(e){return e.theme.button.link.borderRadius},";height:",function(e){return e.theme.button.link.height},";width:",function(e){return e.theme.button.link.width},";margin:",function(e){return e.theme.button.link.margin},";padding:",function(e){return e.theme.button.link.padding},";font-size:",function(e){return e.theme.button.link.fontSize},";:active{",function(e){var t=e.disabled,n=e.theme;return!t&&n.button.link["&:active"]},";}:hover{",function(e){var t=e.disabled,n=e.theme;return!t&&n.button.link["&:hover"]},";}:focus{",function(e){var t=e.disabled,n=e.theme;return!t&&n.button.link["&:focus"]},";}",function(e){var t=e.disabled,n=e.theme;return t&&n.button.link["&:disabled"]},";"),je=Ie("svg",{target:"ey8glgo0"})("fill:",function(e){return e.theme.icon.fill},";"),$e={ArrowDown:function(e){var t=e.className,n=e.onClick;return I.createElement(je,{width:"24",height:"24",viewBox:"0 0 24 24",onClick:n,className:t},I.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),I.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))},Bold:function(){return I.createElement(je,{width:"20",height:"20",viewBox:"0 0 24 22"},I.createElement("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),I.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},Cross:function(e){var t=e.className,n=e.onClick;return I.createElement(je,{width:"24",height:"24",viewBox:"0 0 24 24",className:t,onClick:n},I.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),I.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},H1:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"20px",height:"15px",viewBox:"0 0 20 15"},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},I.createElement("text",{id:"H1",fill:t.icon.fill},I.createElement("tspan",{x:"-0.504882812",y:"13"},"H1"))))}),H2:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"23px",height:"15px",viewBox:"0 0 23 15"},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},I.createElement("text",{id:"H2",fill:t.icon.fill},I.createElement("tspan",{x:"-0.0048828125",y:"13"},"H2"))))}),H3:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"23px",height:"15px",viewBox:"0 0 23 15"},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},I.createElement("text",{id:"H3",fill:t.icon.fill},I.createElement("tspan",{x:"-0.0048828125",y:"13"},"H3"))))}),H4:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"23px",height:"15px",viewBox:"0 0 23 15"},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},I.createElement("text",{id:"H4",fill:t.icon.fill},I.createElement("tspan",{x:"-0.0048828125",y:"13"},"H4"))))}),H5:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"22px",height:"15px",viewBox:"0 0 22 15"},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},I.createElement("text",{id:"H5",fill:t.icon.fill},I.createElement("tspan",{x:"-1.00488281",y:"13"},"H5"))))}),H6:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"23px",height:"15px",viewBox:"0 0 23 15"},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},I.createElement("text",{id:"H6",fill:t.icon.fill},I.createElement("tspan",{x:"-0.0048828125",y:"13"},"H6"))))}),Image:function(){return I.createElement(je,{width:"18",height:"18",viewBox:"0 0 22 22"},I.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),I.createElement("path",{d:"M21 21V3H3v18h18zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}))},Italic:function(){return I.createElement(je,{width:"20",height:"20",viewBox:"0 0 24 22"},I.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),I.createElement("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"}))},Link:function(){return I.createElement(je,{width:"22",height:"22",viewBox:"0 0 24 24"},I.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),I.createElement("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}))},ListBulleted:function(){return I.createElement(je,{width:"20",height:"20",viewBox:"0 0 24 24"},I.createElement("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),I.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))},ListNumbered:function(){return I.createElement(je,{width:"20",height:"20",viewBox:"0 0 24 24"},I.createElement("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),I.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},P:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"11px",height:"14px",viewBox:"0 0 11 14"},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},I.createElement("text",{id:"P",fill:t.icon.fill},I.createElement("tspan",{x:"-0.502929688",y:"12"},"P"))))}),Question:function(){return I.createElement(je,{width:"15",height:"15",viewBox:"0 0 26 26"},I.createElement("g",null,I.createElement("path",{d:"m14,22h-2c-0.6,0-1,0.4-1,1v2c0,0.6 0.4,1 1,1h2c0.6,0 1-0.4 1-1v-2c0-0.6-0.4-1-1-1z"}),I.createElement("path",{d:"M13,0C8,0,4,4,4,9c0,0.5,0,1,0.1,1.5c0.1,0.6,0.7,0.9,1.3,0.8l1.9-0.6c0.5-0.1,0.8-0.6,0.7-1.1C8,9.4,8,9.2,8,9   c0-2.8,2.2-5,5-5s5,2.2,5,5c0,1.7-1,2.5-2.8,4c-1.7,1.4-3.7,3-4.2,5.9c-0.1,0.6,0.4,1.1,1,1.1h2c0.5,0,0.9-0.3,1-0.8   c0.3-1.2,1.2-2,2.7-3.1C19.6,14.6,22,12.7,22,9C22,4,18,0,13,0z"})))},Redo:function(){return I.createElement(je,{width:"20",height:"20",viewBox:"0 0 24 24"},I.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),I.createElement("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}))},Strike:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"15",height:"13",viewBox:"0 0 15 13",style:{marginTop:-2}},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},I.createElement("g",{id:"baseline-strikethrough_s-24px-(2)",fill:t.icon.fill,fillRule:"nonzero"},I.createElement("path",{d:"M3.53333333,4.79166667 C3.31666667,4.39166667 3.20833333,3.93333333 3.20833333,3.4 C3.20833333,2.89166667 3.31666667,2.43333333 3.54166667,2.00833333 C3.75833333,1.59166667 4.06666667,1.23333333 4.46666667,0.933333333 C4.86666667,0.641666667 5.34166667,0.408333333 5.88333333,0.241666667 C6.43333333,0.0833333333 7.04166667,0 7.7,0 C8.375,0 8.98333333,0.0916666667 9.54166667,0.283333333 C10.0916667,0.466666667 10.5666667,0.733333333 10.95,1.06666667 C11.3416667,1.4 11.6416667,1.8 11.85,2.25833333 C12.0583333,2.71666667 12.1666667,3.21666667 12.1666667,3.76666667 L9.65833333,3.76666667 C9.65833333,3.50833333 9.61666667,3.275 9.53333333,3.05833333 C9.45833333,2.83333333 9.33333333,2.65 9.16666667,2.49166667 C9,2.33333333 8.79166667,2.21666667 8.54166667,2.125 C8.29166667,2.04166667 7.99166667,1.99166667 7.65833333,1.99166667 C7.33333333,1.99166667 7.04166667,2.025 6.8,2.1 C6.55833333,2.175 6.35833333,2.275 6.2,2.4 C6.04166667,2.53333333 5.91666667,2.68333333 5.83333333,2.85833333 C5.75,3.03333333 5.70833333,3.21666667 5.70833333,3.40833333 C5.70833333,3.80833333 5.91666667,4.14166667 6.325,4.41666667 C6.64166667,4.625 6.96666667,4.81666667 7.5,5 L3.65833333,5 C3.61666667,4.93333333 3.56666667,4.85833333 3.53333333,4.79166667 Z M15,7.5 L15,5.83333333 L0,5.83333333 L0,7.5 L8.01666667,7.5 C8.16666667,7.55833333 8.35,7.61666667 8.475,7.66666667 C8.78333333,7.80833333 9.025,7.95 9.2,8.09166667 C9.375,8.23333333 9.49166667,8.39166667 9.55833333,8.56666667 C9.61666667,8.73333333 9.65,8.925 9.65,9.14166667 C9.65,9.33333333 9.60833333,9.51666667 9.53333333,9.69166667 C9.45833333,9.85833333 9.34166667,10.0083333 9.18333333,10.1333333 C9.025,10.2583333 8.83333333,10.35 8.59166667,10.425 C8.35,10.4916667 8.06666667,10.5333333 7.75,10.5333333 C7.39166667,10.5333333 7.05833333,10.5 6.76666667,10.425 C6.475,10.35 6.21666667,10.2333333 6.00833333,10.075 C5.8,9.91666667 5.63333333,9.70833333 5.51666667,9.45 C5.4,9.19166667 5.30833333,8.81666667 5.30833333,8.44166667 L2.83333333,8.44166667 C2.83333333,8.9 2.9,9.38333333 3.03333333,9.75833333 C3.16666667,10.1333333 3.34166667,10.4666667 3.575,10.7666667 C3.80833333,11.0583333 4.075,11.3166667 4.39166667,11.5333333 C4.7,11.75 5.04166667,11.9333333 5.40833333,12.075 C5.775,12.2166667 6.15833333,12.325 6.55833333,12.4 C6.95833333,12.4666667 7.35833333,12.5083333 7.75833333,12.5083333 C8.425,12.5083333 9.03333333,12.4333333 9.575,12.275 C10.1166667,12.1166667 10.5833333,11.9 10.9666667,11.6166667 C11.35,11.3333333 11.65,10.975 11.8583333,10.5583333 C12.0666667,10.1416667 12.175,9.66666667 12.175,9.13333333 C12.175,8.63333333 12.0916667,8.18333333 11.9166667,7.79166667 C11.875,7.7 11.825,7.6 11.775,7.51666667 L15,7.51666667 L15,7.5 Z",id:"Shape"}))))}),Sub:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"15px",height:"14px",viewBox:"0 0 15 14"},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},I.createElement("g",{id:"subscript-interface-symbol",fill:t.icon.fill,fillRule:"nonzero"},I.createElement("path",{d:"M10.3009091,0.0881818182 L6.99090909,5.42454545 L10.5190909,11.1090909 L8.06590909,11.1090909 L6.48363636,8.46090909 C6.24181818,8.05272727 6.01,7.63727273 5.78909091,7.21772727 L5.56363636,6.78181818 L5.32909091,6.35409091 L5.29727273,6.35409091 L5.06272727,6.79 C4.78272727,7.31863636 4.46545455,7.875 4.10909091,8.46181818 L2.51909091,11.11 L0,11.11 L3.61727273,5.42545455 L0.258636364,0.0886363636 L2.75272727,0.0886363636 L4.22136364,2.54318182 C4.45363636,2.93045455 4.67136364,3.31272727 4.875,3.68909091 L5.07727273,4.07636364 L5.27909091,4.46454545 L5.31045455,4.46454545 C5.40181818,4.29227273 5.46909091,4.16363636 5.51227273,4.07636364 L5.71363636,3.69727273 C5.88590909,3.36363636 6.10181818,2.98181818 6.36,2.55136364 L7.82909091,0.0886363636 L10.3009091,0.0881818182 L10.3009091,0.0881818182 Z M14.7818182,12.9868182 L14.7818182,13.7840909 L10.7727273,13.7840909 L10.7727273,12.7036364 C10.7727273,12.145 10.8736364,11.7722727 11.0736364,11.5877273 C11.2740909,11.405 11.7518182,11.245 12.5054545,11.11 C13.1295455,10.9990909 13.4990909,10.8959091 13.6140909,10.8054545 C13.7295455,10.7131818 13.7863636,10.4740909 13.7863636,10.0927273 C13.7863636,9.72409091 13.7295455,9.49272727 13.6140909,9.39409091 C13.4986364,9.29454545 13.2254545,9.24590909 12.7913636,9.24590909 C12.3463636,9.24590909 12.0640909,9.29545455 11.9486364,9.39590909 C11.8322727,9.49545455 11.7736364,9.73863636 11.7736364,10.125 L11.7736364,10.3495455 L10.7863636,10.3495455 L10.7863636,10.1286364 C10.7863636,9.46272727 10.9240909,9.01454545 11.1977273,8.78454545 C11.4722727,8.55363636 12.0040909,8.43818182 12.7954545,8.43818182 C13.5663636,8.43818182 14.0918182,8.55545455 14.3668182,8.78818182 C14.6422727,9.02181818 14.7809091,9.46454545 14.7809091,10.1172727 C14.7809091,10.7331818 14.6759091,11.1468182 14.4663636,11.3554545 C14.2568182,11.5627273 13.7740909,11.7386364 13.0172727,11.8777273 C12.3931818,11.9913636 12.0309091,12.0872727 11.9281818,12.1672727 C11.8268182,12.2472727 11.7772727,12.4718182 11.7772727,12.8445455 L11.7772727,12.9881818 L14.7818182,12.9868182 L14.7818182,12.9868182 Z",id:"Shape"}))))}),Sup:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"15px",height:"15px",viewBox:"0 0 15 15",style:{marginBottom:5}},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},I.createElement("g",{id:"superscript-x-elevated-to-the-power-of-two",fill:t.icon.fill,fillRule:"nonzero"},I.createElement("path",{d:"M7.21078125,8.88046875 L10.84875,14.7426563 L8.3184375,14.7426563 L6.6871875,12.0121875 C6.43734375,11.5903125 6.19921875,11.1628125 5.97140625,10.7296875 L5.73796875,10.2801563 L5.4965625,9.8390625 L5.46375,9.8390625 L5.22234375,10.2885938 C4.933125,10.8332813 4.6059375,11.4084375 4.2384375,12.0135938 L2.59875,14.7445313 L0,14.7445313 L3.73078125,8.88140625 L0.2671875,3.3778125 L2.84015625,3.3778125 L4.35421875,5.90859375 C4.59421875,6.30890625 4.8178125,6.7021875 5.02828125,7.0903125 L5.236875,7.4896875 L5.4440625,7.89046875 L5.476875,7.89046875 C5.57109375,7.7128125 5.6409375,7.5796875 5.68546875,7.4896875 L5.89265625,7.09875 C6.0703125,6.75515625 6.29296875,6.3609375 6.55921875,5.91703125 L8.07375,3.37734375 L10.621875,3.37734375 L7.21078125,8.88046875 Z M11.795625,4.6940625 C11.795625,4.3096875 11.8476563,4.0771875 11.9521875,3.995625 C12.0567188,3.913125 12.4303125,3.81421875 13.0739063,3.69703125 C13.8539063,3.5521875 14.353125,3.3721875 14.56875,3.15796875 C14.7848438,2.9428125 14.8917188,2.51765625 14.8917188,1.8815625 C14.8917188,1.2084375 14.7496875,0.751875 14.4660938,0.5109375 C14.1815625,0.2709375 13.6401563,0.14953125 12.845625,0.14953125 C12.0309375,0.14953125 11.4815625,0.2690625 11.1975,0.5071875 C10.914375,0.744375 10.7728125,1.2065625 10.7728125,1.89328125 L10.7728125,2.120625 L11.791875,2.120625 L11.791875,1.8890625 C11.791875,1.490625 11.8514063,1.23984375 11.9714063,1.1371875 C12.0923438,1.03453125 12.3815625,0.9825 12.8404688,0.9825 C13.2871875,0.9825 13.5703125,1.03359375 13.689375,1.1353125 C13.8084375,1.23703125 13.8679688,1.47703125 13.8679688,1.85671875 C13.8679688,2.25140625 13.8084375,2.4965625 13.689375,2.59125 C13.5703125,2.68546875 13.1896875,2.79140625 12.5460938,2.90578125 C11.7689063,3.045 11.27625,3.20859375 11.0695313,3.3984375 C10.86375,3.58828125 10.7601563,3.97265625 10.7601563,4.54921875 L10.7601563,5.6634375 L14.8945313,5.6634375 L14.8945313,4.84125 L11.7975,4.84125 L11.795625,4.6940625 L11.795625,4.6940625 Z",id:"Shape"}))))}),Table:Ae(function(e){var t=e.theme;return I.createElement(je,{width:"16",height:"16",viewBox:"0 0 16 16"},I.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},I.createElement("g",{id:"baseline-border_all-24px",transform:"translate(-2.000000, -2.000000)"},I.createElement("path",{d:"M2.5,2.5 L2.5,17.5 L17.5,17.5 L17.5,2.5 L2.5,2.5 Z M9.16666667,15.8333333 L4.16666667,15.8333333 L4.16666667,10.8333333 L9.16666667,10.8333333 L9.16666667,15.8333333 Z M9.16666667,9.16666667 L4.16666667,9.16666667 L4.16666667,4.16666667 L9.16666667,4.16666667 L9.16666667,9.16666667 Z M15.8333333,15.8333333 L10.8333333,15.8333333 L10.8333333,10.8333333 L15.8333333,10.8333333 L15.8333333,15.8333333 Z M15.8333333,9.16666667 L10.8333333,9.16666667 L10.8333333,4.16666667 L15.8333333,4.16666667 L15.8333333,9.16666667 Z",id:"Shape",fill:t.icon.fill,fillRule:"nonzero"}),I.createElement("polygon",{id:"Path",points:"0 0 20 0 20 20 0 20"}))))}),Underline:function(){return I.createElement(je,{width:"18",height:"18",viewBox:"0 0 24 24"},I.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),I.createElement("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}))},Undo:function(){return I.createElement(je,{width:"20",height:"20",viewBox:"0 0 24 24"},I.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),I.createElement("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}))}},We=function(e){var t=e.className,n=e.label,r=e.name;return I.createElement(He,{className:t},n&&I.createElement("label",{htmlFor:r},n),I.createElement(Ue,e))};We.propTypes={className:R.string,label:R.string,name:R.string};var He=Ie("div",{target:"e2akd720"})("align-items:center;display:flex;line-height:1;"),Ue=Ie("input",{target:"e2akd721"})("background-color:",function(e){return e.theme.input.backgroundColor},";color:",function(e){return e.theme.input.color},";border:",function(e){return e.theme.input.border},";height:",function(e){return e.theme.input.height},";width:",function(e){return e.theme.input.width},";margin:",function(e){return e.theme.input.margin},";padding:",function(e){return e.theme.input.padding},";font-size:",function(e){return e.theme.input.fontSize},";&:focus{",function(e){return e.theme.input["&:focus"]},";}"),Ke=function(e,t,n){var r,o=e.getBoundingClientRect(),i=n.getBoundingClientRect(),a=t?t.getBoundingClientRect():{},s=a.width,l=void 0===s?0:s,c=a.height,u=void 0===c?0:c,p="TOP",d=o.left-i.left;(d+=(o.width-l)/2)<3?(r=d+10,d=2):d+l>i.width&&(r=d+l-i.width,(d=i.width-l)<2&&(d=2));var f=o.y-i.y+(o.height||20)+4+6;if(f+u>i.height){var h=o.y-i.y-6-u-4;0<h&&(p="BOTTOM",f=h)}return{modalPosition:{top:f,left:d},arrowPosition:{left:r,dir:p}}},qe=function(e){function i(){var e,t;a(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=f(this,(e=d(i)).call.apply(e,[this].concat(r)))).wrapperRef=I.createRef(),t.state={modalPosition:{},arrowPosition:{dir:"TOP"}},t.componentWillUnmount=function(){window.removeEventListener("keydown",t.handleKeyPress),window.removeEventListener("mousedown",t.handleWindowMouseDown)},t.handleKeyPress=function(e){"Escape"===e.key&&t.props.closeModal()},t.handleWindowMouseDown=function(e){t.wrapperRef.current.contains(e.target)||t.props.closeModal()},t.handleMouseDown=function(){t.active=!0},t.handleKeyDown=function(e){"Tab"===e.key&&(t.active=!0)},t.handleFocus=function(){t.active&&(t.active=!1)},t.handleBlur=function(){t.active?t.active=!1:t.props.closeModal()},t}return c(i,w.Component),s(i,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress),window.addEventListener("mousedown",this.handleWindowMouseDown);var e=this.props,t=e.marker,n=e.editorWrapper;t&&this.setState(l({},Ke(t,this.wrapperRef.current,n.current)))}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.marker,n=e.editorWrapper;if(t){var r,o,i=this.markerPos,a=t.getBoundingClientRect();if(this.markerPos={height:a.height,left:a.left,offsetTop:t.offsetTop,width:a.width},r=i,o=this.markerPos,!r||r.height!==o.height||r.left!==o.left||r.offsetTop!==o.offsetTop||r.width!==o.width||!this.state.modalPosition)this.setState(l({},Ke(t,this.wrapperRef.current,n.current)))}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.marker,r=e.render;if(!n)return null;var o=this.state,i=o.modalPosition,a=o.arrowPosition;return I.createElement(Je,{className:t,marker:n,handleBlur:this.handleBlur,handleFocus:this.handleFocus,handleKeyDown:this.handleKeyDown,handleMouseDown:this.handleMouseDown,ref:this.wrapperRef,style:i,tabIndex:-1},"TOP"===a.dir?I.createElement(Ge,{left:a.left}):I.createElement(Xe,{left:a.left}),r())}}]),i}();qe.propTypes={className:R.string,closeModal:R.func,editorWrapper:R.object,marker:R.object,render:R.func};var Je=Ie("div",{target:"ef7ovoi0"})("position:absolute;background-color:",function(e){return e.theme.modal.backgroundColor},";color:",function(e){return e.theme.modal.color},";border-bottom:",function(e){return e.theme.modal.borderBottom},";border-left:",function(e){return e.theme.modal.borderLeft},";border-right:",function(e){return e.theme.modal.borderRight},";border-top:",function(e){return e.theme.modal.borderTop},";border-bottom-left-radius:",function(e){return e.theme.modal.borderBottomLeftRadius},";border-bottom-right-radius:",function(e){return e.theme.modal.borderBottomLeftRadius},";border-top-left-radius:",function(e){return e.theme.modal.borderTopLeftRadius},";border-top-right-radius:",function(e){return e.theme.modal.borderTopLeftRadius},";box-shadow:",function(e){return e.theme.modal.boxShadow},";font-weight:",function(e){return e.theme.modal.fontWeight},";:focus{outline:none;}"),Ge=Ie("div",{target:"ef7ovoi1"})("background:",function(e){return e.theme.modal.backgroundColor},";border-left:1px solid ",function(e){return e.theme.modal.arrowBorderColor},";border-top:1px solid ",function(e){return e.theme.modal.arrowBorderColor},";height:10px;left:",function(e){var t=e.left;return"calc(50% + ".concat((void 0===t?0:t)-6,"px)")},";position:absolute;top:-7px;transform:rotate(45deg);width:10px;"),Xe=Ie("div",{target:"ef7ovoi2"})("background:",function(e){return e.theme.modal.backgroundColor},";border-right:1px solid ",function(e){return e.theme.modal.arrowBorderColor},";border-bottom:1px solid ",function(e){return e.theme.modal.arrowBorderColor},";height:10px;left:",function(e){var t=e.left;return"calc(50% + ".concat((void 0===t?0:t)-6,"px)")},";position:absolute;bottom:-7px;transform:rotate(45deg);width:10px;"),Ye=function(e){function i(){var e,t;a(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=f(this,(e=d(i)).call.apply(e,[this].concat(r)))).componentWillUnmount=function(){window.removeEventListener("keydown",t.handleKeyPress)},t.handleKeyPress=function(e){"Escape"===e.key&&t.props.hideOverlay()},t.handleMouseDown=function(e){0===e.button&&t.props.hideOverlay()},t.stopPropagation=function(e){return e.stopPropagation()},t}return c(i,w.PureComponent),s(i,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.props.render;return I.createElement(Ze,{onMouseDown:this.handleMouseDown},I.createElement(Qe,{onMouseDown:this.stopPropagation},e()))}}]),i}();Ye.propTypes={hideOverlay:R.func,render:R.func};for(var Ze=Ie("div",{target:"eaf1tod0"})("align-items:center;background-color:",function(e){return e.theme.overlay.backgroundColor},";display:flex;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:10;"),Qe=Ie("div",{target:"eaf1tod1"})("border-radius:",function(e){return e.theme.overlay.contentBorderRadius},";box-shadow:",function(e){return e.theme.overlay.contentBoxShadow},";"),et=g(function(a){(function(){var e,t,n,r,o,i;"undefined"!=typeof performance&&null!==performance&&performance.now?a.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(a.exports=function(){return(e()-o)/1e6},t=process.hrtime,r=(e=function(){var e;return 1e9*(e=t())[0]+e[1]})(),i=1e9*process.uptime(),o=r-i):n=Date.now?(a.exports=function(){return Date.now()-n},Date.now()):(a.exports=function(){return(new Date).getTime()-n},(new Date).getTime())}).call(t)}),tt="undefined"==typeof window?t:window,nt=["moz","webkit"],rt="AnimationFrame",ot=tt["request"+rt],it=tt["cancel"+rt]||tt["cancelRequest"+rt],at=0;!ot&&at<nt.length;at++)ot=tt[nt[at]+"Request"+rt],it=tt[nt[at]+"Cancel"+rt]||tt[nt[at]+"CancelRequest"+rt];if(!ot||!it){var st=0,lt=0,ct=[];ot=function(e){if(0===ct.length){var t=et(),n=Math.max(0,1e3/60-(t-st));st=n+t,setTimeout(function(){for(var e=ct.slice(0),t=ct.length=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(st)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return ct.push({handle:++lt,callback:e,cancelled:!1}),lt},it=function(e){for(var t=0;t<ct.length;t++)ct[t].handle===e&&(ct[t].cancelled=!0)}}var ut=function(e){return ot.call(tt,e)};ut.cancel=function(){it.apply(tt,arguments)},ut.polyfill=function(e){e||(e=tt),e.requestAnimationFrame=ot,e.cancelAnimationFrame=it};var pt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function dt(e){function A(e,t,n){var r=t.trim().split(p),o=(t=r).length,i=e.length;switch(i){case 0:case 1:var a=0;for(e=0===i?"":e[0]+" ";a<o;++a)t[a]=c(e,t[a],n).trim();break;default:var s=a=0;for(t=[];a<o;++a)for(var l=0;l<i;++l)t[s++]=c(e[l]+" ",r[a],n).trim()}return t}function c(e,t,n){var r=t.charCodeAt(0);switch(r<33&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(o,"$1"+e.trim());case 58:return e.trim()+t.replace(o,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(o,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function D(e,t,n,r){var o=e+";",i=2*t+3*n+4*r;if(944===i){e=o.indexOf(":",9)+1;var a=o.substring(e,o.length-1).trim();return a=o.substring(0,e).trim()+a+";",1===$||2===$&&T(a,1)?"-webkit-"+a+a:a}if(0===$||2===$&&!T(o,1))return o;switch(i){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(v,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(a=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+a+o;case 1005:return l.test(o)?o.replace(s,":-webkit-")+o.replace(s,":-moz-")+o:o;case 1e3:switch(t=(a=o.substring(13).trim()).indexOf("-")+1,a.charCodeAt(0)+a.charCodeAt(t)){case 226:a=o.replace(d,"tb");break;case 232:a=o.replace(d,"tb-rl");break;case 220:a=o.replace(d,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+a+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,i=(a=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|a.charCodeAt(7))){case 203:if(a.charCodeAt(8)<111)break;case 115:o=o.replace(a,"-webkit-"+a)+";"+o;break;case 207:case 102:o=o.replace(a,"-webkit-"+(102<i?"inline-":"")+"box")+";"+o.replace(a,"-webkit-"+a)+";"+o.replace(a,"-ms-"+a+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return a=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+a+"-ms-flex-"+a+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(h,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(h,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===m.test(e))return 115===(a=e.substring(e.indexOf(":")+1)).charCodeAt(0)?D(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(a,"-webkit-"+a)+o.replace(a,"-moz-"+a.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(u,"$1-webkit-$2")+o}return o}function T(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),a(2!==t?r:r.replace(i,"$1"),n,t)}function N(e,t){var n=D(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(r," or ($1)").substring(4):"("+t+")"}function R(e,t,n,r,o,i,a,s,l,c){for(var u,p=0,d=t;p<H;++p)switch(u=g[p].call(f,e,d,n,r,o,i,a,s,l,c)){case void 0:case!1:case!0:case null:break;default:d=u}if(d!==t)return d}function t(e){return void 0!==(e=e.prefix)&&(a=null,e?"function"!=typeof e?$=1:($=2,a=e):$=0),t}function f(e,t){var n=e;if(n.charCodeAt(0)<33&&(n=n.trim()),n=[n],0<H){var r=R(-1,t,n,n,z,V,0,0,0,0);void 0!==r&&"string"==typeof r&&(t=r)}var o=function e(t,n,r,o,i){for(var a,s,l,c,u,p=0,d=0,f=0,h=0,m=0,v=0,g=l=a=0,y=0,b=0,w=0,C=0,k=r.length,E=k-1,x="",S="",O="",M="";y<k;){if(s=r.charCodeAt(y),y===E&&0!==d+h+f+p&&(0!==d&&(s=47===d?10:47),h=f=p=0,k++,E++),0===d+h+f+p){if(y===E&&(0<b&&(x=x.replace(F,"")),0<x.trim().length)){switch(s){case 32:case 9:case 59:case 13:case 10:break;default:x+=r.charAt(y)}s=59}switch(s){case 123:for(a=(x=x.trim()).charCodeAt(0),l=1,C=++y;y<k;){switch(s=r.charCodeAt(y)){case 123:l++;break;case 125:l--;break;case 47:switch(s=r.charCodeAt(y+1)){case 42:case 47:e:{for(g=y+1;g<E;++g)switch(r.charCodeAt(g)){case 47:if(42!==s||42!==r.charCodeAt(g-1)||y+2===g)break;y=g+1;break e;case 10:if(47===s){y=g+1;break e}}y=g}}break;case 91:s++;case 40:s++;case 34:case 39:for(;y++<E&&r.charCodeAt(y)!==s;);}if(0===l)break;y++}switch(l=r.substring(C,y),0===a&&(a=(x=x.replace(P,"").trim()).charCodeAt(0)),a){case 64:switch(0<b&&(x=x.replace(F,"")),s=x.charCodeAt(1)){case 100:case 109:case 115:case 45:b=n;break;default:b=W}if(C=(l=e(n,b,l,s,i+1)).length,0<H&&(u=R(3,l,b=A(W,x,w),n,z,V,C,s,i,o),x=b.join(""),void 0!==u&&0===(C=(l=u.trim()).length)&&(s=0,l="")),0<C)switch(s){case 115:x=x.replace(B,N);case 100:case 109:case 45:l=x+"{"+l+"}";break;case 107:l=(x=x.replace(_,"$1 $2"))+"{"+l+"}",l=1===$||2===$&&T("@"+l,3)?"@-webkit-"+l+"@"+l:"@"+l;break;default:l=x+l,112===o&&(S+=l,l="")}else l="";break;default:l=e(n,A(n,x,w),l,o,i+1)}O+=l,l=w=b=g=a=0,x="",s=r.charCodeAt(++y);break;case 125:case 59:if(1<(C=(x=(0<b?x.replace(F,""):x).trim()).length))switch(0===g&&(a=x.charCodeAt(0),45===a||96<a&&a<123)&&(C=(x=x.replace(" ",":")).length),0<H&&void 0!==(u=R(1,x,n,t,z,V,S.length,o,i,o))&&0===(C=(x=u.trim()).length)&&(x="\0\0"),a=x.charCodeAt(0),s=x.charCodeAt(1),a){case 0:break;case 64:if(105===s||99===s){M+=x+r.charAt(y);break}default:58!==x.charCodeAt(C-1)&&(S+=D(x,a,s,x.charCodeAt(2)))}w=b=g=a=0,x="",s=r.charCodeAt(++y)}}switch(s){case 13:case 10:47===d?d=0:0===1+a&&107!==o&&0<x.length&&(b=1,x+="\0"),0<H*U&&R(0,x,n,t,z,V,S.length,o,i,o),V=1,z++;break;case 59:case 125:if(0===d+h+f+p){V++;break}default:switch(V++,c=r.charAt(y),s){case 9:case 32:if(0===h+p+d)switch(m){case 44:case 58:case 9:case 32:c="";break;default:32!==s&&(c=" ")}break;case 0:c="\\0";break;case 12:c="\\f";break;case 11:c="\\v";break;case 38:0===h+d+p&&(b=w=1,c="\f"+c);break;case 108:if(0===h+d+p+j&&0<g)switch(y-g){case 2:112===m&&58===r.charCodeAt(y-3)&&(j=m);case 8:111===v&&(j=v)}break;case 58:0===h+d+p&&(g=y);break;case 44:0===d+f+h+p&&(b=1,c+="\r");break;case 34:case 39:0===d&&(h=h===s?0:0===h?s:h);break;case 91:0===h+d+f&&p++;break;case 93:0===h+d+f&&p--;break;case 41:0===h+d+p&&f--;break;case 40:if(0===h+d+p){if(0===a)switch(2*m+3*v){case 533:break;default:a=1}f++}break;case 64:0===d+f+h+p+g+l&&(l=1);break;case 42:case 47:if(!(0<h+p+f))switch(d){case 0:switch(2*s+3*r.charCodeAt(y+1)){case 235:d=47;break;case 220:C=y,d=42}break;case 42:47===s&&42===m&&C+2!==y&&(33===r.charCodeAt(C+2)&&(S+=r.substring(C,y+1)),c="",d=0)}}0===d&&(x+=c)}v=m,m=s,y++}if(0<(C=S.length)){if(b=n,0<H&&void 0!==(u=R(2,S,b,t,z,V,C,o,i,o))&&0===(S=u).length)return M+S+O;if(S=b.join(",")+"{"+S+"}",0!=$*j){switch(2!==$||T(S,2)||(j=0),j){case 111:S=S.replace(L,":-moz-$1")+S;break;case 112:S=S.replace(I,"::-webkit-input-$1")+S.replace(I,"::-moz-$1")+S.replace(I,":-ms-input-$1")+S}j=0}}return M+S+O}(W,n,t,0,0);return 0<H&&(void 0!==(r=R(-2,o,n,n,z,V,o.length,0,0,0))&&(o=r)),"",j=0,V=z=1,o}var P=/^\0+/g,F=/[\0\r\f]/g,s=/: */g,l=/zoo|gra/,u=/([,: ])(transform)/g,p=/,\r+?/g,o=/([\t\r\n ])*\f?&/g,_=/@(k\w+)\s*(\S*)\s*/,I=/::(place)/g,L=/:(read-only)/g,d=/[svh]\w+-[tblr]{2}/,B=/\(\s*(.*)\s*\)/g,r=/([\s\S]*?);/g,h=/-self|flex-/g,i=/[^]*?(:[rp][el]a[\w-]+)[^]*/,m=/stretch|:\s*\w+\-(?:conte|avail)/,v=/([^-])(image-set\()/,V=1,z=1,j=0,$=1,W=[],g=[],H=0,a=null,U=0;return f.use=function e(t){switch(t){case void 0:case null:H=g.length=0;break;default:switch(t.constructor){case Array:for(var n=0,r=t.length;n<r;++n)e(t[n]);break;case Function:g[H++]=t;break;case Boolean:U=0|!!t}}return e},f.set=t,void 0!==e&&t(e),f}var ft,ht,mt=g(function(e,t){e.exports=function(u){var p="/*|*/";function d(e){if(e)try{u(e+"}")}catch(e){}}return function(e,t,n,r,o,i,a,s,l,c){switch(e){case 1:if(0===l&&64===t.charCodeAt(0))return u(t+";"),"";break;case 2:if(0===s)return t+p;break;case 3:switch(s){case 102:case 112:return u(n[0]+t),"";default:return t+(0===c?p:"")}case-2:t.split("/*|*/}").forEach(d)}}}}),vt=/[A-Z]|^ms/g,gt=(ft=function(e){return e.replace(vt,"-$&").toLowerCase()},ht={},function(e){return void 0===ht[e]&&(ht[e]=ft(e)),ht[e]}),yt=function(e,t){return null==t||"boolean"==typeof t?"":1===pt[e]||45===e.charCodeAt(1)||isNaN(t)||0===t?t:t+"px"};if("production"!==process.env.NODE_ENV){var bt=/(attr|calc|counters?|url)\(/,wt=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit","unset"],Ct=yt;yt=function(e,t){return"content"===e&&("string"!=typeof t||-1===wt.indexOf(t)&&!bt.test(t)&&(t.charAt(0)!==t.charAt(t.length-1)||'"'!==t.charAt(0)&&"'"!==t.charAt(0)))&&console.error("You seem to be using a value for 'content' without quotes, try replacing it with `content: '\""+t+"\"'`"),Ct(e,t)}}var kt="undefined"!=typeof document;function Et(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key||""),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),(void 0!==e.container?e.container:document.head).appendChild(t),t}var xt=function(){function e(e){this.isSpeedy="production"===process.env.NODE_ENV,this.tags=[],this.ctr=0,this.opts=e}var t=e.prototype;return t.inject=function(){if(this.injected)throw new Error("already injected!");this.tags[0]=Et(this.opts),this.injected=!0},t.speedy=function(e){if(0!==this.ctr)throw new Error("cannot change speedy now");this.isSpeedy=!!e},t.insert=function(t,e){if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(this.tags[this.tags.length-1]);try{n.insertRule(t,n.cssRules.length)}catch(e){"production"!==process.env.NODE_ENV&&console.warn("illegal rule",t)}}else{var r=Et(this.opts);this.tags.push(r),r.appendChild(document.createTextNode(t+(e||"")))}this.ctr++,this.ctr%65e3==0&&this.tags.push(Et(this.opts))},t.flush=function(){this.tags.forEach(function(e){return e.parentNode.removeChild(e)}),this.tags=[],this.ctr=0,this.injected=!1},e}();var St=function(e,t){if(void 0!==e.__SECRET_EMOTION__)return e.__SECRET_EMOTION__;void 0===t&&(t={});var n,r=t.key||"css";if("production"!==process.env.NODE_ENV&&/[^a-z-]/.test(r))throw new Error('Emotion key must only contain lower case alphabetical characters and - but "'+r+'" was passed');var o,i=mt(function(e){n+=e,kt&&s.insert(e,c)});void 0!==t.prefix&&(o={prefix:t.prefix});var a={registered:{},inserted:{},nonce:t.nonce,key:r},s=new xt(t);kt&&s.inject();var l=new dt(o);l.use(t.stylisPlugins)(i);var c="";function u(e,t){if(null==e)return"";switch(typeof e){case"boolean":return"";case"function":if(void 0===e.__emotion_styles)return void 0===this&&"production"!==process.env.NODE_ENV&&console.error("Interpolating functions in css calls is deprecated and will be removed in the next major version of Emotion.\nIf you want to have a css call based on props, create a function that returns a css call like this\nlet dynamicStyle = (props) => css`color: ${props.color}`\nIt can be called directly with props or interpolated in a styled call like this\nlet SomeComponent = styled('div')`${dynamicStyle}`"),u.call(this,void 0===this?e():e(this.mergedProps,this.context),t);var n=e.toString();if("NO_COMPONENT_SELECTOR"===n&&"production"!==process.env.NODE_ENV)throw new Error("Component selectors can only be used in conjunction with babel-plugin-emotion.");return n;case"object":return function(e){if(f.has(e))return f.get(e);var n="";return Array.isArray(e)?e.forEach(function(e){n+=u.call(this,e,!1)},this):Object.keys(e).forEach(function(t){if("object"!=typeof e[t])void 0!==a.registered[e[t]]?n+=t+"{"+a.registered[e[t]]+"}":n+=gt(t)+":"+yt(t,e[t])+";";else{if("NO_COMPONENT_SELECTOR"===t&&"production"!==process.env.NODE_ENV)throw new Error("Component selectors can only be used in conjunction with babel-plugin-emotion.");Array.isArray(e[t])&&"string"==typeof e[t][0]&&void 0===a.registered[e[t][0]]?e[t].forEach(function(e){n+=gt(t)+":"+yt(t,e)+";"}):n+=t+"{"+u.call(this,e[t],!1)+"}"}},this),f.set(e,n),n}.call(this,e);default:var r=a.registered[e];return!1===t&&void 0!==r?r:e}}var p,d,f=new WeakMap,h=/label:\s*([^\s;\n{]+)\s*;/g,m=function(e,t){return function(e){for(var t,n=e.length,r=n^n,o=0;4<=n;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)}(e+t)+t};if("production"!==process.env.NODE_ENV){var v=m,g=/\/\*#\ssourceMappingURL=data:application\/json;\S+\s+\*\//g;m=function(e,t){return v(e.replace(g,function(e){return c=e,""}),t)}}var y=function(n){var r=!0,o="",i="";null==n||void 0===n.raw?o+=u.call(this,n,r=!1):o+=n[0];for(var e=arguments.length,t=new Array(1<e?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];return t.forEach(function(e,t){o+=u.call(this,e,46===o.charCodeAt(o.length-1)),!0===r&&void 0!==n[t+1]&&(o+=n[t+1])},this),o=(d=o).replace(h,function(e,t){return i+="-"+t,""}),p=m(o,i),o};if("production"!==process.env.NODE_ENV){var b=l;l=function(e,t){b(e,t),c=""}}function w(e,t){void 0===a.inserted[p]&&(n="",l(e,t),a.inserted[p]=n)}var C=function(){var e=y.apply(this,arguments),t=r+"-"+p;return void 0===a.registered[t]&&(a.registered[t]=d),w("."+t,e),t};function k(t,e){var n="";return e.split(" ").forEach(function(e){void 0!==a.registered[e]?t.push(e):n+=e+" "}),n}function E(e,t){var n=[],r=k(n,e);return n.length<2?e:r+C(n,t)}function x(e){a.inserted[e]=!0}if(kt){var S=document.querySelectorAll("[data-emotion-"+r+"]");Array.prototype.forEach.call(S,function(e){s.tags[0].parentNode.insertBefore(e,s.tags[0]),e.getAttribute("data-emotion-"+r).split(" ").forEach(x)})}var O={flush:function(){kt&&(s.flush(),s.inject()),a.inserted={},a.registered={}},hydrate:function(e){e.forEach(x)},cx:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E(function e(t){for(var n=t.length,r=0,o="";r<n;r++){var i=t[r];if(null!=i){var a=void 0;switch(typeof i){case"boolean":break;case"function":"production"!==process.env.NODE_ENV&&console.error("Passing functions to cx is deprecated and will be removed in the next major version of Emotion.\nPlease call the function before passing it to cx."),a=e([i()]);break;case"object":if(Array.isArray(i))a=e(i);else for(var s in a="",i)i[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=i}a&&(o&&(o+=" "),o+=a)}}return o}(t))},merge:E,getRegisteredStyles:k,injectGlobal:function(){w("",y.apply(this,arguments))},keyframes:function(){var e=y.apply(this,arguments),t="animation-"+p;return w("","@keyframes "+t+"{"+e+"}"),t},css:C,sheet:s,caches:a};return e.__SECRET_EMOTION__=O}("undefined"!=typeof global?global:{}),Ot=(St.flush,St.hydrate,St.cx,St.merge,St.getRegisteredStyles,St.injectGlobal),Mt=(St.keyframes,St.css),At=(St.sheet,St.caches,v(g(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=o(I),n=o(R);function o(e){return e&&e.__esModule?e:{default:e}}var s={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},l=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],c=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},u=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),p=function(){return u?"_"+Math.random().toString(36).substr(2,12):void 0},d=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.inputRef=function(e){t.input=e,"function"==typeof t.props.inputRef&&t.props.inputRef(e)},t.placeHolderSizerRef=function(e){t.placeHolderSizer=e},t.sizerRef=function(e){t.sizer=e},t.state={inputWidth:e.minWidth,inputId:e.id||p()},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,I.Component),r(n,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentWillReceiveProps",value:function(e){var t=e.id;t!==this.props.id&&this.setState({inputId:t||p()})}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(c(e,this.sizer),this.placeHolderSizer&&c(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return u&&e?a.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce(function(e,t){return null!=e?e:t}),t=i({},this.props.style);t.display||(t.display="inline-block");var n,r=i({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),o=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(this.props,[]);return n=o,l.forEach(function(e){return delete n[e]}),o.className=this.props.inputClassName,o.id=this.state.inputId,o.style=r,a.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),a.default.createElement("input",i({},o,{ref:this.inputRef})),a.default.createElement("div",{ref:this.sizerRef,style:s},e),this.props.placeholder?a.default.createElement("div",{ref:this.placeHolderSizerRef,style:s},this.props.placeholder):null)}}]),n}();d.propTypes={className:n.default.string,defaultValue:n.default.any,extraWidth:n.default.oneOfType([n.default.number,n.default.string]),id:n.default.string,injectStyles:n.default.bool,inputClassName:n.default.string,inputRef:n.default.func,inputStyle:n.default.object,minWidth:n.default.oneOfType([n.default.number,n.default.string]),onAutosize:n.default.func,onChange:n.default.func,placeholder:n.default.string,placeholderIsMinWidth:n.default.bool,style:n.default.object,value:n.default.any},d.defaultProps={minWidth:1,injectStyles:!0},t.default=d}))),Dt=function(e,t){return e===t};function Tt(r,n){var o;void 0===n&&(n=Dt);var i,a=[],s=!1,l=function(e,t){return n(e,a[t])};return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s&&o===this&&t.length===a.length&&t.every(l)||(i=r.apply(this,t),s=!0,o=this,a=t),i}}var Nt=g(function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}});v(Nt);var Rt=g(function(e,t){t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default});v(Rt);var Pt=g(function(e,t){t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,n.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var n=Nt(Rt);e.exports=t.default});function Ft(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}v(Pt);var _t=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=Ft(e.className,t):e.setAttribute("class",Ft(e.className&&e.className.baseVal||"",t))};function It(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Lt(n){this.setState(function(e){var t=this.constructor.getDerivedStateFromProps(n,e);return null!=t?t:null}.bind(this))}function Bt(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Bt.__suppressDeprecationWarning=Lt.__suppressDeprecationWarning=It.__suppressDeprecationWarning=!0;var Vt=Object.freeze({polyfill:function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,o=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?o="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==o){var i=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=It,t.componentWillReceiveProps=Lt),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Bt;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}return e}}),zt=g(function(e,t){t.__esModule=!0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}},t.classNamesShape=t.timeoutsShape=void 0;var n,r=(n=R)&&n.__esModule?n:{default:n};var o=r.default.oneOfType([r.default.number,r.default.shape({enter:r.default.number,exit:r.default.number}).isRequired]);t.timeoutsShape=o;var i=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,exit:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterDone:r.default.string,enterActive:r.default.string,exit:r.default.string,exitDone:r.default.string,exitActive:r.default.string})]);t.classNamesShape=i});v(zt);zt.transitionTimeout,zt.classNamesShape,zt.timeoutsShape;var jt=g(function(e,t){t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(R),i=r(I),o=r(m);function r(e){return e&&e.__esModule?e:{default:e}}var s="unmounted";t.UNMOUNTED=s;var l="exited";t.EXITED=l;var c="entering";t.ENTERING=c;var u="entered";t.ENTERED=u;var p="exiting";t.EXITING=p;var a=function(a){var e,t;function n(e,t){var n;n=a.call(this,e,t)||this;var r,o=t.transitionGroup,i=o&&!o.isMounting?e.enter:e.appear;return n.appearStatus=null,e.in?i?(r=l,n.appearStatus=c):r=u:r=e.unmountOnExit||e.mountOnEnter?s:l,n.state={status:r},n.nextCallback=null,n}t=a,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.getChildContext=function(){return{transitionGroup:null}},n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===s?{status:l}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==c&&n!==u&&(t=c):n!==c&&n!==u||(t=p)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=r.appear),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=o.default.findDOMNode(this);t===c?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===l&&this.setState({status:s})},r.performEnter=function(e,t){var n=this,r=this.props.enter,o=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts();t||r?(this.props.onEnter(e,o),this.safeSetState({status:c},function(){n.props.onEntering(e,o),n.onTransitionEnd(e,i.enter,function(){n.safeSetState({status:u},function(){n.props.onEntered(e,o)})})})):this.safeSetState({status:u},function(){n.props.onEntered(e)})},r.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:p},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:l},function(){t.props.onExited(e)})})})):this.safeSetState({status:l},function(){t.props.onExited(e)})},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(t){var n=this,r=!0;return this.nextCallback=function(e){r&&(r=!1,n.nextCallback=null,t(e))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===s)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var o=i.default.Children.only(n);return i.default.cloneElement(o,r)},n}(i.default.Component);function d(){}a.contextTypes={transitionGroup:n.object},a.childContextTypes={transitionGroup:function(){}},a.propTypes="production"!==process.env.NODE_ENV?{children:n.oneOfType([n.func.isRequired,n.element.isRequired]).isRequired,in:n.bool,mountOnEnter:n.bool,unmountOnExit:n.bool,appear:n.bool,enter:n.bool,exit:n.bool,timeout:function(e){var t="production"!==process.env.NODE_ENV?zt.timeoutsShape:{};e.addEndListener||(t=t.isRequired);for(var n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,[e].concat(r))},addEndListener:n.func,onEnter:n.func,onEntering:n.func,onEntered:n.func,onExit:n.func,onExiting:n.func,onExited:n.func}:{},a.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:d,onEntering:d,onEntered:d,onExit:d,onExiting:d,onExited:d},a.UNMOUNTED=0,a.EXITED=1,a.ENTERING=2,a.ENTERED=3,a.EXITING=4;var f=(0,Vt.polyfill)(a);t.default=f});v(jt);jt.EXITING,jt.ENTERED,jt.ENTERING,jt.EXITED,jt.UNMOUNTED;var $t=g(function(e,t){t.__esModule=!0,t.default=void 0;var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(R),r=s(Pt),o=s(_t),i=s(I),a=s(jt);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(t,e){return t&&e&&e.split(" ").forEach(function(e){return(0,r.default)(t,e)})},u=function(t,e){return t&&e&&e.split(" ").forEach(function(e){return(0,o.default)(t,e)})},p="production"!==process.env.NODE_ENV?l({},a.default.propTypes,{classNames:zt.classNamesShape,onEnter:n.func,onEntering:n.func,onEntered:n.func,onExit:n.func,onExiting:n.func,onExited:n.func}):{},d=function(o){var e,t;function n(){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=o.call.apply(o,[this].concat(t))||this).onEnter=function(e,t){var n=r.getClassNames(t?"appear":"enter").className;r.removeClasses(e,"exit"),c(e,n),r.props.onEnter&&r.props.onEnter(e)},r.onEntering=function(e,t){var n=r.getClassNames(t?"appear":"enter").activeClassName;r.reflowAndAddClass(e,n),r.props.onEntering&&r.props.onEntering(e)},r.onEntered=function(e,t){var n=r.getClassNames("enter").doneClassName;r.removeClasses(e,t?"appear":"enter"),c(e,n),r.props.onEntered&&r.props.onEntered(e)},r.onExit=function(e){var t=r.getClassNames("exit").className;r.removeClasses(e,"appear"),r.removeClasses(e,"enter"),c(e,t),r.props.onExit&&r.props.onExit(e)},r.onExiting=function(e){var t=r.getClassNames("exit").activeClassName;r.reflowAndAddClass(e,t),r.props.onExiting&&r.props.onExiting(e)},r.onExited=function(e){var t=r.getClassNames("exit").doneClassName;r.removeClasses(e,"exit"),c(e,t),r.props.onExited&&r.props.onExited(e)},r.getClassNames=function(e){var t=r.props.classNames,n="string"!=typeof t?t[e]:t+"-"+e;return{className:n,activeClassName:"string"!=typeof t?t[e+"Active"]:n+"-active",doneClassName:"string"!=typeof t?t[e+"Done"]:n+"-done"}},r}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,o=n.activeClassName,i=n.doneClassName;r&&u(e,r),o&&u(e,o),i&&u(e,i)},r.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,c(e,t))},r.render=function(){var e=l({},this.props);return delete e.classNames,i.default.createElement(a.default,l({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(i.default.Component);d.propTypes="production"!==process.env.NODE_ENV?p:{};var f=d;t.default=f,e.exports=t.default});v($t);var Wt=g(function(e,t){function r(e,n){var r=Object.create(null);return e&&I.Children.map(e,function(e){return e}).forEach(function(e){var t;r[e.key]=(t=e,n&&(0,I.isValidElement)(t)?n(t):t)}),r}function n(t,n){function e(e){return e in n?n[e]:t[e]}t=t||{},n=n||{};var r,o=Object.create(null),i=[];for(var a in t)a in n?i.length&&(o[a]=i,i=[]):i.push(a);var s={};for(var l in n){if(o[l])for(r=0;r<o[l].length;r++){var c=o[l][r];s[o[l][r]]=e(c)}s[l]=e(l)}for(r=0;r<i.length;r++)s[i[r]]=e(i[r]);return s}function p(e,t,n){return null!=n[t]?n[t]:e.props[t]}t.__esModule=!0,t.getChildMapping=r,t.mergeChildMappings=n,t.getInitialChildMapping=function(t,n){return r(t.children,function(e){return(0,I.cloneElement)(e,{onExited:n.bind(null,e),in:!0,appear:p(e,"appear",t),enter:p(e,"enter",t),exit:p(e,"exit",t)})})},t.getNextChildMapping=function(a,s,l){var c=r(a.children),u=n(s,c);return Object.keys(u).forEach(function(e){var t=u[e];if((0,I.isValidElement)(t)){var n=e in s,r=e in c,o=s[e],i=(0,I.isValidElement)(o)&&!o.props.in;!r||n&&!i?r||!n||i?r&&n&&(0,I.isValidElement)(o)&&(u[e]=(0,I.cloneElement)(t,{onExited:l.bind(null,t),in:o.props.in,exit:p(t,"exit",a),enter:p(t,"enter",a)})):u[e]=(0,I.cloneElement)(t,{in:!1}):u[e]=(0,I.cloneElement)(t,{onExited:l.bind(null,t),in:!0,exit:p(t,"exit",a),enter:p(t,"enter",a)})}}),u}});v(Wt);Wt.getChildMapping,Wt.mergeChildMappings,Wt.getInitialChildMapping,Wt.getNextChildMapping;var Ht=g(function(e,t){t.__esModule=!0,t.default=void 0;var n=r(R),i=r(I);function r(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},o="production"!==process.env.NODE_ENV?{component:n.default.any,children:n.default.node,appear:n.default.bool,enter:n.default.bool,exit:n.default.bool,childFactory:n.default.func}:{},c=function(o){var e,t;function n(e,t){var n,r=(n=o.call(this,e,t)||this).handleExited.bind(s(s(n)));return n.state={handleExited:r,firstRender:!0},n}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},r.componentDidMount=function(){this.appeared=!0},n.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,Wt.getInitialChildMapping)(e,r):(0,Wt.getNextChildMapping)(e,n,r),firstRender:!1}},r.handleExited=function(n,e){var t=(0,Wt.getChildMapping)(this.props.children);n.key in t||(n.props.onExited&&n.props.onExited(e),this.setState(function(e){var t=a({},e.children);return delete t[n.key],{children:t}}))},r.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,["component","childFactory"]),o=l(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o:i.default.createElement(t,r,o)},n}(i.default.Component);c.childContextTypes={transitionGroup:n.default.object.isRequired},c.propTypes="production"!==process.env.NODE_ENV?o:{},c.defaultProps={component:"div",childFactory:function(e){return e}};var u=(0,Vt.polyfill)(c);t.default=u,e.exports=t.default});v(Ht);var Ut=g(function(e,t){t.__esModule=!0,t.default=void 0;var n=r(R),s=r(I),l=r(Ht);function r(e){return e&&e.__esModule?e:{default:e}}var o="production"!==process.env.NODE_ENV?{in:n.default.bool.isRequired,children:function(e,t){return 2!==s.default.Children.count(e[t])?new Error('"'+t+'" must be exactly two transition components.'):null}}:{},i=function(o){var e,t;function n(){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=o.call.apply(o,[this].concat(t))||this).handleEnter=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.handleLifecycle("onEnter",0,t)},r.handleEntering=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.handleLifecycle("onEntering",0,t)},r.handleEntered=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.handleLifecycle("onEntered",0,t)},r.handleExit=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.handleLifecycle("onExit",1,t)},r.handleExiting=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.handleLifecycle("onExiting",1,t)},r.handleExited=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.handleLifecycle("onExited",1,t)},r}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.handleLifecycle=function(e,t,n){var r,o=this.props.children,i=s.default.Children.toArray(o)[t];i.props[e]&&(r=i.props)[e].apply(r,n),this.props[e]&&this.props[e]((0,m.findDOMNode)(this))},r.render=function(){var e=this.props,t=e.children,n=e.in,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,["children","in"]),o=s.default.Children.toArray(t),i=o[0],a=o[1];return delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,s.default.createElement(l.default,r,n?s.default.cloneElement(i,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):s.default.cloneElement(a,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},n}(s.default.Component);i.propTypes="production"!==process.env.NODE_ENV?o:{};var a=i;t.default=a,e.exports=t.default});v(Ut);var Kt=g(function(e){var t=i($t),n=i(Ut),r=i(Ht),o=i(jt);function i(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:o.default,TransitionGroup:r.default,ReplaceTransition:n.default,CSSTransition:t.default}});v(Kt);var qt=Kt.Transition,Jt=Kt.TransitionGroup,Gt=(Kt.ReplaceTransition,Kt.CSSTransition,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),Xt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Yt=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),Zt=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},en=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},tn=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},nn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},rn=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},on=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},an=function(){};var sn=function(e){return Array.isArray(e)?e.filter(Boolean):"object"===(void 0===e?"undefined":Gt(e))&&null!==e?[e]:[]};function ln(e){return-1<[document.documentElement,document.body,window].indexOf(e)}function cn(e){return ln(e)?window.pageYOffset:e.scrollTop}function un(e,t){ln(e)?window.scrollTo(0,t):e.scrollTop=t}function pn(r,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:200,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:an,a=cn(r),s=e-a,l=10,c=0;!function e(){var t,n=s*((t=(t=c+=l)/o-1)*t*t+1)+a;un(r,n),c<o?ut(e):i(r)}()}function dn(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}function fn(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,o=e.placement,i=e.shouldScroll,a=e.isFixedPosition,s=e.theme.spacing,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/,o=document.documentElement;if("fixed"===t.position)return o;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return o}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var u=l.getBoundingClientRect().height,p=n.getBoundingClientRect(),d=p.bottom,f=p.height,h=p.top,m=n.offsetParent.getBoundingClientRect().top,v=window.innerHeight,g=cn(l),y=parseInt(getComputedStyle(n).marginBottom,10),b=parseInt(getComputedStyle(n).marginTop,10),w=m-b,C=v-h,k=w+g,E=u-g-h,x=d-v+g+y,S=g+h-b;switch(o){case"auto":case"bottom":if(f<=C)return{placement:"bottom",maxHeight:t};if(f<=E&&!a)return i&&pn(l,x,160),{placement:"bottom",maxHeight:t};if(!a&&r<=E||a&&r<=C)return i&&pn(l,x,160),{placement:"bottom",maxHeight:a?C-y:E-y};if("auto"===o||a){var O=t;return(!a&&r<=k||a&&r<=w)&&(O=a?w-y-s.controlHeight:k-y-s.controlHeight),{placement:"top",maxHeight:O}}if("bottom"===o)return un(l,x),{placement:"bottom",maxHeight:t};break;case"top":if(f<=w)return{placement:"top",maxHeight:t};if(f<=k&&!a)return i&&pn(l,S,160),{placement:"top",maxHeight:t};if(!a&&r<=k||a&&r<=w){var M=t;return(!a&&r<=k||a&&r<=w)&&(M=a?w-b:k-b),i&&pn(l,S,160),{placement:"top",maxHeight:M}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'+o+'".')}return c}var hn=function(e){return"auto"===e?"bottom":e},mn=function(e){function i(){var e,t,p;Xt(this,i);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=p=nn(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(r)))).state={maxHeight:p.props.maxMenuHeight,placement:null},p.getPlacement=function(e){var t=p.props,n=t.minMenuHeight,r=t.maxMenuHeight,o=t.menuPlacement,i=t.menuPosition,a=t.menuShouldScrollIntoView,s=t.theme,l=p.context.getPortalPlacement;if(e){var c="fixed"===i,u=fn({maxHeight:r,menuEl:e,minHeight:n,placement:o,shouldScroll:a&&!c,isFixedPosition:c,theme:s});l&&l(u),p.setState(u)}},p.getUpdatedProps=function(){var e=p.props.menuPlacement,t=p.state.placement||hn(e);return Qt({},p.props,{placement:t,maxHeight:p.state.maxHeight})},nn(p,t)}return en(i,e),Yt(i,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),i}(w.Component);mn.contextTypes={getPortalPlacement:R.func};var vn=function(e){var t=e.theme,n=t.spacing.baseUnit;return{color:t.colors.neutral40,padding:2*n+"px "+3*n+"px",textAlign:"center"}},gn=vn,yn=vn,bn=function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps;return I.createElement("div",Qt({className:r(Mt(o("noOptionsMessage",e)),{"menu-notice":!0,"menu-notice--no-options":!0},n)},i),t)};bn.defaultProps={children:"No options"};var wn=function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps;return I.createElement("div",Qt({className:r(Mt(o("loadingMessage",e)),{"menu-notice":!0,"menu-notice--loading":!0},n)},i),t)};wn.defaultProps={children:"Loading..."};var Cn=function(e){function a(){var e,t,n;Xt(this,a);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=n=nn(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o)))).state={placement:null},n.getPortalPlacement=function(e){var t=e.placement;t!==hn(n.props.menuPlacement)&&n.setState({placement:t})},nn(n,t)}return en(a,e),Yt(a,[{key:"getChildContext",value:function(){return{getPortalPlacement:this.getPortalPlacement}}},{key:"render",value:function(){var e=this.props,t=e.appendTo,n=e.children,r=e.controlElement,o=e.menuPlacement,i=e.menuPosition,a=e.getStyles,s="fixed"===i;if(!t&&!s||!r)return null;var l,c=this.state.placement||hn(o),u={bottom:(l=r.getBoundingClientRect()).bottom,height:l.height,left:l.left,right:l.right,top:l.top,width:l.width},p=s?0:window.pageYOffset,d={offset:u[c]+p,position:i,rect:u},f=I.createElement("div",{className:Mt(a("menuPortal",d))},n);return t?h.createPortal(f,t):f}}]),a}(w.Component);Cn.childContextTypes={getPortalPlacement:R.func};var kn=Array.isArray,En=Object.keys,xn=Object.prototype.hasOwnProperty;function Sn(e,t){try{return function e(t,n){if(t===n)return!0;if(t&&n&&"object"==(void 0===t?"undefined":Gt(t))&&"object"==(void 0===n?"undefined":Gt(n))){var r,o,i,a=kn(t),s=kn(n);if(a&&s){if((o=t.length)!=n.length)return!1;for(r=o;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(a!=s)return!1;var l=t instanceof Date,c=n instanceof Date;if(l!=c)return!1;if(l&&c)return t.getTime()==n.getTime();var u=t instanceof RegExp,p=n instanceof RegExp;if(u!=p)return!1;if(u&&p)return t.toString()==n.toString();var d=En(t);if((o=d.length)!==En(n).length)return!1;for(r=o;0!=r--;)if(!xn.call(n,d[r]))return!1;for(r=o;0!=r--;)if(!("_owner"===(i=d[r])&&t.$$typeof||e(t[i],n[i])))return!1;return!0}return t!=t&&n!=n}(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}var On=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],Mn=function(e){for(var t=0;t<On.length;t++)e=e.replace(On[t].letters,On[t].base);return e},An=function(e){return e.replace(/^\s+|\s+$/g,"")},Dn=function(e){return e.label+" "+e.value},Tn=function(e){return I.createElement("span",Qt({className:Mt({zIndex:9999,border:0,clip:"rect(1px, 1px, 1px, 1px)",height:1,width:1,position:"absolute",overflow:"hidden",padding:0,whiteSpace:"nowrap",backgroundColor:"red",color:"blue"})},e))},Nn=function(e){function t(){return Xt(this,t),nn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return en(t,e),Yt(t,[{key:"render",value:function(){var e=this.props,t=(e.in,e.out,e.onExited,e.appear,e.enter,e.exit,e.innerRef),n=tn(e,["in","out","onExited","appear","enter","exit","innerRef"]);return I.createElement("input",Qt({ref:t},n,{className:Mt({background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"})}))}}]),t}(w.Component),Rn=function(e){function t(){return Xt(this,t),nn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return en(t,e),Yt(t,[{key:"componentDidMount",value:function(){this.props.innerRef(h.findDOMNode(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),t}(w.Component),Pn=["boxSizing","height","overflow","paddingRight","position"],Fn={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function _n(e){e.preventDefault()}function In(e){e.stopPropagation()}function Ln(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function Bn(){return"ontouchstart"in window||navigator.maxTouchPoints}var Vn=!("undefined"==typeof window||!window.document||!window.document.createElement),zn=0,jn=function(e){function a(){var e,t,n;Xt(this,a);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=n=nn(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o)))).originalStyles={},n.listenerOptions={capture:!1,passive:!1},nn(n,t)}return en(a,e),Yt(a,[{key:"componentDidMount",value:function(){var n=this;if(Vn){var e=this.props,t=e.accountForScrollbars,r=e.touchScrollTarget,o=document.body,i=o&&o.style;if(t&&Pn.forEach(function(e){var t=i&&i[e];n.originalStyles[e]=t}),t&&zn<1){var a=parseInt(this.originalStyles.paddingRight,10)||0,s=document.body?document.body.clientWidth:0,l=window.innerWidth-s+a||0;Object.keys(Fn).forEach(function(e){var t=Fn[e];i&&(i[e]=t)}),i&&(i.paddingRight=l+"px")}o&&Bn()&&(o.addEventListener("touchmove",_n,this.listenerOptions),r&&(r.addEventListener("touchstart",Ln,this.listenerOptions),r.addEventListener("touchmove",In,this.listenerOptions))),zn+=1}}},{key:"componentWillUnmount",value:function(){var n=this;if(Vn){var e=this.props,t=e.accountForScrollbars,r=e.touchScrollTarget,o=document.body,i=o&&o.style;zn=Math.max(zn-1,0),t&&zn<1&&Pn.forEach(function(e){var t=n.originalStyles[e];i&&(i[e]=t)}),o&&Bn()&&(o.removeEventListener("touchmove",_n,this.listenerOptions),r&&(r.removeEventListener("touchstart",Ln,this.listenerOptions),r.removeEventListener("touchmove",In,this.listenerOptions)))}}},{key:"render",value:function(){return null}}]),a}(w.Component);jn.defaultProps={accountForScrollbars:!0};var $n=function(e){function a(){var e,t,n;Xt(this,a);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=n=nn(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o)))).state={touchScrollTarget:null},n.getScrollTarget=function(e){e!==n.state.touchScrollTarget&&n.setState({touchScrollTarget:e})},n.blurSelectInput=function(){document.activeElement&&document.activeElement.blur()},nn(n,t)}return en(a,e),Yt(a,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isEnabled,r=this.state.touchScrollTarget;return n?I.createElement("div",null,I.createElement("div",{onClick:this.blurSelectInput,className:Mt({position:"fixed",left:0,bottom:0,right:0,top:0})}),I.createElement(Rn,{innerRef:this.getScrollTarget},t),r?I.createElement(jn,{touchScrollTarget:r}):null):t}}]),a}(w.PureComponent),Wn=function(e){function i(){var e,t,m;Xt(this,i);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=m=nn(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(r)))).isBottom=!1,m.isTop=!1,m.cancelScroll=function(e){e.preventDefault(),e.stopPropagation()},m.handleEventDelta=function(e,t){var n=m.props,r=n.onBottomArrive,o=n.onBottomLeave,i=n.onTopArrive,a=n.onTopLeave,s=m.scrollTarget,l=s.scrollTop,c=s.scrollHeight,u=s.clientHeight,p=m.scrollTarget,d=0<t,f=c-u-l,h=!1;t<f&&m.isBottom&&(o&&o(e),m.isBottom=!1),d&&m.isTop&&(a&&a(e),m.isTop=!1),d&&f<t?(r&&!m.isBottom&&r(e),p.scrollTop=c,h=!0,m.isBottom=!0):!d&&l<-t&&(i&&!m.isTop&&i(e),h=!(p.scrollTop=0),m.isTop=!0),h&&m.cancelScroll(e)},m.onWheel=function(e){m.handleEventDelta(e,e.deltaY)},m.onTouchStart=function(e){m.touchStart=e.changedTouches[0].clientY},m.onTouchMove=function(e){var t=m.touchStart-e.changedTouches[0].clientY;m.handleEventDelta(e,t)},m.getScrollTarget=function(e){m.scrollTarget=e},nn(m,t)}return en(i,e),Yt(i,[{key:"componentDidMount",value:function(){this.startListening(this.scrollTarget)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.scrollTarget)}},{key:"startListening",value:function(e){e.scrollHeight<=e.clientHeight||("function"==typeof e.addEventListener&&e.addEventListener("wheel",this.onWheel,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchmove",this.onTouchMove,!1))}},{key:"stopListening",value:function(e){e.scrollHeight<=e.clientHeight||("function"==typeof e.removeEventListener&&e.removeEventListener("wheel",this.onWheel,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchmove",this.onTouchMove,!1))}},{key:"render",value:function(){return I.createElement(Rn,{innerRef:this.getScrollTarget},this.props.children)}}]),i}(w.Component),Hn=function(e){function t(){return Xt(this,t),nn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return en(t,e),Yt(t,[{key:"render",value:function(){var e=this.props,t=e.isEnabled,n=tn(e,["isEnabled"]);return t?I.createElement(Wn,n):this.props.children}}]),t}(w.Component);Hn.defaultProps={isEnabled:!0};var Un=function(e){function t(){return Xt(this,t),nn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return en(t,e),Yt(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.cx,o=e.isMulti,i=e.getStyles,a=e.hasValue;return I.createElement("div",{className:r(Mt(i("valueContainer",this.props)),{"value-container":!0,"value-container--is-multi":o,"value-container--has-value":a},n)},t)}}]),t}(w.Component),Kn=function(e){var t=e.size,n=tn(e,["size"]);return I.createElement("svg",Qt({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:Mt({display:"inline-block",fill:"currentColor",lineHeight:1,stroke:"currentColor",strokeWidth:0})},n))},qn=function(e){return I.createElement(Kn,Qt({size:20},e),I.createElement("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Jn=function(e){return I.createElement(Kn,Qt({size:20},e),I.createElement("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Gn=function(e){var t=e.isFocused,n=e.theme,r=n.spacing.baseUnit,o=n.colors;return{color:t?o.neutral60:o.neutral20,display:"flex",padding:2*r,transition:"color 150ms",":hover":{color:t?o.neutral80:o.neutral40}}},Xn=Gn,Yn=function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps;return I.createElement("div",Qt({},i,{className:r(Mt(o("dropdownIndicator",e)),{indicator:!0,"dropdown-indicator":!0},n)}),t)};Yn.defaultProps={children:I.createElement(Jn,null)};var Zn=Gn,Qn=function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps;return I.createElement("div",Qt({},i,{className:r(Mt(o("clearIndicator",e)),{indicator:!0,"clear-indicator":!0},n)}),t)};Qn.defaultProps={children:I.createElement(qn,null)};var er="react-select-loading-indicator",tr=function(e){var t=e.color,n=e.delay,r=e.offset;return I.createElement("span",{className:Mt({animationDuration:"1s",animationDelay:n+"ms",animationIterationCount:"infinite",animationName:er,animationTimingFunction:"ease-in-out",backgroundColor:t,borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":null,height:"1em",verticalAlign:"top",width:"1em"})})};Ot("@keyframes ",er,"{0%,80%,100%{opacity:0;}40%{opacity:1;}};");var nr=function(e){var t=e.className,n=e.cx,r=e.getStyles,o=e.innerProps,i=e.isFocused,a=e.isRtl,s=e.theme.colors,l=i?s.neutral80:s.neutral20;return I.createElement("div",Qt({},o,{className:n(Mt(r("loadingIndicator",e)),{indicator:!0,"loading-indicator":!0},t)}),I.createElement(tr,{color:l,delay:0,offset:a}),I.createElement(tr,{color:l,delay:160,offset:!0}),I.createElement(tr,{color:l,delay:320,offset:!a}))};nr.defaultProps={size:4};var rr=function(e){var t=e.children,n=e.innerProps;return I.createElement("div",n,t)},or=rr,ir=rr,ar=function(e){function t(){return Xt(this,t),nn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return en(t,e),Yt(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.innerProps;return I.createElement("div",n,t)}}]),t}(w.Component);ar.defaultProps={children:I.createElement(qn,{size:14})};var sr=function(e){function t(){return Xt(this,t),nn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return en(t,e),Yt(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.components,o=e.cx,i=e.data,a=e.getStyles,s=e.innerProps,l=e.isDisabled,c=e.removeProps,u=e.selectProps,p=r.Container,d=r.Label,f=r.Remove,h=Qt({className:o(Mt(a("multiValue",this.props)),{"multi-value":!0,"multi-value--is-disabled":l},n)},s),m={className:o(Mt(a("multiValueLabel",this.props)),{"multi-value__label":!0},n)},v=Qt({className:o(Mt(a("multiValueRemove",this.props)),{"multi-value__remove":!0},n)},c);return I.createElement(p,{data:i,innerProps:h,selectProps:u},I.createElement(d,{data:i,innerProps:m,selectProps:u},t),I.createElement(f,{data:i,innerProps:v,selectProps:u}))}}]),t}(w.Component);sr.defaultProps={cropWithEllipsis:!0};var lr,cr={ClearIndicator:Qn,Control:function(e){var t=e.children,n=e.cx,r=e.getStyles,o=e.className,i=e.isDisabled,a=e.isFocused,s=e.innerRef,l=e.innerProps;return I.createElement("div",Qt({ref:s,className:n(Mt(r("control",e)),{control:!0,"control--is-disabled":i,"control--is-focused":a},o)},l),t)},DropdownIndicator:Yn,DownChevron:Jn,CrossIcon:qn,Group:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.Heading,a=e.headingProps,s=e.label,l=e.theme;return I.createElement("div",{className:r(Mt(o("group",e)),{group:!0},n)},I.createElement(i,Qt({},a,{theme:l,getStyles:o,cx:r}),s),I.createElement("div",null,t))},GroupHeading:function(e){var t=e.className,n=e.cx,r=e.getStyles,o=e.theme,i=tn(e,["className","cx","getStyles","theme"]);return I.createElement("div",Qt({className:n(Mt(r("groupHeading",Qt({theme:o},i))),{"group-heading":!0},t)},i))},IndicatorsContainer:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles;return I.createElement("div",{className:r(Mt(o("indicatorsContainer",e)),{indicators:!0},n)},t)},IndicatorSeparator:function(e){var t=e.className,n=e.cx,r=e.getStyles,o=e.innerProps;return I.createElement("span",Qt({},o,{className:n(Mt(r("indicatorSeparator",e)),{"indicator-separator":!0},t)}))},Input:function(e){var t,n=e.className,r=e.cx,o=e.getStyles,i=e.innerRef,a=e.isHidden,s=e.isDisabled,l=e.theme,c=tn(e,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme"]);return I.createElement("div",{className:Mt(o("input",Qt({theme:l},c)))},I.createElement(At,Qt({className:r(null,{input:!0},n),inputRef:i,inputStyle:(t=a,{background:0,border:0,fontSize:"inherit",opacity:t?0:1,outline:0,padding:0,color:"inherit"}),disabled:s},c)))},LoadingIndicator:nr,Menu:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerRef,a=e.innerProps,s=r(Mt(o("menu",e)),{menu:!0},n);return I.createElement("div",Qt({className:s},a,{ref:i}),t)},MenuList:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.isMulti,a=e.innerRef;return I.createElement("div",{className:r(Mt(o("menuList",e)),{"menu-list":!0,"menu-list--is-multi":i},n),ref:a},t)},MenuPortal:Cn,LoadingMessage:wn,NoOptionsMessage:bn,MultiValue:sr,MultiValueContainer:or,MultiValueLabel:ir,MultiValueRemove:ar,Option:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.isDisabled,a=e.isFocused,s=e.isSelected,l=e.innerRef,c=e.innerProps;return I.createElement("div",Qt({ref:l,className:r(Mt(o("option",e)),{option:!0,"option--is-disabled":i,"option--is-focused":a,"option--is-selected":s},n)},c),t)},Placeholder:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps;return I.createElement("div",Qt({className:r(Mt(o("placeholder",e)),{placeholder:!0},n)},i),t)},SelectContainer:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps,a=e.isDisabled,s=e.isRtl;return I.createElement("div",Qt({className:r(Mt(o("container",e)),{"--is-disabled":a,"--is-rtl":s},n)},i),t)},SingleValue:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.isDisabled,a=e.innerProps;return I.createElement("div",Qt({className:r(Mt(o("singleValue",e)),{"single-value":!0,"single-value--is-disabled":i},n)},a),t)},ValueContainer:Un},ur=function(e){return Qt({},cr,e.components)},pr={clearIndicator:Zn,container:function(e){var t=e.isDisabled;return{direction:e.isRtl?"rtl":null,pointerEvents:t?"none":null,position:"relative"}},control:function(e){var t=e.isDisabled,n=e.isFocused,r=e.theme,o=r.colors,i=r.borderRadius,a=r.spacing;return{alignItems:"center",backgroundColor:t?o.neutral5:o.neutral0,borderColor:t?o.neutral10:n?o.primary:o.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px "+o.primary:null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:n?o.primary:o.neutral30}}},dropdownIndicator:Xn,group:function(e){var t=e.theme.spacing;return{paddingBottom:2*t.baseUnit,paddingTop:2*t.baseUnit}},groupHeading:function(e){var t=e.theme.spacing;return{color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*t.baseUnit,paddingRight:3*t.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing.baseUnit,o=n.colors;return{alignSelf:"stretch",backgroundColor:t?o.neutral10:o.neutral20,marginBottom:2*r,marginTop:2*r,width:1}},input:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing,o=n.colors;return{margin:r.baseUnit/2,paddingBottom:r.baseUnit/2,paddingTop:r.baseUnit/2,visibility:t?"hidden":"visible",color:o.neutral80}},loadingIndicator:function(e){var t=e.isFocused,n=e.size,r=e.theme,o=r.colors,i=r.spacing.baseUnit;return{color:t?o.neutral60:o.neutral20,display:"flex",padding:2*i,transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"}},loadingMessage:yn,menu:function(e){var t,n,r=e.placement,o=e.theme,i=o.borderRadius,a=o.spacing,s=o.colors;return Zt(t={},(n=r)?{bottom:"top",top:"bottom"}[n]:"bottom","100%"),Zt(t,"backgroundColor",s.neutral0),Zt(t,"borderRadius",i),Zt(t,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),Zt(t,"marginBottom",a.menuGutter),Zt(t,"marginTop",a.menuGutter),Zt(t,"position","absolute"),Zt(t,"width","100%"),Zt(t,"zIndex",1),t},menuList:function(e){var t=e.maxHeight,n=e.theme.spacing.baseUnit;return{maxHeight:t,overflowY:"auto",paddingBottom:n,paddingTop:n,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e){var t=e.theme,n=t.spacing,r=t.borderRadius;return{backgroundColor:t.colors.neutral10,borderRadius:r/2,display:"flex",margin:n.baseUnit/2,minWidth:0}},multiValueLabel:function(e){var t=e.theme,n=t.borderRadius,r=t.colors,o=e.cropWithEllipsis;return{borderRadius:n/2,color:r.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:o?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(e){var t=e.theme,n=t.spacing,r=t.borderRadius,o=t.colors;return{alignItems:"center",borderRadius:r/2,backgroundColor:e.isFocused&&o.dangerLight,display:"flex",paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}}},noOptionsMessage:gn,option:function(e){var t=e.isDisabled,n=e.isFocused,r=e.isSelected,o=e.theme,i=o.spacing,a=o.colors;return{backgroundColor:r?a.primary:n?a.primary25:"transparent",color:t?a.neutral20:r?a.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:2*i.baseUnit+"px "+3*i.baseUnit+"px",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:r?a.primary:a.primary50}}},placeholder:function(e){var t=e.theme,n=t.spacing;return{color:t.colors.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing,o=n.colors;return{color:t?o.neutral40:o.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2,maxWidth:"calc(100% - "+2*r.baseUnit+"px)",overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(e){var t=e.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:t.baseUnit/2+"px "+2*t.baseUnit+"px",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}},dr={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},fr={backspaceRemovesValue:!0,blurInputOnSelect:dn(),captureMenuScroll:!dn(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){var n=Qt({ignoreCase:!0,ignoreAccents:!0,stringify:Dn,trim:!0,matchFrom:"any"},lr),r=n.ignoreCase,o=n.ignoreAccents,i=n.stringify,a=n.trim,s=n.matchFrom,l=a?An(t):t,c=a?An(i(e)):i(e);return r&&(l=l.toLowerCase(),c=c.toLowerCase()),o&&(l=Mn(l),c=Mn(c)),"start"===s?c.substr(0,l.length)===l:-1<c.indexOf(l)},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return t+" result"+(1!==t?"s":"")+" available"},styles:{},tabIndex:"0",tabSelectsValue:!0},hr=1,mr=function(e){function i(e){Xt(this,i);var t=nn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));vr.call(t);var n=e.value;t.cacheComponents=Tt(t.cacheComponents,Sn).bind(t),t.cacheComponents(e.components),t.instancePrefix="react-select-"+(t.props.instanceId||++hr);var r=sn(n),o=t.buildMenuOptions(e,r);return t.state.menuOptions=o,t.state.selectValue=r,t}return en(i,e),Yt(i,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.options,r=t.value,o=t.inputValue;if(this.cacheComponents(e.components),e.value!==r||e.options!==n||e.inputValue!==o){var i=sn(e.value),a=this.buildMenuOptions(e,i),s=this.getNextFocusedValue(i),l=this.getNextFocusedOption(a.focusable);this.setState({menuOptions:a,selectValue:i,focusedOption:l,focusedValue:s})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)}},{key:"componentDidUpdate",value:function(e){var t,n,r,o,i,a=this.props,s=a.isDisabled,l=a.menuIsOpen,c=this.state.isFocused;(c&&!s&&e.isDisabled||c&&l&&!e.menuIsOpen)&&this.focusInput(),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(t=this.menuListRef,n=this.focusedOptionRef,r=t.getBoundingClientRect(),o=n.getBoundingClientRect(),i=n.offsetHeight/3,o.bottom+i>r.bottom?un(t,Math.min(n.offsetTop+n.clientHeight-t.offsetHeight+i,t.scrollHeight)):o.top-i<r.top&&un(t,Math.max(n.offsetTop-i,0))),this.scrollToFocusedOptionOnUpdate=!1}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){var e=this.props,t=e.isSearchable,n=e.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:t,isMulti:n}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this.state,n=t.menuOptions,r=t.selectValue,o=this.props.isMulti,i="first"===e?0:n.focusable.length-1;if(!o){var a=n.focusable.indexOf(r[0]);-1<a&&(i=a)}this.scrollToFocusedOptionOnUpdate=!0,this.inputIsHiddenAfterUpdate=!1,this.onMenuOpen(),this.setState({focusedValue:null,focusedOption:n.focusable[i]}),this.announceAriaLiveContext({event:"menu"})}},{key:"focusValue",value:function(e){var t=this.props,n=t.isMulti,r=t.isSearchable,o=this.state,i=o.selectValue,a=o.focusedValue;if(n){this.setState({focusedOption:null});var s=i.indexOf(a);a||(s=-1,this.announceAriaLiveContext({event:"value"}));var l=i.length-1,c=-1;if(i.length){switch(e){case"previous":c=0===s?0:-1===s?l:s-1;break;case"next":-1<s&&s<l&&(c=s+1)}-1===c&&this.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:n}}),this.setState({inputIsHidden:-1!==c,focusedValue:i[c]})}}}},{key:"focusOption",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state,r=n.focusedOption,o=n.menuOptions.focusable;if(o.length){var i=0,a=o.indexOf(r);r||(a=-1,this.announceAriaLiveContext({event:"menu"})),"up"===e?i=0<a?a-1:o.length-1:"down"===e?i=(a+1)%o.length:"pageup"===e?(i=a-t)<0&&(i=0):"pagedown"===e?(i=a+t)>o.length-1&&(i=o.length-1):"last"===e&&(i=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[i],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(dr):Qt({},dr,this.props.theme):dr}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.getStyles,n=this.setValue,r=this.selectOption,o=this.props,i=o.classNamePrefix,a=o.isMulti,s=o.isRtl,l=o.options,c=this.state.selectValue,u=this.hasValue();return{cx:function(e,t,n,r){var o,i,a=[t,r];if(n&&e)for(var s in n)n.hasOwnProperty(s)&&n[s]&&a.push(""+(o=e,(i=s)?"-"===i[0]?o+i:o+"__"+i:o));return a.filter(function(e){return e}).map(function(e){return String(e).trim()}).join(" ")}.bind(null,i),clearValue:e,getStyles:t,getValue:function(){return c},hasValue:u,isMulti:a,isRtl:s,options:l,selectOption:r,setValue:n,selectProps:o,theme:this.getTheme()}}},{key:"getNextFocusedValue",value:function(e){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var t=this.state,n=t.focusedValue,r=t.selectValue.indexOf(n);if(-1<r){if(-1<e.indexOf(n))return n;if(r<e.length)return e[r]}return null}},{key:"getNextFocusedOption",value:function(e){var t=this.state.focusedOption;return t&&-1<e.indexOf(t)?t:e[0]}},{key:"hasValue",value:function(){return 0<this.state.selectValue.length}},{key:"hasOptions",value:function(){return!!this.state.menuOptions.render.length}},{key:"countOptions",value:function(){return this.state.menuOptions.focusable.length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return"function"==typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(e,t)}},{key:"isOptionSelected",value:function(e,t){var n=this;if(-1<t.indexOf(e))return!0;if("function"==typeof this.props.isOptionSelected)return this.props.isOptionSelected(e,t);var r=this.getOptionValue(e);return t.some(function(e){return n.getOptionValue(e)===r})}},{key:"filterOption",value:function(e,t){return!this.props.filterOption||this.props.filterOption(e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"!=typeof this.props.formatOptionLabel)return this.getOptionLabel(e);var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"buildMenuOptions",value:function(e,c){var u=this,t=e.inputValue,p=void 0===t?"":t,n=e.options,a=function(e,t){var n=u.isOptionDisabled(e,c),r=u.isOptionSelected(e,c),o=u.getOptionLabel(e),i=u.getOptionValue(e);if(!(u.shouldHideSelectedOptions()&&r||!u.filterOption({label:o,value:i,data:e},p))){var a=n?void 0:function(){return u.onOptionHover(e)},s=n?void 0:function(){return u.selectOption(e)},l=u.getElementId("option")+"-"+t;return{innerProps:{id:l,onClick:s,onMouseMove:a,onMouseOver:a,role:"option",tabIndex:-1},data:e,isDisabled:n,isSelected:r,key:l,label:o,type:"option",value:i}}};return n.reduce(function(r,e,o){if(e.options){u.hasGroups||(u.hasGroups=!0);var t=e.options.map(function(e,t){var n=a(e,o+"-"+t);return n&&!n.isDisabled&&r.focusable.push(e),n}).filter(Boolean);if(t.length){var n=u.getElementId("group")+"-"+o;r.render.push({type:"group",key:n,data:e,options:t})}}else{var i=a(e,""+o);i&&(r.render.push(i),i.isDisabled||r.focusable.push(e))}return r},{render:[],focusable:[]})}},{key:"constructAriaLiveMessage",value:function(){var e,t,n,r,o,i,a,s,l,c,u=this.state,p=u.ariaLiveContext,d=u.selectValue,f=u.focusedValue,h=u.focusedOption,m=this.props,v=m.options,g=m.menuIsOpen,y=m.inputValue,b=m.screenReaderStatus;return(f?(e={focusedValue:f,getOptionLabel:this.getOptionLabel,selectValue:d},t=e.focusedValue,n=e.getOptionLabel,r=e.selectValue,"value "+n(t)+" focused, "+(r.indexOf(t)+1)+" of "+r.length+"."):"")+" "+(h&&g?(o={focusedOption:h,getOptionLabel:this.getOptionLabel,options:v},i=o.focusedOption,a=o.getOptionLabel,s=o.options,"option "+a(i)+" focused, "+(s.indexOf(i)+1)+" of "+s.length+"."):"")+" "+(l={inputValue:y,screenReaderMessage:b({count:this.countOptions()})},c=l.inputValue,l.screenReaderMessage+(c?" for search term "+c:"")+".")+" "+p}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,n=e.isSearchable,r=e.inputId,o=e.inputValue,i=e.tabIndex,a=this.components.Input,s=this.state.inputIsHidden,l=r||this.getElementId("input");if(!n)return I.createElement(Nn,{id:l,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:an,onFocus:this.onInputFocus,readOnly:!0,disabled:t,tabIndex:i,value:""});var c={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]},u=this.commonProps,p=u.cx,d=u.theme;return I.createElement(a,Qt({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:p,getStyles:this.getStyles,id:l,innerRef:this.getInputRef,isDisabled:t,isHidden:s,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:i,theme:d,type:"text",value:o},c))}},{key:"renderPlaceholderOrValue",value:function(){var n=this,e=this.components,r=e.MultiValue,o=e.MultiValueContainer,i=e.MultiValueLabel,a=e.MultiValueRemove,t=e.SingleValue,s=e.Placeholder,l=this.commonProps,c=this.props,u=c.controlShouldRenderValue,p=c.isDisabled,d=c.isMulti,f=c.inputValue,h=c.placeholder,m=this.state,v=m.selectValue,g=m.focusedValue,y=m.isFocused;if(!this.hasValue()||!u)return f?null:I.createElement(s,Qt({},l,{key:"placeholder",isDisabled:p,isFocused:y}),h);if(d)return v.map(function(e){var t=e===g;return I.createElement(r,Qt({},l,{components:{Container:o,Label:i,Remove:a},isFocused:t,isDisabled:p,key:n.getOptionValue(e),removeProps:{onClick:function(){return n.removeValue(e)},onTouchEnd:function(){return n.removeValue(e)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},data:e}),n.formatOptionLabel(e,"value"))});if(f)return null;var b=v[0];return I.createElement(t,Qt({},l,{data:b,isDisabled:p}),this.formatOptionLabel(b,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.components.ClearIndicator,t=this.commonProps,n=this.props,r=n.isDisabled,o=n.isLoading,i=this.state.isFocused;if(!this.isClearable()||!e||r||!this.hasValue()||o)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return I.createElement(e,Qt({},t,{innerProps:a,isFocused:i}))}},{key:"renderLoadingIndicator",value:function(){var e=this.components.LoadingIndicator,t=this.commonProps,n=this.props,r=n.isDisabled,o=n.isLoading,i=this.state.isFocused;if(!e||!o)return null;return I.createElement(e,Qt({},t,{innerProps:{"aria-hidden":"true"},isDisabled:r,isFocused:i}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.components,t=e.DropdownIndicator,n=e.IndicatorSeparator;if(!t||!n)return null;var r=this.commonProps,o=this.props.isDisabled,i=this.state.isFocused;return I.createElement(n,Qt({},r,{isDisabled:o,isFocused:i}))}},{key:"renderDropdownIndicator",value:function(){var e=this.components.DropdownIndicator;if(!e)return null;var t=this.commonProps,n=this.props.isDisabled,r=this.state.isFocused,o={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return I.createElement(e,Qt({},t,{innerProps:o,isDisabled:n,isFocused:r}))}},{key:"renderMenu",value:function(){var i=this,e=this.components,r=e.Group,o=e.GroupHeading,a=e.Menu,s=e.MenuList,t=e.MenuPortal,n=e.LoadingMessage,l=e.NoOptionsMessage,c=e.Option,u=this.commonProps,p=this.state,d=p.focusedOption,f=p.menuOptions,h=this.props,m=h.captureMenuScroll,v=h.inputValue,g=h.isLoading,y=h.loadingMessage,b=h.minMenuHeight,w=h.maxMenuHeight,C=h.menuIsOpen,k=h.menuPlacement,E=h.menuPosition,x=h.menuPortalTarget,S=h.menuShouldBlockScroll,O=h.menuShouldScrollIntoView,M=h.noOptionsMessage,A=h.onMenuScrollToTop,D=h.onMenuScrollToBottom;if(!C)return null;var T=function(e){var t=d===e.data;return e.innerRef=t?i.getFocusedOptionRef:void 0,I.createElement(c,Qt({},u,e,{isFocused:t}),i.formatOptionLabel(e.data,"menu"))},N=void 0;if(this.hasOptions())N=f.render.map(function(e){if("group"===e.type){e.type;var t=tn(e,["type"]),n=e.key+"-heading";return I.createElement(r,Qt({},u,t,{Heading:o,headingProps:{id:n},label:i.formatGroupLabel(e.data)}),e.options.map(function(e){return T(e)}))}if("option"===e.type)return T(e)});else if(g){var R=y({inputValue:v});if(null===R)return null;N=I.createElement(n,u,R)}else{var P=M({inputValue:v});if(null===P)return null;N=I.createElement(l,u,P)}var F={minMenuHeight:b,maxMenuHeight:w,menuPlacement:k,menuPosition:E,menuShouldScrollIntoView:O},_=I.createElement(mn,Qt({},u,F),function(e){var t=e.ref,n=e.placerProps,r=n.placement,o=n.maxHeight;return I.createElement(a,Qt({},u,F,{innerRef:t,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:g,placement:r}),I.createElement(Hn,{isEnabled:m,onTopArrive:A,onBottomArrive:D},I.createElement($n,{isEnabled:S},I.createElement(s,Qt({},u,{innerRef:i.getMenuListRef,isLoading:g,maxHeight:o}),N))))});return x||"fixed"===E?I.createElement(t,Qt({},u,{appendTo:x,controlElement:this.controlRef,menuPlacement:k,menuPosition:E}),_):_}},{key:"renderFormField",value:function(){var n=this,e=this.props,t=e.delimiter,r=e.isDisabled,o=e.isMulti,i=e.name,a=this.state.selectValue;if(i&&!r){if(o){if(t){var s=a.map(function(e){return n.getOptionValue(e)}).join(t);return I.createElement("input",{name:i,type:"hidden",value:s})}var l=0<a.length?a.map(function(e,t){return I.createElement("input",{key:"i-"+t,name:i,type:"hidden",value:n.getOptionValue(e)})}):I.createElement("input",{name:i,type:"hidden"});return I.createElement("div",null,l)}var c=a[0]?this.getOptionValue(a[0]):"";return I.createElement("input",{name:i,type:"hidden",value:c})}}},{key:"renderLiveRegion",value:function(){return this.state.isFocused?I.createElement(Tn,{"aria-live":"assertive"},I.createElement("p",{id:"aria-selection-event"}," ",this.state.ariaLiveSelection),I.createElement("p",{id:"aria-context"}," ",this.constructAriaLiveMessage())):null}},{key:"render",value:function(){var e=this.components,t=e.Control,n=e.IndicatorsContainer,r=e.SelectContainer,o=e.ValueContainer,i=this.props,a=i.className,s=i.id,l=i.isDisabled,c=this.state.isFocused,u=this.commonProps=this.getCommonProps();return I.createElement(r,Qt({},u,{className:a,innerProps:{id:s,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:c}),this.renderLiveRegion(),I.createElement(t,Qt({},u,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:c}),I.createElement(o,Qt({},u,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),I.createElement(n,Qt({},u,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}]),i}(w.Component);mr.defaultProps=fr;var vr=function(){var g=this;this.state={ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,isComposing:!1,menuOptions:{render:[],focusable:[]},selectValue:[]},this.blockOptionHover=!1,this.clearFocusValueOnUpdate=!1,this.hasGroups=!1,this.initialTouchX=0,this.initialTouchY=0,this.instancePrefix="",this.openAfterFocus=!1,this.scrollToFocusedOptionOnUpdate=!1,this.controlRef=null,this.getControlRef=function(e){g.controlRef=e},this.focusedOptionRef=null,this.getFocusedOptionRef=function(e){g.focusedOptionRef=e},this.menuListRef=null,this.getMenuListRef=function(e){g.menuListRef=e},this.inputRef=null,this.getInputRef=function(e){g.inputRef=e},this.cacheComponents=function(e){g.components=ur({components:e})},this.focus=this.focusInput,this.blur=this.blurInput,this.setValue=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"set-value",n=arguments[2],r=g.props,o=r.closeMenuOnSelect,i=r.isMulti,a=r.onChange;g.onInputChange("",{action:"set-value"}),o&&(g.inputIsHiddenAfterUpdate=!i,g.onMenuClose()),g.clearFocusValueOnUpdate=!0,a(e,{action:t,option:n})},this.selectOption=function(e){var t=g.props,n=t.blurInputOnSelect;if(t.isMulti){var r=g.state.selectValue;if(g.isOptionSelected(e,r)){var o=g.getOptionValue(e);g.setValue(r.filter(function(e){return g.getOptionValue(e)!==o}),"deselect-option",e),g.announceAriaLiveSelection({event:"deselect-option",context:{value:g.getOptionLabel(e)}})}else g.setValue([].concat(on(r),[e]),"select-option",e),g.announceAriaLiveSelection({event:"select-option",context:{value:g.getOptionLabel(e)}})}else g.setValue(e,"select-option"),g.announceAriaLiveSelection({event:"select-option",context:{value:g.getOptionLabel(e)}});n&&g.blurInput()},this.removeValue=function(e){var t=g.props.onChange,n=g.state.selectValue,r=g.getOptionValue(e);t(n.filter(function(e){return g.getOptionValue(e)!==r}),{action:"remove-value",removedValue:e}),g.announceAriaLiveSelection({event:"remove-value",context:{value:e?g.getOptionLabel(e):void 0}}),g.focusInput()},this.clearValue=function(){var e=g.props,t=e.isMulti;(0,e.onChange)(t?[]:null,{action:"clear"})},this.popValue=function(){var e=g.props.onChange,t=g.state.selectValue,n=t[t.length-1];g.announceAriaLiveSelection({event:"pop-value",context:{value:n?g.getOptionLabel(n):void 0}}),e(t.slice(0,t.length-1),{action:"pop-value",removedValue:n})},this.getOptionLabel=function(e){return g.props.getOptionLabel(e)},this.getOptionValue=function(e){return g.props.getOptionValue(e)},this.getStyles=function(e,t){var n=pr[e](t);n.boxSizing="border-box";var r=g.props.styles[e];return r?r(n,t):n},this.getElementId=function(e){return g.instancePrefix+"-"+e},this.getActiveDescendentId=function(){var e=g.props.menuIsOpen,t=g.state,n=t.menuOptions,r=t.focusedOption;if(r&&e){var o=n.focusable.indexOf(r),i=n.render[o];return i&&i.key}},this.announceAriaLiveSelection=function(e){var t=e.event,n=e.context;g.setState({ariaLiveSelection:function(e,t){var n=t.value;if(n)switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option "+n+", deselected.";case"select-option":return"option "+n+", selected."}}(t,n)})},this.announceAriaLiveContext=function(e){var t=e.event,n=e.context;g.setState({ariaLiveContext:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.isSearchable,r=t.isMulti,o=t.label;switch(e){case"menu":return"Use Up and Down to choose options, press Backspace to select the currently focused option, press Escape to exit the menu, press Tab to select the option and exit the menu.";case"input":return(o||"Select")+" is focused "+(n?",type to refine list":"")+", press Down to open the menu, "+(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Enter to remove the currently focused value"}}(t,Qt({},n,{label:g.props["aria-label"]}))})},this.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),g.focusInput())},this.onMenuMouseMove=function(e){g.blockOptionHover=!1},this.onControlMouseDown=function(e){var t=g.props.openMenuOnClick;g.state.isFocused?g.props.menuIsOpen?"INPUT"!==e.target.tagName&&g.onMenuClose():g.openMenu("first"):(t&&(g.openAfterFocus=!0),g.focusInput()),"INPUT"!==e.target.tagName&&e.preventDefault()},this.onDropdownIndicatorMouseDown=function(e){if(!(e&&"mousedown"===e.type&&0!==e.button||g.props.isDisabled)){var t=g.props,n=t.isMulti,r=t.menuIsOpen;g.focusInput(),r?(g.inputIsHiddenAfterUpdate=!n,g.onMenuClose()):g.openMenu("first"),e.preventDefault(),e.stopPropagation()}},this.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(g.clearValue(),e.stopPropagation(),g.openAfterFocus=!1,setTimeout(function(){return g.focusInput()}))},this.onScroll=function(e){"boolean"==typeof g.props.closeMenuOnScroll?e.target instanceof HTMLElement&&ln(e.target)&&g.props.onMenuClose():"function"==typeof g.props.closeMenuOnScroll&&g.props.closeMenuOnScroll(e)&&g.props.onMenuClose()},this.onCompositionStart=function(){g.setState({isComposing:!0})},this.onCompositionEnd=function(){g.setState({isComposing:!1})},this.onTouchStart=function(e){var t=rn(e.touches,1)[0];g.initialTouchX=t.clientX,g.initialTouchY=t.clientY,g.userIsDragging=!1},this.onTouchMove=function(e){var t=rn(e.touches,1)[0],n=Math.abs(t.clientX-g.initialTouchX),r=Math.abs(t.clientY-g.initialTouchY);g.userIsDragging=5<n||5<r},this.onTouchEnd=function(e){if(!g.userIsDragging){var t=e.target;g.controlRef&&!g.controlRef.contains(t)&&g.menuListRef&&!g.menuListRef.contains(t)&&g.blurInput(),g.initialTouchX=0,g.initialTouchY=0}},this.onControlTouchEnd=function(e){g.userIsDragging||g.onControlMouseDown(e)},this.onClearIndicatorTouchEnd=function(e){g.userIsDragging||g.onClearIndicatorMouseDown(e)},this.onDropdownIndicatorTouchEnd=function(e){g.userIsDragging||g.onDropdownIndicatorMouseDown(e)},this.handleInputChange=function(e){var t=e.currentTarget.value;g.inputIsHiddenAfterUpdate=!1,g.onInputChange(t,{action:"input-change"}),g.onMenuOpen()},this.onInputFocus=function(e){var t=g.props,n=t.isSearchable,r=t.isMulti;g.props.onFocus&&g.props.onFocus(e),g.inputIsHiddenAfterUpdate=!1,g.announceAriaLiveContext({event:"input",context:{isSearchable:n,isMulti:r}}),g.setState({isFocused:!0}),(g.openAfterFocus||g.props.openMenuOnFocus)&&g.openMenu("first"),g.openAfterFocus=!1},this.onInputBlur=function(e){g.menuListRef&&g.menuListRef.contains(document.activeElement)?g.inputRef.focus():(g.props.onBlur&&g.props.onBlur(e),g.onInputChange("",{action:"input-blur"}),g.onMenuClose(),g.setState({focusedValue:null,isFocused:!1}))},this.onOptionHover=function(e){g.blockOptionHover||g.state.focusedOption===e||g.setState({focusedOption:e})},this.shouldHideSelectedOptions=function(){var e=g.props,t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},this.onKeyDown=function(e){var t=g.props,n=t.isMulti,r=t.backspaceRemovesValue,o=t.escapeClearsValue,i=t.inputValue,a=t.isClearable,s=t.isDisabled,l=t.menuIsOpen,c=t.onKeyDown,u=t.tabSelectsValue,p=t.openMenuOnFocus,d=g.state,f=d.isComposing,h=d.focusedOption,m=d.focusedValue,v=d.selectValue;if(!(s||"function"==typeof c&&(c(e),e.defaultPrevented))){switch(g.blockOptionHover=!0,e.key){case"ArrowLeft":if(!n||i)return;g.focusValue("previous");break;case"ArrowRight":if(!n||i)return;g.focusValue("next");break;case"Delete":case"Backspace":if(i)return;if(m)g.removeValue(m);else{if(!r)return;n?g.popValue():a&&g.clearValue()}break;case"Tab":if(e.shiftKey||!l||!u||!h||p&&g.isOptionSelected(h,v))return;g.selectOption(h);break;case"Enter":if(l){if(!h)return;if(f)return;g.selectOption(h)}else g.focusOption("first");break;case"Escape":l?(g.inputIsHiddenAfterUpdate=!1,g.onInputChange("",{action:"menu-close"}),g.onMenuClose()):a&&o&&g.clearValue();break;case" ":if(i)return;if(!l){g.openMenu("first");break}if(!h)return;g.selectOption(h);break;case"ArrowUp":l?g.focusOption("up"):g.openMenu("last");break;case"ArrowDown":l?g.focusOption("down"):g.openMenu("first");break;case"PageUp":if(!l)return;g.focusOption("pageup");break;case"PageDown":if(!l)return;g.focusOption("pagedown");break;case"Home":if(!l)return;g.focusOption("first");break;case"End":if(!l)return;g.focusOption("last");break;default:return}e.preventDefault()}}},gr=function(n){var e,t;return t=e=function(e){function a(){var e,t,r;Xt(this,a);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=r=nn(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o)))).state={inputValue:void 0!==r.props.inputValue?r.props.inputValue:r.props.defaultInputValue,menuIsOpen:void 0!==r.props.menuIsOpen?r.props.menuIsOpen:r.props.defaultMenuIsOpen,value:void 0!==r.props.value?r.props.value:r.props.defaultValue},r.onChange=function(e,t){r.callProp("onChange",e,t),r.setState({value:e})},r.onInputChange=function(e,t){var n=r.callProp("onInputChange",e,t);r.setState({inputValue:void 0!==n?n:e})},r.onMenuOpen=function(){r.callProp("onMenuOpen"),r.setState({menuIsOpen:!0})},r.onMenuClose=function(){r.callProp("onMenuClose"),r.setState({menuIsOpen:!1})},nn(r,t)}return en(a,e),Yt(a,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(e){return void 0!==this.props[e]?this.props[e]:this.state[e]}},{key:"callProp",value:function(e){if("function"==typeof this.props[e]){for(var t,n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.props)[e].apply(t,on(r))}}},{key:"render",value:function(){var t=this;return I.createElement(n,Qt({},this.props,{ref:function(e){t.select=e},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),a}(w.Component),e.defaultProps={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},t},yr={cacheOptions:!1,defaultOptions:!1},br=function(u){var e,t;return t=e=function(e){function t(e){Xt(this,t);var a=nn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.mounted=!1,a.optionsCache={},a.handleInputChange=function(e,t){var n=a.props,r=n.cacheOptions,o=function(e,t,n){if(n){var r=n(e,t);if("string"==typeof r)return r}return e}(e,t,n.onInputChange);if(!o)return delete a.lastRequest,void a.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(r&&a.optionsCache[o])a.setState({inputValue:o,loadedInputValue:o,loadedOptions:a.optionsCache[o],isLoading:!1,passEmptyOptions:!1});else{var i=a.lastRequest={};a.setState({inputValue:o,isLoading:!0,passEmptyOptions:!a.state.loadedInputValue},function(){a.loadOptions(o,function(e){a.mounted&&(e&&(a.optionsCache[o]=e),i===a.lastRequest&&(delete a.lastRequest,a.setState({isLoading:!1,loadedInputValue:o,loadedOptions:e||[],passEmptyOptions:!1})))})})}return o},a.state={defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0,inputValue:e.inputValue,isLoading:!0===e.defaultOptions,loadedOptions:[],passEmptyOptions:!1},a}return en(t,e),Yt(t,[{key:"componentDidMount",value:function(){var n=this;this.mounted=!0;var e=this.props.defaultOptions,t=this.state.inputValue;!0===e&&this.loadOptions(t,function(e){if(n.mounted){var t=!!n.lastRequest;n.setState({defaultOptions:e||[],isLoading:t})}})}},{key:"componentWillReceiveProps",value:function(e){e.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),e.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(e,t){var n=this.props.loadOptions;if(!n)return t();var r=n(e,t);r&&"function"==typeof r.then&&r.then(t,function(){return t()})}},{key:"render",value:function(){var t=this,e=this.props,n=(e.loadOptions,tn(e,["loadOptions"])),r=this.state,o=r.defaultOptions,i=r.inputValue,a=r.isLoading,s=r.loadedInputValue,l=r.loadedOptions,c=r.passEmptyOptions?[]:i&&s?l:o||[];return I.createElement(u,Qt({},n,{filterOption:this.props.filterOption||null,ref:function(e){t.select=e},options:c,isLoading:a,onInputChange:this.handleInputChange}))}}]),t}(w.Component),e.defaultProps=yr,t},wr=(br(gr(mr)),function(e,t){var n=e.toLowerCase();return t.value.toLowerCase()===n||t.label.toLowerCase()===n}),Cr=Qt({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'+e+'"'},isValidNewOption:function(t,e,n){return!(!t||e.some(function(e){return wr(t,e)})||n.some(function(e){return wr(t,e)}))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),kr=function(r){var e,t;return t=e=function(e){function n(e){Xt(this,n);var f=nn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));f.onChange=function(e,t){var n=f.props,r=n.getNewOptionData,o=n.inputValue,i=n.isMulti,a=n.onChange,s=n.onCreateOption,l=n.value;if("select-option"!==t.action)return a(e,t);var c=f.state.newOption,u=Array.isArray(e)?e:[e];if(u[u.length-1]!==c)a(e,t);else if(s)s(o);else{var p=r(o,o),d={action:"create-option"};a(i?[].concat(on(sn(l)),[p]):p,d)}};var t=e.options||[];return f.state={newOption:void 0,options:t},f}return en(n,e),Yt(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.allowCreateWhileLoading,n=e.createOptionPosition,r=e.formatCreateLabel,o=e.getNewOptionData,i=e.inputValue,a=e.isLoading,s=e.isValidNewOption,l=e.value,c=e.options||[],u=this.state.newOption;u=s(i,sn(l),c)?o(i,r(i)):void 0,this.setState({newOption:u,options:!t&&a||!u?c:"first"===n?[u].concat(on(c)):[].concat(on(c),[u])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var t=this,e=tn(this.props,[]),n=this.state.options;return I.createElement(r,Qt({},e,{ref:function(e){t.select=e},options:n,onChange:this.onChange}))}}]),n}(w.Component),e.defaultProps=Cr,t},Er=(gr(kr(mr)),br(gr(kr(mr))),function(e){var n=e.component,t=e.duration,r=void 0===t?1:t,o=e.in,i=(e.onExited,tn(e,["component","duration","in","onExited"])),a={entering:{opacity:0},entered:{opacity:1,transition:"opacity "+r+"ms"},exiting:{opacity:0},exited:{opacity:0}};return I.createElement(qt,{mountOnEnter:!0,unmountOnExit:!0,in:o,timeout:r},function(e){var t={style:Qt({},a[e])};return I.createElement(n,Qt({innerProps:t},i))})}),xr=function(e){function a(){var e,t,n;Xt(this,a);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=n=nn(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o)))).duration=260,n.state={width:"auto"},n.transition={exiting:{width:0,transition:"width "+n.duration+"ms ease-out"},exited:{width:0}},n.getWidth=function(e){if(e&&isNaN(n.state.width)){var t=e.getBoundingClientRect().width;n.setState({width:t})}},n.getStyle=function(e){return{overflow:"hidden",whiteSpace:"nowrap",width:e}},n.getTransition=function(e){return n.transition[e]},nn(n,t)}return en(a,e),Yt(a,[{key:"render",value:function(){var n=this,e=this.props,r=e.children,t=e.in,o=this.state.width;return I.createElement(qt,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:t,timeout:this.duration},function(e){var t=Qt({},n.getStyle(o),n.getTransition(e));return I.createElement("div",{ref:n.getWidth,style:t},r)})}}]),a}(w.Component),Sr=function(e){var t,n,r,o,i,a=ur({components:e}),s=a.Input,l=a.MultiValue,c=a.Placeholder,u=a.SingleValue,p=a.ValueContainer,d=tn(a,["Input","MultiValue","Placeholder","SingleValue","ValueContainer"]);return Qt({Input:(i=s,function(e){e.in,e.onExited,e.appear,e.enter,e.exit;var t=e.innerRef,n=tn(e,["in","onExited","appear","enter","exit","innerRef"]);return I.createElement(i,Qt({innerRef:t},n))}),MultiValue:(o=l,function(e){var t=e.in,n=e.onExited,r=tn(e,["in","onExited"]);return I.createElement(xr,{in:t,onExited:n},I.createElement(o,Qt({cropWithEllipsis:t},r)))}),Placeholder:(r=c,function(e){return I.createElement(Er,Qt({component:r,duration:e.isMulti?260:1},e))}),SingleValue:(n=u,function(e){return I.createElement(Er,Qt({component:n},e))}),ValueContainer:(t=p,function(e){return I.createElement(Jt,Qt({component:t},e))})},d)},Or=Sr(),Mr=(Or.Input,Or.MultiValue,Or.Placeholder,Or.SingleValue,Or.ValueContainer,Tt(Sr,Sn),gr(mr)),Ar=function(e){return I.createElement(cr.Option,e,I.createElement(e.value.tag,{style:Dr},e.label,I.createElement(Tr,null,e.value.keymap)))},Dr={alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},Tr=Ie("span",{target:"erof0um0"})("color:",function(e){return e.theme.blockSelect.keymapColor},";font-size:10px;"),Nr=function(n,r){return function(e,t){return l({},e,n,r?r(t):{})}},Rr=function(e){var t,n=e.className,r=e.onChange,o=e.options,i=e.selectedOption,a=e.theme.blockSelect;return I.createElement(Mr,{className:n,components:{Option:Ar},onChange:r,options:o,styles:(t=a,{container:Nr({display:"inline-block",backgroundColor:t.backgroundColor,borderRadius:t.borderRadius,fontSize:t.fontSize,fontWeight:"600",lineHeight:1}),control:Nr({backgroundColor:t.backgroundColor,border:t.border,borderRadius:t.borderRadius,boxShadow:"none",height:t.height,minHeight:t.height,width:t.width,"&:hover":t["&:hover"]},function(e){return l({},e.isSelected?t["&:selected"]:{})}),dropdownIndicator:Nr({padding:"4px","& svg":{fill:t.color}}),indicatorSeparator:Nr({display:"none"}),option:Nr({alignItems:"center",display:"flex",color:t.color,height:t.optionHeight,minHeight:t.optionHeight,padding:"0 8px","&:hover":t["&:hover"]},function(e){return l({},e.isSelected?t["&:selected"]:{})}),menu:Nr({width:t.dropdownWidth})}),value:i})};Rr.propTypes={onChange:R.func,options:R.array,selectedOption:R.object,theme:R.object};var Pr=Ae(Rr),Fr=function(e){return I.createElement(_r,e)},_r=Ie("span",{target:"e18lhlm00"})("display:inline-block;width:",function(e){return"toolbar"===e.type?2:4},"px;"),Ir=function(e){return I.createElement(Br,e)},Lr=me("0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}"),Br=Ie("div",{target:"eqpctpo0"})("animation:",Lr," 1s linear infinite;border-color:",function(e){return e.theme.spinner.borderColor},";border-radius:50%;border-style:solid;border-top-color:",function(e){return e.theme.spinner.borderTopColor},";border-width:",function(e){return e.theme.spinner.borderWidth},";height:",function(e){return e.theme.spinner.height},";width:",function(e){return e.theme.spinner.width},";"),Vr=function(e){return I.createElement(zr,e)},zr=Ie("div",{target:"e18xitgp0"})("background-color:",function(e){return e.theme.toolbarSeparator.backgroundColor},";display:inline-block;height:",function(e){return e.theme.toolbarSeparator.height},";margin:",function(e){return e.theme.toolbarSeparator.margin},";width:1px;"),jr={listeners:[],addListener:function(e){this.listeners.push(e)},removeListener:function(e){var t=this.listeners.indexOf(e);-1<t&&this.listeners.splice(t,1)},dispatch:function(t){this.listeners.forEach(function(e){e(t)})}},$r=function(e){function i(){var e,t;a(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=f(this,(e=d(i)).call.apply(e,[this].concat(r)))).state={app_params:{}},t.updateView=function(e){t.setState({app_params:{view:e}})},t}return c(i,w.PureComponent),s(i,[{key:"componentWillMount",value:function(){jr.addListener(this.updateView)}},{key:"componentWillUnmount",value:function(){jr.removeListener(this.updateView)}},{key:"render",value:function(){return this.props.render(this.state.app_params)}}]),i}();function Wr(e){this.content=e}Wr.prototype={constructor:Wr,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return-1==o?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new Wr(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new Wr(n)},addToStart:function(e,t){return new Wr([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Wr(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(-1==i?o.length:i,0,t,n),new Wr(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=Wr.from(e)).size?new Wr(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=Wr.from(e)).size?new Wr(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Wr.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},Wr.from=function(e){if(e instanceof Wr)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Wr(t)};var Hr=Wr,Ur=g(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,u=(n=Hr)&&"object"==typeof n&&"default"in n?n.default:n;var d=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},r={firstChild:{},lastChild:{},childCount:{}};d.prototype.nodesBetween=function(e,t,n,r,o){void 0===r&&(r=0);for(var i=0,a=0;a<t;i++){var s=this.content[i],l=a+s.nodeSize;if(e<l&&!1!==n(s,r+a,o,i)&&s.content.size){var c=a+1;s.nodesBetween(Math.max(0,e-c),Math.min(s.content.size,t-c),n,r+c)}a=l}},d.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},d.prototype.textBetween=function(n,r,o,i){var a="",s=!0;return this.nodesBetween(n,r,function(e,t){e.isText?(a+=e.text.slice(Math.max(n,t)-t,r-t),s=!o):e.isLeaf&&i?(a+=i,s=!o):!s&&e.isBlock&&(a+=o,s=!0)},0),a},d.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new d(r,this.size+e.size)},d.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(e<t)for(var o=0,i=0;i<t;o++){var a=this.content[o],s=i+a.nodeSize;e<s&&((i<e||t<s)&&(a=a.isText?a.cut(Math.max(0,e-i),Math.min(a.text.length,t-i)):a.cut(Math.max(0,e-i-1),Math.min(a.content.size,t-i-1))),n.push(a),r+=a.nodeSize),i=s}return new d(n,r)},d.prototype.cutByIndex=function(e,t){return e==t?d.empty:0==e&&t==this.content.length?this:new d(this.content.slice(e,t))},d.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new d(r,o)},d.prototype.addToStart=function(e){return new d([e].concat(this.content),this.size+e.nodeSize)},d.prototype.addToEnd=function(e){return new d(this.content.concat(e),this.size+e.nodeSize)},d.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},r.firstChild.get=function(){return this.content.length?this.content[0]:null},r.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},r.childCount.get=function(){return this.content.length},d.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},d.prototype.maybeChild=function(e){return this.content[e]},d.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},d.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),function e(t,n,r){for(var o=0;;o++){if(o==t.childCount||o==n.childCount)return t.childCount==n.childCount?null:r;var i=t.child(o),a=n.child(o);if(i!=a){if(!i.sameMarkup(a))return r;if(i.isText&&i.text!=a.text){for(var s=0;i.text[s]==a.text[s];s++)r++;return r}if(i.content.size||a.content.size){var l=e(i.content,a.content,r+1);if(null!=l)return l}r+=i.nodeSize}else r+=i.nodeSize}}(this,e,t)},d.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),function e(t,n,r,o){for(var i=t.childCount,a=n.childCount;;){if(0==i||0==a)return i==a?null:{a:r,b:o};var s=t.child(--i),l=n.child(--a),c=s.nodeSize;if(s!=l){if(!s.sameMarkup(l))return{a:r,b:o};if(s.isText&&s.text!=l.text){for(var u=0,p=Math.min(s.text.length,l.text.length);u<p&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,r--,o--;return{a:r,b:o}}if(s.content.size||l.content.size){var d=e(s.content,l.content,r-1,o-1);if(d)return d}r-=c,o-=c}else r-=c,o-=c}}(this,e,t,n)},d.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return i(0,e);if(e==this.size)return i(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(e<=o)return o==e||0<t?i(n+1,o):i(n,r);r=o}},d.prototype.toString=function(){return"<"+this.toStringInner()+">"},d.prototype.toStringInner=function(){return this.content.join(", ")},d.prototype.toJSON=function(){return this.content.length?this.content.map(function(e){return e.toJSON()}):null},d.fromJSON=function(e,t){if(!t)return d.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new d(t.map(e.nodeFromJSON))},d.fromArray=function(e){if(!e.length)return d.empty;for(var t,n=0,r=0;r<e.length;r++){var o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new d(t||e,n)},d.from=function(e){return e?e instanceof d?e:Array.isArray(e)?this.fromArray(e):new d([e],e.nodeSize):d.empty},Object.defineProperties(d.prototype,r);var o={index:0,offset:0};function i(e,t){return o.index=e,o.offset=t,o}function a(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!a(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t&&a(e[o],t[o])))return!1;for(var i in t)if(!(i in e))return!1}return!0}d.empty=new d([],0);var s=function(e,t){this.type=e,this.attrs=t};function l(e){var t=Error.call(this,e);return t.__proto__=l.prototype,t}s.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t},s.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},s.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},s.prototype.eq=function(e){return this==e||this.type==e.type&&a(this.attrs,e.attrs)},s.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},s.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},s.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},s.setFrom=function(e){if(!e||0==e.length)return s.none;if(e instanceof s)return[e];var t=e.slice();return t.sort(function(e,t){return e.type.rank-t.type.rank}),t},s.none=[],((l.prototype=Object.create(Error.prototype)).constructor=l).prototype.name="ReplaceError";var c=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},p={size:{}};function f(e,t,n){if(n.openStart>e.depth)throw new l("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new l("Inconsistent open depths");return function e(t,n,r,o){var i=t.index(o),a=t.node(o);{if(i==n.index(o)&&o<t.depth-r.openStart){var s=e(t,n,r,o+1);return a.copy(a.content.replaceChild(i,s))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){var l=C(r,t),c=l.start,u=l.end;return y(a,b(t,c,u,n,o))}var p=t.parent,d=p.content;return y(p,d.cut(0,t.parentOffset).append(r.content).append(d.cut(n.parentOffset)))}return y(a,w(t,n,o))}}(e,t,n,0)}function h(e,t){if(!t.type.compatibleContent(e.type))throw new l("Cannot join "+t.type.name+" onto "+e.type.name)}function m(e,t,n){var r=e.node(n);return h(r,t.node(n)),r}function v(e,t){var n=t.length-1;0<=n&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function g(e,t,n,r){var o=(t||e).node(n),i=0,a=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(v(e.nodeAfter,r),i++));for(var s=i;s<a;s++)v(o.child(s),r);t&&t.depth==n&&t.textOffset&&v(t.nodeBefore,r)}function y(e,t){if(!e.type.validContent(t))throw new l("Invalid content for node "+e.type.name);return e.copy(t)}function b(e,t,n,r,o){var i=e.depth>o&&m(e,t,o+1),a=r.depth>o&&m(n,r,o+1),s=[];return g(null,e,o,s),i&&a&&t.index(o)==n.index(o)?(h(i,a),v(y(i,b(e,t,n,r,o+1)),s)):(i&&v(y(i,w(e,t,o+1)),s),g(t,n,o,s),a&&v(y(a,w(n,r,o+1)),s)),g(r,null,o,s),new d(s)}function w(e,t,n){var r=[];(g(null,e,n,r),e.depth>n)&&v(y(m(e,t,n+1),w(e,t,n+1)),r);return g(t,null,n,r),new d(r)}function C(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),o=n-1;0<=o;o--)r=t.node(o).copy(d.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}p.size.get=function(){return this.content.size-this.openStart-this.openEnd},c.prototype.insertAt=function(e,t){var n=function e(t,n,r,o){var i=t.findIndex(n);var a=i.index;var s=i.offset;var l=t.maybeChild(a);if(s==n||l.isText)return o&&!o.canReplace(a,a,r)?null:t.cut(0,n).append(r).append(t.cut(n));var c=e(l.content,n-s-1,r);return c&&t.replaceChild(a,l.copy(c))}(this.content,e+this.openStart,t,null);return n&&new c(n,this.openStart,this.openEnd)},c.prototype.removeBetween=function(e,t){return new c(function e(t,n,r){var o=t.findIndex(n);var i=o.index;var a=o.offset;var s=t.maybeChild(i);var l=t.findIndex(r);var c=l.index;var u=l.offset;if(a==n||s.isText){if(u!=r&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(e(s.content,n-a-1,r-a-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},c.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},c.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},c.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return 0<this.openStart&&(e.openStart=this.openStart),0<this.openEnd&&(e.openEnd=this.openEnd),e},c.fromJSON=function(e,t){if(!t)return c.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new c(d.fromJSON(e,t.content),t.openStart||0,t.openEnd||0)},c.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new c(e,n,r)},Object.defineProperties(c.prototype,p),c.empty=new c(d.empty,0,0);var k=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},E={parent:{},doc:{},textOffset:{},nodeAfter:{},nodeBefore:{}};k.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},E.parent.get=function(){return this.node(this.depth)},E.doc.get=function(){return this.node(0)},k.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},k.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},k.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},k.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},k.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},k.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},k.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},E.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},E.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},E.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},k.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return s.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i},k.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},k.prototype.sharedDepth=function(e){for(var t=this.depth;0<t;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},k.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);0<=n;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new M(this,e,n)},k.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},k.prototype.max=function(e){return e.pos>this.pos?e:this},k.prototype.min=function(e){return e.pos<this.pos?e:this},k.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},k.resolve=function(e,t){if(!(0<=t&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,o=t,i=e;;){var a=i.content.findIndex(o),s=a.index,l=a.offset,c=o-l;if(n.push(i,s,r+l),!c)break;if((i=i.child(s)).isText)break;o=c-1,r+=l+1}return new k(t,n,o)},k.resolveCached=function(e,t){for(var n=0;n<x.length;n++){var r=x[n];if(r.pos==t&&r.doc==e)return r}var o=x[S]=k.resolve(e,t);return S=(S+1)%O,o},Object.defineProperties(k.prototype,E);var x=[],S=0,O=12,M=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},A={start:{},end:{},parent:{},startIndex:{},endIndex:{}};A.start.get=function(){return this.$from.before(this.depth+1)},A.end.get=function(){return this.$to.after(this.depth+1)},A.parent.get=function(){return this.$from.node(this.depth)},A.startIndex.get=function(){return this.$from.index(this.depth)},A.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(M.prototype,A);var D=Object.create(null),T=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||d.empty,this.marks=r||s.none},N={nodeSize:{},childCount:{},textContent:{},firstChild:{},lastChild:{},isBlock:{},isTextblock:{},inlineContent:{},isInline:{},isText:{},isLeaf:{},isAtom:{}};N.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},N.childCount.get=function(){return this.content.childCount},T.prototype.child=function(e){return this.content.child(e)},T.prototype.maybeChild=function(e){return this.content.maybeChild(e)},T.prototype.forEach=function(e){this.content.forEach(e)},T.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},T.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},N.textContent.get=function(){return this.textBetween(0,this.content.size,"")},T.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},N.firstChild.get=function(){return this.content.firstChild},N.lastChild.get=function(){return this.content.lastChild},T.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},T.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},T.prototype.hasMarkup=function(e,t,n){return this.type==e&&a(this.attrs,t||e.defaultAttrs||D)&&s.sameSet(this.marks,n||s.none)},T.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},T.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},T.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},T.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return c.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),a=r.start(i),s=r.node(i).content.cut(r.pos-a,o.pos-a);return new c(s,r.depth-i,o.depth-i)},T.prototype.replace=function(e,t,n){return f(this.resolve(e),this.resolve(t),n)},T.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(!(t=t.maybeChild(r)))return null;if(o==e||t.isText)return t;e-=o+1}},T.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},T.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},T.prototype.resolve=function(e){return k.resolveCached(this,e)},T.prototype.resolveNoCache=function(e){return k.resolve(this,e)},T.prototype.rangeHasMark=function(e,t,n){var r=!1;return e<t&&this.nodesBetween(e,t,function(e){return n.isInSet(e.marks)&&(r=!0),!r}),r},N.isBlock.get=function(){return this.type.isBlock},N.isTextblock.get=function(){return this.type.isTextblock},N.inlineContent.get=function(){return this.type.inlineContent},N.isInline.get=function(){return this.type.isInline},N.isText.get=function(){return this.type.isText},N.isLeaf.get=function(){return this.type.isLeaf},N.isAtom.get=function(){return this.type.isAtom},T.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),P(this.marks,e)},T.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},T.prototype.canReplace=function(e,t,n,r,o){void 0===n&&(n=d.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(e).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var s=r;s<o;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0},T.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd},T.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},T.prototype.defaultContentType=function(e){return this.contentMatchAt(e).defaultType},T.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach(function(e){return e.check()})},T.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(function(e){return e.toJSON()})),e},T.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=d.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(T.prototype,N);var R=function(o){function t(e,t,n,r){if(o.call(this,e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}o&&(t.__proto__=o);var e={textContent:{},nodeSize:{}};return((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):P(this.marks,JSON.stringify(this.text))},e.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},e.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var e=o.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(t.prototype,e),t}(T);function P(e,t){for(var n=e.length-1;0<=n;n--)t=e[n].type.name+"("+t+")";return t}var F=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},_={inlineContent:{},defaultType:{},edgeCount:{}};F.parse=function(e,t){var n=new I(e,t);if(null==n.next)return F.empty;var r=B(n);n.next&&n.err("Unexpected trailing text");var a,s,o=(a=function(e){var o=[[]];return h(function n(e,r){if("choice"==e.type)return e.exprs.reduce(function(e,t){return e.concat(n(t,r))},[]);if("seq"==e.type)for(var t=0;;t++){var o=n(e.exprs[t],r);if(t==e.exprs.length-1)return o;h(o,r=d())}else{if("star"==e.type){var i=d();return f(r,i),h(n(e.expr,i),i),[f(i)]}if("plus"==e.type){var a=d();return h(n(e.expr,r),a),h(n(e.expr,a),a),[f(a)]}if("opt"==e.type)return[f(r)].concat(n(e.expr,r));if("range"==e.type){for(var s=r,l=0;l<e.min;l++){var c=d();h(n(e.expr,s),c),s=c}if(-1==e.max)h(n(e.expr,s),s);else for(var u=e.min;u<e.max;u++){var p=d();f(s,p),h(n(e.expr,s),p),s=p}return[f(s)]}if("name"==e.type)return[f(r,null,e.value)]}}(e,0),d()),o;function d(){return o.push([])-1}function f(e,t,n){var r={term:n,to:t};return o[e].push(r),r}function h(e,t){e.forEach(function(e){return e.to=t})}}(r),s=Object.create(null),function e(t){var i=[];t.forEach(function(e){a[e].forEach(function(e){var t=e.term,n=e.to;if(t){var r=i.indexOf(t),o=-1<r&&i[r+1];H(a,n).forEach(function(e){o||i.push(t,o=[]),-1==o.indexOf(e)&&o.push(e)})}})});for(var n=s[t.join(",")]=new F(-1<t.indexOf(a.length-1)),r=0;r<i.length;r+=2){var o=i[r+1].sort(W);n.next.push(i[r],s[o.join(",")]||e(o))}return n}(H(a,0)));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s+=2){var l=o.next[s],c=o.next[s+1];a.push(l.name),!i||l.isText||l.hasRequiredAttrs()||(i=!1),-1==r.indexOf(c)&&r.push(c)}i&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position")}}(o,n),o},F.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},F.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r},_.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},_.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},F.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},F.prototype.fillBefore=function(l,c,u){void 0===c&&(c=!1),void 0===u&&(u=0);var p=[this];return function e(t,n){var r=t.matchFragment(l,u);if(r&&(!c||r.validEnd))return d.from(n.map(function(e){return e.createAndFill()}));for(var o=0;o<t.next.length;o+=2){var i=t.next[o],a=t.next[o+1];if(!i.isText&&!i.hasRequiredAttrs()&&-1==p.indexOf(a)){p.push(a);var s=e(a,n.concat(i));if(s)return s}}}(this,[])},F.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},F.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s+=2){var l=o.next[s];l.isLeaf||l.hasRequiredAttrs()||l.name in t||r.type&&!o.next[s+1].validEnd||(n.push({match:l.contentMatch,type:l,via:r}),t[l.name]=!0)}}},_.edgeCount.get=function(){return this.next.length>>1},F.prototype.edge=function(e){var t=e<<1;if(t>this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},F.prototype.toString=function(){var o=[];return function e(t){o.push(t);for(var n=1;n<t.next.length;n+=2)-1==o.indexOf(t.next[n])&&e(t.next[n])}(this),o.map(function(e,t){for(var n=t+(e.validEnd?"*":" ")+" ",r=0;r<e.next.length;r+=2)n+=(r?", ":"")+e.next[r].name+"->"+o.indexOf(e.next[r+1]);return n}).join("\n")},Object.defineProperties(F.prototype,_),F.empty=new F(!0);var I=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},L={next:{}};function B(e){for(var t=[];t.push(V(e)),e.eat("|"););return 1==t.length?t[0]:{type:"choice",exprs:t}}function V(e){for(var t=[];t.push(z(e)),e.next&&")"!=e.next&&"|"!=e.next;);return 1==t.length?t[0]:{type:"seq",exprs:t}}function z(e){for(var t=function(t){{if(t.eat("(")){var e=B(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var a=n[i];-1<a.groups.indexOf(t)&&o.push(a)}0==o.length&&e.err("No node type or group '"+t+"' found");return o}(t,t.next).map(function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}});return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=$(e,t)}return t}function j(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function $(e,t){var n=j(e),r=n;return e.eat(",")&&(r="}"!=e.next?j(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function W(e,t){return e-t}function H(s,e){var l=[];return function e(t){var n=s[t];if(1==n.length&&!n[0].term)return e(n[0].to);l.push(t);for(var r=0;r<n.length;r++){var o=n[r],i=o.term,a=o.to;i||-1!=l.indexOf(a)||e(a)}}(e),l.sort(W)}function U(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function K(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function q(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new X(e[n]);return t}L.next.get=function(){return this.tokens[this.pos]},I.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},I.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(I.prototype,L);var J=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=q(n.attrs),this.defaultAttrs=U(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},G={isInline:{},isTextblock:{},isLeaf:{},isAtom:{}};G.isInline.get=function(){return!this.isBlock},G.isTextblock.get=function(){return this.isBlock&&this.inlineContent},G.isLeaf.get=function(){return this.contentMatch==F.empty},G.isAtom.get=function(){return this.isLeaf||this.spec.atom},J.prototype.hasRequiredAttrs=function(e){for(var t in this.attrs)if(this.attrs[t].isRequired&&(!e||!(t in e)))return!0;return!1},J.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},J.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:K(this.attrs,e)},J.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new T(this,this.computeAttrs(e),d.from(t),s.setFrom(n))},J.prototype.createChecked=function(e,t,n){if(t=d.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new T(this,this.computeAttrs(e),t,s.setFrom(n))},J.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=d.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t).fillBefore(d.empty,!0);return o?new T(this,e,t.append(o),s.setFrom(n)):null},J.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},J.prototype.allowsMarkType=function(e){return null==this.markSet||-1<this.markSet.indexOf(e)},J.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},J.prototype.allowedMarks=function(e){var t;if(null==this.markSet)return e;for(var n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:s.empty:e},J.compile=function(e,n){var r=Object.create(null);e.forEach(function(e,t){return r[e]=new J(e,n,t)});var t=n.spec.topNode||"doc";if(!r[t])throw new RangeError("Schema is missing its top node type ('"+t+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r},Object.defineProperties(J.prototype,G);var X=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},Y={isRequired:{}};Y.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(X.prototype,Y);var Z=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=q(r.attrs),this.rank=t,this.excluded=null;var o=U(this.attrs);this.instance=o&&new s(this,o)};Z.prototype.create=function(e){return!e&&this.instance?this.instance:new s(this,K(this.attrs,e))},Z.compile=function(e,n){var r=Object.create(null),o=0;return e.forEach(function(e,t){return r[e]=new Z(e,o++,n,t)}),r},Z.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e.slice(0,t).concat(e.slice(t+1));return e},Z.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},Z.prototype.excludes=function(e){return-1<this.excluded.indexOf(e)};var Q=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=u.from(e.nodes),this.spec.marks=u.from(e.marks),this.nodes=J.compile(this.spec.nodes,this),this.marks=Z.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",a=o.spec.marks;o.contentMatch=n[i]||(n[i]=F.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?ee(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var s in this.marks){var l=this.marks[s],c=l.spec.excludes;l.excluded=null==c?[l]:""==c?[]:ee(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ee(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],a=i;if(i)n.push(i);else for(var s in e.marks){var l=e.marks[s];("_"==o||l.spec.group&&-1<l.spec.group.split(" ").indexOf(o))&&n.push(a=l)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}Q.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof J))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},Q.prototype.text=function(e,t){var n=this.nodes.text;return new R(n,n.defaultAttrs,e,s.setFrom(t))},Q.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},Q.prototype.nodeFromJSON=function(e){return T.fromJSON(this,e)},Q.prototype.markFromJSON=function(e){return s.fromJSON(this,e)},Q.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var te=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})};te.prototype.parse=function(e,t){void 0===t&&(t={});var n=new se(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},te.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new se(this,t,!0);return n.addAll(e,null,t.from,t.to),c.maxOpen(n.finish())},te.prototype.matchTag=function(e,t){for(var n,r,o=0;o<this.tags.length;o++){var i=this.tags[o];if(n=e,r=i.tag,(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,r)&&(void 0===i.namespace||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){var a=i.getAttrs(e);if(!1===a)continue;i.attrs=a}return i}}},te.prototype.matchStyle=function(e,t,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(e)||o.context&&!n.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},te.schemaRules=function(n){var o=[];function r(e){for(var t=null==e.priority?50:e.priority,n=0;n<o.length;n++){var r=o[n];if((null==r.priority?50:r.priority)<t)break}o.splice(n,0,e)}var e=function(t){var e=n.marks[t].spec.parseDOM;e&&e.forEach(function(e){r(e=ce(e)),e.mark=t})};for(var t in n.marks)e(t);var i;for(var a in n.nodes)i=void 0,(i=n.nodes[a].spec.parseDOM)&&i.forEach(function(e){r(e=ce(e)),e.node=a});return o},te.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new te(e,te.schemaRules(e)))};var ne={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},re={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},oe={ol:!0,ul:!0};function ie(e){return(e?1:0)|("full"===e?2:0)}var ae=function(e,t,n,r,o,i){this.type=e,this.attrs=t,this.solid=r,this.match=o||(4&i?null:e.contentMatch),this.options=i,this.content=[],this.marks=n,this.activeMarks=s.none};ae.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(d.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},ae.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/\s+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=d.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(d.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r};var se=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.pendingMarks=[];var r,o=t.topNode,i=ie(t.preserveWhitespace)|(n?4:0);r=o?new ae(o.type,o.attrs,s.none,!0,t.topMatch||o.type.contentMatch,i):new ae(n?null:e.schema.topNodeType,null,s.none,!0,null,i),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},le={top:{},currentPos:{}};function ce(e){var t={};for(var n in e)t[n]=e[n];return t}le.top.get=function(){return this.nodes[this.open]},se.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o])}},se.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/\S/.test(t)){if(1&n.options)2&n.options||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/\s+/g," "),/^\s/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/\s$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},se.prototype.addElement=function(e){var t=e.nodeName.toLowerCase();oe.hasOwnProperty(t)&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&oe.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var n=this.options.ruleFromNode&&this.options.ruleFromNode(e)||this.parser.matchTag(e,this);if(n?n.ignore:re.hasOwnProperty(t))this.findInside(e);else if(!n||n.skip){n&&n.skip.nodeType&&(e=n.skip);var r,o=this.top,i=this.needsBlock;ne.hasOwnProperty(t)&&(r=!0,o.type||(this.needsBlock=!0)),this.addAll(e),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(e,n)},se.prototype.readStyles=function(e){for(var t=s.none,n=0;n<e.length;n+=2){var r=this.parser.matchStyle(e[n],e[n+1],this);if(r){if(r.ignore)return null;t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t)}}return t},se.prototype.addElementByRule=function(e,t){var n,r,o,i=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs)):n=this.enter(r,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(function(e){return i.insertNode(e)});else{var s=t.contentElement;"string"==typeof s?s=e.querySelector(s):"function"==typeof s&&(s=s(e)),s||(s=e),this.findAround(e,s,!0),this.addAll(s,n)}return n&&(this.sync(a),this.open--),o&&this.removePendingMark(o),!0},se.prototype.addAll=function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];i!=a;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i),t&&ne.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)},se.prototype.findPlace=function(e){for(var t,n,r=this.open;0<=r;r--){var o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(n=o,!(t=i).length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var a=0;a<t.length;a++)this.enterInner(t[a],null,!1);return!0},se.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));n.content.push(e.mark(r))}},se.prototype.applyPendingMarks=function(e){for(var t=0;t<this.pendingMarks.length;t++){var n=this.pendingMarks[t];e.type&&!e.type.allowsMarkType(n.type)||n.type.isInSet(e.activeMarks)||(e.activeMarks=n.addToSet(e.activeMarks),this.pendingMarks.splice(t--,1))}},se.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&(this.applyPendingMarks(this.top),this.enterInner(e,t,!0,n)),r},se.prototype.enterInner=function(e,t,n,r){this.closeExtra();var o=this.top;o.match=o.match&&o.match.matchType(e,t);var i=null==r?-5&o.options:ie(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new ae(e,t,o.activeMarks,n,null,i)),this.open++},se.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},se.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},se.prototype.sync=function(e){for(var t=this.open;0<=t;t--)if(this.nodes[t]==e)return void(this.open=t)},se.prototype.addPendingMark=function(e){this.pendingMarks.push(e)},se.prototype.removePendingMark=function(e){var t=this.pendingMarks.lastIndexOf(e);if(-1<t)this.pendingMarks.splice(t,1);else{var n=this.top;n.activeMarks=e.removeFromSet(n.activeMarks)}},le.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;0<=t;t--){for(var n=this.nodes[t].content,r=n.length-1;0<=r;r--)e+=n[r].nodeSize;t&&e++}return e},se.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},se.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},se.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node))t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},se.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},se.prototype.matchesContext=function(e){var o=this;if(-1<e.indexOf("|"))return e.split(/\s*\|\s*/).some(this.matchesContext,this);var i=e.split("/"),a=this.options.context,s=!(this.isOpen||a&&a.parent.type!=this.nodes[0].type),l=-(a?a.depth+1:0)+(s?0:1),c=function(e,t){for(;0<=e;e--){var n=i[e];if(""==n){if(e==i.length-1||0==e)continue;for(;l<=t;t--)if(c(e-1,t))return!0;return!1}var r=0<t||0==t&&s?o.nodes[t].type:a&&l<=t?a.node(t-l).type:null;if(!r||r.name!=n&&-1==r.groups.indexOf(n))return!1;t--}return!0};return c(i.length-1,this.open)},se.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;0<=t;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Object.defineProperties(se.prototype,le);var ue=function(e,t){this.nodes=e||{},this.marks=t||{}};function pe(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function de(e){return e.document||window.document}ue.prototype.serializeFragment=function(e,a,t){var s=this;void 0===a&&(a={}),t||(t=de(a).createDocumentFragment());var l=t,c=null;return e.forEach(function(e){if(c||e.marks.length){c||(c=[]);for(var t=0,n=0;t<c.length&&n<e.marks.length;){var r=e.marks[n];if(s.marks[r.type.name]){if(!r.eq(c[t]))break;t+=2,n++}else n++}for(;t<c.length;)l=c.pop(),c.pop();for(;n<e.marks.length;){var o=e.marks[n++],i=s.serializeMark(o,e.isInline,a);i&&(c.push(o,l),l.appendChild(i.dom),l=i.contentDOM||i.dom)}}l.appendChild(s.serializeNode(e,a))}),t},ue.prototype.serializeNode=function(e,t){void 0===t&&(t={});var n=ue.renderSpec(de(t),this.nodes[e.type.name](e)),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,o,t):this.serializeFragment(e.content,t,o)}return r},ue.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var n=this.serializeNode(e,t),r=e.marks.length-1;0<=r;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},ue.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&ue.renderSpec(de(n),r(e,t))},ue.renderSpec=function(e,t){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};var n=e.createElement(t[0]),r=null,o=t[1],i=1;if(o&&"object"==typeof o&&null==o.nodeType&&!Array.isArray(o))for(var a in i=2,o)"style"==a?n.style.cssText=o[a]:null!=o[a]&&n.setAttribute(a,o[a]);for(var s=i;s<t.length;s++){var l=t[s];if(0===l){if(s<t.length-1||i<s)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var c=ue.renderSpec(e,l),u=c.dom,p=c.contentDOM;if(n.appendChild(u),p){if(r)throw new RangeError("Multiple content holes");r=p}}return{dom:n,contentDOM:r}},ue.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new ue(this.nodesFromSchema(e),this.marksFromSchema(e)))},ue.nodesFromSchema=function(e){var t=pe(e.nodes);return t.text||(t.text=function(e){return e.text}),t},ue.marksFromSchema=function(e){return pe(e.marks)},t.Node=T,t.ResolvedPos=k,t.NodeRange=M,t.Fragment=d,t.Slice=c,t.ReplaceError=l,t.Mark=s,t.Schema=Q,t.NodeType=J,t.MarkType=Z,t.ContentMatch=F,t.DOMParser=te,t.DOMSerializer=ue});v(Ur);Ur.Node,Ur.ResolvedPos,Ur.NodeRange,Ur.Fragment,Ur.Slice,Ur.ReplaceError,Ur.Mark;var Kr=Ur.Schema,qr=(Ur.NodeType,Ur.MarkType,Ur.ContentMatch,Ur.DOMParser,Ur.DOMSerializer,g(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var f=Math.pow(2,16);function c(e){return 65535&e}var h=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},n=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};n.prototype.recover=function(e){var t,n=0,r=c(e);if(!this.inverted)for(var o=0;o<r;o++)n+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*r]+n+((t=e)-(65535&t))/f},n.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},n.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},n.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(e<s)break;var l=this.ranges[a+o],c=this.ranges[a+i],u=s+l;if(e<=u){var p=s+r+((l?e==s?-1:e==u?1:t:t)<0?0:c);if(n)return p;var d=a/3+(e-s)*f;return new h(p,t<0?e!=s:e!=u,d)}r+=c-l}return n?e+r:new h(e+r)},n.prototype.touches=function(e,t){for(var n=0,r=c(t),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(e<s)break;var l=this.ranges[a+o];if(e<=s+l&&a==3*r)return!0;n+=this.ranges[a+i]-l}return!1},n.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(a,a+l,s,s+c),o+=c-l}},n.prototype.invert=function(){return new n(this.ranges,!this.inverted)},n.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},n.offset=function(e){return 0==e?n.empty:new n(e<0?[0,-e,0]:[0,0,e])},n.empty=new n([]);var r=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function o(e){var t=Error.call(this,e);return t.__proto__=o.prototype,t}r.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new r(this.maps,this.mirror,e,t)},r.prototype.copy=function(){return new r(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},r.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},r.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},r.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},r.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},r.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;0<=t;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&t<r?n-r-1:null)}},r.prototype.invert=function(){var e=new r;return e.appendMappingInverted(this),e},r.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},r.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},r.prototype._map=function(e,t,n){for(var r=!1,o=null,i=this.from;i<this.to;i++){var a=this.maps[i],s=o&&o[i];if(null!=s&&a.touches(e,s))e=a.recover(s);else{var l=a.mapResult(e,t);if(null!=l.recover){var c=this.getMirror(i);if(null!=c&&i<c&&c<this.to){if(l.deleted){i=c,e=this.maps[c].recover(l.recover);continue}(o||(o=Object.create(null)))[c]=l.recover}}l.deleted&&(r=!0),e=l.pos}}return n?e:new h(e,r)},((o.prototype=Object.create(Error.prototype)).constructor=o).prototype.name="TransformError";var i=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new r},a={before:{},docChanged:{}};function s(){throw new Error("Override me")}a.before.get=function(){return this.docs.length?this.docs[0]:this.doc},i.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new o(t.failed);return this},i.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},a.docChanged.get=function(){return 0<this.steps.length},i.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(i.prototype,a);var l=Object.create(null),u=function(){};u.prototype.apply=function(e){return s()},u.prototype.getMap=function(){return n.empty},u.prototype.invert=function(e){return s()},u.prototype.map=function(e){return s()},u.prototype.merge=function(e){return null},u.prototype.toJSON=function(){return s()},u.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=l[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},u.jsonID=function(e,t){if(e in l)throw new RangeError("Duplicate use of step JSON ID "+e);return(l[e]=t).prototype.jsonID=e,t};var p=function(e,t){this.doc=e,this.failed=t};p.ok=function(e){return new p(e,null)},p.fail=function(e){return new p(null,e)},p.fromReplace=function(e,t,n,r){try{return p.ok(e.replace(t,n,r))}catch(e){if(e instanceof Ur.ReplaceError)return p.fail(e.message);throw e}};var x=function(o){function r(e,t,n,r){o.call(this),this.from=e,this.to=t,this.slice=n,this.structure=!!r}return o&&(r.__proto__=o),((r.prototype=Object.create(o&&o.prototype)).constructor=r).prototype.apply=function(e){return this.structure&&d(e,this.from,this.to)?p.fail("Structure replace would overwrite content"):p.fromReplace(e,this.from,this.to,this.slice)},r.prototype.getMap=function(){return new n([this.from,this.to-this.from,this.slice.size])},r.prototype.invert=function(e){return new r(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},r.prototype.map=function(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted?null:new r(t.pos,Math.max(t.pos,n.pos),this.slice)},r.prototype.merge=function(e){if(!(e instanceof r)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var t=this.slice.size+e.slice.size==0?Ur.Slice.empty:new Ur.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new r(e.from,this.to,t,this.structure)}var n=this.slice.size+e.slice.size==0?Ur.Slice.empty:new Ur.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new r(this.from,this.to+(e.to-e.from),n,this.structure)},r.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},r.fromJSON=function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new r(t.from,t.to,Ur.Slice.fromJSON(e,t.slice),!!t.structure)},r}(u);u.jsonID("replace",x);var g=function(s){function i(e,t,n,r,o,i,a){s.call(this),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=i,this.structure=!!a}return s&&(i.__proto__=s),((i.prototype=Object.create(s&&s.prototype)).constructor=i).prototype.apply=function(e){if(this.structure&&(d(e,this.from,this.gapFrom)||d(e,this.gapTo,this.to)))return p.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return p.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?p.fromReplace(e,this.from,this.to,n):p.fail("Content does not fit in gap")},i.prototype.getMap=function(){return new n([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},i.prototype.invert=function(e){var t=this.gapTo-this.gapFrom;return new i(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},i.prototype.map=function(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deleted&&n.deleted||r<t.pos||o>n.pos?null:new i(t.pos,n.pos,r,o,this.slice,this.insert,this.structure)},i.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},i.fromJSON=function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new i(t.from,t.to,t.gapFrom,t.gapTo,Ur.Slice.fromJSON(e,t.slice),t.insert,!!t.structure)},i}(u);function d(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;0<o&&0<i&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(0<o)for(var a=r.node(i).maybeChild(r.indexAfter(i));0<o;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function m(e){return{type:e,attrs:null}}function v(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function y(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;0<=o;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(0<i)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;0<=a;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}function b(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(b(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return Ur.Fragment.fromArray(r)}u.jsonID("replaceAround",g),i.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,o=e.depth,i=n.before(o+1),a=r.after(o+1),s=i,l=a,c=Ur.Fragment.empty,u=0,p=o,d=!1;t<p;p--)d||0<n.index(p)?(d=!0,c=Ur.Fragment.from(n.node(p).copy(c)),u++):s--;for(var f=Ur.Fragment.empty,h=0,m=o,v=!1;t<m;m--)v||r.after(m+1)<r.end(m)?(v=!0,f=Ur.Fragment.from(r.node(m).copy(f)),h++):l++;return this.step(new g(s,l,i,a,new Ur.Slice(c.append(f),u,h),c.size-u,!0))},i.prototype.wrap=function(e,t){for(var n=Ur.Fragment.empty,r=t.length-1;0<=r;r--)n=Ur.Fragment.from(t[r].type.create(t[r].attrs,n));var o=e.start,i=e.end;return this.step(new g(o,i,o,i,new Ur.Slice(n,0,0),t.length,!0))},i.prototype.setBlockType=function(e,t,u,p){var d=this;if(void 0===t&&(t=e),!u.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var f=this.steps.length;return this.doc.nodesBetween(e,t,function(e,t){if(e.isTextblock&&!e.hasMarkup(u,p)&&(i=d.doc,a=d.mapping.slice(f).map(t),s=u,l=i.resolve(a),c=l.index(),l.parent.canReplaceWith(c,c+1,s))){d.clearIncompatible(d.mapping.slice(f).map(t,1),u);var n=d.mapping.slice(f),r=n.map(t,1),o=n.map(t+e.nodeSize,1);return d.step(new g(r,o,r+1,o-1,new Ur.Slice(Ur.Fragment.from(u.create(p,null,e.marks)),0,0),1,!0)),!1}var i,a,s,l,c}),this},i.prototype.setNodeMarkup=function(e,t,n,r){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var i=t.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,i);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new g(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Ur.Slice(Ur.Fragment.from(i),0,0),1,!0))},i.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var r=this.doc.resolve(e),o=Ur.Fragment.empty,i=Ur.Fragment.empty,a=r.depth,s=r.depth-t,l=t-1;s<a;a--,l--){o=Ur.Fragment.from(r.node(a).copy(o));var c=n&&n[l];i=Ur.Fragment.from(c?c.type.create(c.attrs,i):r.node(a).copy(i))}return this.step(new x(e,e,new Ur.Slice(o.append(i),t,t,!0)))},i.prototype.join=function(e,t){void 0===t&&(t=1);var n=new x(e-t,e+t,Ur.Slice.empty,!0);return this.step(n)};var w=function(r){function o(e,t,n){r.call(this),this.from=e,this.to=t,this.mark=n}return r&&(o.__proto__=r),((o.prototype=Object.create(r&&r.prototype)).constructor=o).prototype.apply=function(e){var n=this,t=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Ur.Slice(b(t.content,function(e,t){return t.type.allowsMarkType(n.mark.type)?e.mark(n.mark.addToSet(e.marks)):e},o),t.openStart,t.openEnd);return p.fromReplace(e,this.from,this.to,i)},o.prototype.invert=function(){return new C(this.from,this.to,this.mark)},o.prototype.map=function(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new o(t.pos,n.pos,this.mark)},o.prototype.merge=function(e){if(e instanceof o&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new o(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},o.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},o.fromJSON=function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new o(t.from,t.to,e.markFromJSON(t.mark))},o}(u);u.jsonID("addMark",w);var C=function(r){function o(e,t,n){r.call(this),this.from=e,this.to=t,this.mark=n}return r&&(o.__proto__=r),((o.prototype=Object.create(r&&r.prototype)).constructor=o).prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=new Ur.Slice(b(n.content,function(e){return e.mark(t.mark.removeFromSet(e.marks))}),n.openStart,n.openEnd);return p.fromReplace(e,this.from,this.to,r)},o.prototype.invert=function(){return new w(this.from,this.to,this.mark)},o.prototype.map=function(e){var t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new o(t.pos,n.pos,this.mark)},o.prototype.merge=function(e){if(e instanceof o&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new o(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},o.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},o.fromJSON=function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new o(t.from,t.to,e.markFromJSON(t.mark))},o}(u);function k(e,t,n,r){if(void 0===n&&(n=t),void 0===r&&(r=Ur.Slice.empty),t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);if(O(o,i,r))return new x(t,n,r);var a,s,l,c,u=function(e,t){for(var n=new M(e),r=1;t.size&&r<=3;r++)t=n.placeSlice(t.content,t.openStart,t.openEnd,r);for(;n.open.length;)n.closeNode();return n.placed}(o,r),p=(s=function e(t,n,r,o){var i=Ur.Fragment.empty,a=0,s=r[n];if(t.depth>n){var l=e(t,n+1,r,o||s);a=l.openEnd+1,i=Ur.Fragment.from(t.node(n+1).copy(l.content))}s&&(i=i.append(s.content),a=s.openEnd);o&&(i=i.append(t.node(n).contentMatchAt(t.indexAfter(n)).fillBefore(Ur.Fragment.empty,!0)),a=0);return{content:i,openEnd:a}}(a=o,0,u,!1),l=s.content,c=s.openEnd,new Ur.Slice(l,a.depth,c||0)),d=S(o,i,p);if(!d)return null;if(p.size!=d.size&&function(e,t,n){if(!t.parent.isTextblock)return!1;var r,o=n.openEnd?function(e,t){for(var n=1;n<t;n++)e=e.lastChild.content;return e.lastChild}(n.content,n.openEnd):e.node(e.depth-(n.openStart-n.openEnd));if(!o.isTextblock)return!1;for(var i=t.index();i<t.parent.childCount;i++)if(!o.type.allowsMarks(t.parent.child(i).marks))return!1;n.openEnd?r=o.contentMatchAt(o.childCount):(r=o.contentMatchAt(o.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0)));return(r=r.matchFragment(t.parent.content,t.index()))&&r.validEnd}(o,i,p)){for(var f=i.depth,h=i.after(f);1<f&&h==i.end(--f);)++h;var m=S(o,e.resolve(h),p);if(m)return new g(t,h,n,i.end(),m,p.size)}return d.size||t!=n?new x(t,n,d):null}function E(e,t,n,r,o,i,a){var s,l=e.childCount,c=l-(0<a?1:0),u=i<0?t:n.node(o);s=i<0?u.contentMatchAt(c):1==l&&0<a?u.contentMatchAt(i?n.index(o):n.indexAfter(o)):u.contentMatchAt(n.indexAfter(o)).matchFragment(e,0<l&&i?1:0,c);var p=r.node(o);if(0<a&&o<r.depth){var d=p.content.cutByIndex(r.indexAfter(o)).addToStart(e.lastChild),f=s.fillBefore(d,!0);if(f&&f.size&&0<i&&1==l&&(f=null),f){var h=E(e.lastChild.content,e.lastChild,n,r,o+1,1==l?i-1:-1,a-1);if(h){var m=e.lastChild.copy(h);return f.size?e.cutByIndex(0,l-1).append(f).addToEnd(m):e.replaceChild(l-1,m)}}}0<a&&(s=s.matchType((1==l&&0<i?n.node(o+1):e.lastChild).type));var v=r.index(o);if(v==p.childCount&&!p.type.compatibleContent(t.type))return null;for(var g=s.fillBefore(p.content,!0,v),y=v;g&&y<p.content.childCount;y++)u.type.allowsMarks(p.content.child(y).marks)||(g=null);if(!g)return null;if(0<a){var b=function e(t,n,r,o,i){var a,s=t.content,l=s.childCount;a=0<=i?r.node(o).contentMatchAt(r.indexAfter(o)).matchFragment(s,0<i?1:0,l):t.contentMatchAt(l);if(0<n){var c=e(s.lastChild,n-1,r,o+1,1==l?i-1:-1);s=s.replaceChild(l-1,c)}return t.copy(s.append(a.fillBefore(Ur.Fragment.empty,!0)))}(e.lastChild,a-1,n,o+1,1==l?i-1:-1);e=e.replaceChild(l-1,b)}return e=e.append(g),r.depth>o&&(e=e.addToEnd(function e(t,n){var r=t.node(n);var o=r.contentMatchAt(0).fillBefore(r.content,!0,t.index(n));t.depth>n&&(o=o.addToEnd(e(t,n+1)));return r.copy(o)}(r,o+1))),e}function S(e,t,n){var r=E(n.content,e.node(0),e,t,0,n.openStart,n.openEnd);return r?function(e,t,n){for(;0<t&&0<n&&1==e.childCount;)e=e.firstChild.content,t--,n--;return new Ur.Slice(e,t,n)}(r,n.openStart,t.depth):null}function O(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}u.jsonID("removeMark",C),i.prototype.addMark=function(l,c,u){var t=this,p=[],d=[],f=null,h=null;return this.doc.nodesBetween(l,c,function(e,t,n){if(e.isInline){var r=e.marks;if(!u.isInSet(r)&&n.type.allowsMarkType(u.type)){for(var o=Math.max(t,l),i=Math.min(t+e.nodeSize,c),a=u.addToSet(r),s=0;s<r.length;s++)r[s].isInSet(a)||(f&&f.to==o&&f.mark.eq(r[s])?f.to=i:p.push(f=new C(o,i,r[s])));h&&h.to==o?h.to=i:d.push(h=new w(o,i,u))}}}),p.forEach(function(e){return t.step(e)}),d.forEach(function(e){return t.step(e)}),this},i.prototype.removeMark=function(u,p,d){var t=this;void 0===d&&(d=null);var f=[],h=0;return this.doc.nodesBetween(u,p,function(e,t){if(e.isInline){h++;var n=null;if(d instanceof Ur.MarkType){var r=d.isInSet(e.marks);r&&(n=[r])}else d?d.isInSet(e.marks)&&(n=[d]):n=e.marks;if(n&&n.length)for(var o=Math.min(t+e.nodeSize,p),i=0;i<n.length;i++){for(var a=n[i],s=void 0,l=0;l<f.length;l++){var c=f[l];c.step==h-1&&a.eq(f[l].style)&&(s=c)}s?(s.to=o,s.step=h):f.push({style:a,from:Math.max(t,u),to:o,step:h})}}}),f.forEach(function(e){return t.step(new C(e.from,e.to,e.style))}),this},i.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),o=[],i=e+1,a=0;a<r.childCount;a++){var s=r.child(a),l=i+s.nodeSize,c=n.matchType(s.type,s.attrs);if(c){n=c;for(var u=0;u<s.marks.length;u++)t.allowsMarkType(s.marks[u].type)||this.step(new C(i,l,s.marks[u]))}else o.push(new x(i,l,Ur.Slice.empty));i=l}if(!n.validEnd){var p=n.fillBefore(Ur.Fragment.empty,!0);this.replace(i,i,new Ur.Slice(p,0,0))}for(var d=o.length-1;0<=d;d--)this.step(o[d]);return this},i.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=Ur.Slice.empty);var r=k(this.doc,e,t,n);return r&&this.step(r),this},i.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new Ur.Slice(Ur.Fragment.from(n),0,0))},i.prototype.delete=function(e,t){return this.replace(e,t,Ur.Slice.empty)},i.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var M=function(e){this.open=[];for(var t=0;t<=e.depth;t++){var n=e.node(t),r=n.contentMatchAt(e.indexAfter(t));this.open.push({parent:n,match:r,content:Ur.Fragment.empty,wrapper:!1,openEnd:0,depth:t})}this.placed=[]};function A(e,t,n){var r=e.content;if(1<t){var o=A(e.firstChild,t-1,1==e.childCount?n-1:0);r=e.content.replaceChild(0,o)}var i=e.type.contentMatch.fillBefore(r,0==n);return e.copy(i.append(r))}function D(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(D(i.content,t+1,n,r,i)))}return r<t&&(e=o.contentMatchAt(0).fillBefore(e,!0).append(e)),e}function T(e,t){for(var n=[],r=Math.min(e.depth,t.depth);0<=r;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;o==t.start(r)&&n.push(r)}return n}M.prototype.placeSlice=function(e,t,n,r,o){if(0<t){var i=e.firstChild,a=this.placeSlice(i.content,Math.max(0,t-1),n&&1==e.childCount?n-1:0,r,i);a.content!=i.content&&(t=a.content.size?(e=e.replaceChild(0,i.copy(a.content)),a.openStart+1):(1==e.childCount&&(n=0),e=e.cutByIndex(1),0))}var s=this.placeContent(e,t,n,r,o);if(2<r&&s.size&&0==t){for(var l=0;l<s.content.childCount;l++){var c=s.content.child(l);this.placeContent(c.content,0,n&&l==s.content.childCount.length-1?n-1:0,r,c)}s=Ur.Fragment.empty}return s},M.prototype.placeContent=function(e,t,n,r,o){for(var i=0;i<e.childCount;i++){for(var a=e.child(i),s=!1,l=i==e.childCount-1,c=this.open.length-1;0<=c;c--){var u=this.open[c],p=void 0;if(1<r&&(p=u.match.findWrapping(a.type))&&(!o||!p.length||p[p.length-1]!=o.type)){for(;this.open.length-1>c;)this.closeNode();for(var d=0;d<p.length;d++)u.match=u.match.matchType(p[d]),c++,u={parent:p[d].create(),match:p[d].contentMatch,content:Ur.Fragment.empty,wrapper:!0,openEnd:0,depth:c+d},this.open.push(u)}var f=u.match.matchType(a.type);if(!f){var h=u.match.fillBefore(Ur.Fragment.from(a));if(!h){if(o&&u.match.matchType(o.type))break;continue}for(var m=0;m<h.childCount;m++){var v=h.child(m);this.addNode(u,v,0),f=u.match.matchFragment(v)}}for(;this.open.length-1>c;)this.closeNode();a=a.mark(u.parent.type.allowedMarks(a.marks)),t&&(a=A(a,t,l?n:0),t=0),this.addNode(u,a,l?n:0),u.match=f,l&&(n=0),s=!0;break}if(!s)break}return 1<this.open.length&&(0<i&&i==e.childCount||o&&this.open[this.open.length-1].parent.type==o.type)&&this.closeNode(),new Ur.Slice(e.cutByIndex(i),t,n)},M.prototype.addNode=function(e,t,n){var r,o;e.content=(r=e.content,o=e.openEnd,o?r.replaceChild(r.childCount-1,function e(t,n){var r=t.content;if(1<n){var o=e(t.lastChild,n-1);r=t.content.replaceChild(t.childCount-1,o)}var i=t.contentMatchAt(t.childCount).fillBefore(Ur.Fragment.empty,!0);return t.copy(r.append(i))}(r.lastChild,o)):r).addToEnd(t),e.openEnd=n},M.prototype.closeNode=function(){var e=this.open.pop();0==e.content.size||(e.wrapper?this.addNode(this.open[this.open.length-1],e.parent.copy(e.content),e.openEnd+1):this.placed[e.depth]={depth:e.depth,content:e.content,openEnd:e.openEnd})},i.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),o=this.doc.resolve(t);if(O(r,o,n))return this.step(new x(e,t,n));var i=T(r,this.doc.resolve(t));0==i[i.length-1]&&i.pop();var a=-(r.depth+1);i.unshift(a);for(var s=r.depth,l=r.pos-1;0<s;s--,l--){var c=r.node(s).type.spec;if(c.defining||c.isolating)break;-1<i.indexOf(s)?a=s:r.before(s)==l&&i.splice(1,0,-s)}for(var u=i.indexOf(a),p=[],d=n.openStart,f=n.content,h=0;;h++){var m=f.firstChild;if(p.push(m),h==n.openStart)break;f=m.content}0<d&&p[d-1].type.spec.defining&&r.node(u).type!=p[d-1].type?d-=1:2<=d&&p[d-1].isTextblock&&p[d-2].type.spec.defining&&r.node(u).type!=p[d-2].type&&(d-=2);for(var v=n.openStart;0<=v;v--){var g=(v+d+1)%(n.openStart+1),y=p[g];if(y)for(var b=0;b<i.length;b++){var w=i[(b+u)%i.length],C=!0;w<0&&(C=!1,w=-w);var k=r.node(w-1),E=r.index(w-1);if(k.canReplaceWith(E,E,y.type,y.marks))return this.replace(r.before(w),C?o.after(w):t,new Ur.Slice(D(n.content,0,n.openStart,g),g,n.openEnd))}}return this.replace(e,t,n)},i.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=y(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new Ur.Slice(Ur.Fragment.from(n),0,0))},i.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=T(n,r),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(0<a&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var l=1;l<=n.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l))return this.delete(n.before(l),t);return this.delete(e,t)},t.Transform=i,t.TransformError=o,t.Step=u,t.StepResult=p,t.joinPoint=function(e,t,n){void 0===n&&(n=-1);for(var r=e.resolve(t),o=r.depth;;o--){var i=void 0,a=void 0;if(a=o==r.depth?(i=r.nodeBefore,r.nodeAfter):0<n?(i=r.node(o+1),r.node(o).maybeChild(r.index(o)+1)):(i=r.node(o).maybeChild(r.index(o)-1),r.node(o+1)),i&&!i.isTextblock&&v(i,a))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}},t.canJoin=function(e,t){var n=e.resolve(t),r=n.index();return v(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)},t.canSplit=function(e,t,n,r){void 0===n&&(n=1);var o=e.resolve(t),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,l=n-2;i<s;s--,l--){var c=o.node(s),u=o.index(s);if(c.type.spec.isolating)return!1;var p=c.content.cutByIndex(u,c.childCount),d=r&&r[l]||c;if(d!=c&&(p=p.replaceChild(0,d.type.create(d.attrs))),!c.canReplace(u+1,c.childCount)||!d.type.validContent(p))return!1}var f=o.indexAfter(i),h=r&&r[0];return o.node(i).canReplaceWith(f,f,h?h.type:o.node(i+1).type)},t.insertPoint=y,t.dropPoint=function(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;0<=s;s--){var l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(0<l?1:0);if(1==a?r.node(s).canReplace(c,c,o):r.node(s).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==l?r.pos:l<0?r.before(s+1):r.after(s+1)}return null},t.liftTarget=function(e){for(var t,n,r,o=e.parent.content.cutByIndex(e.startIndex,e.endIndex),i=e.depth;;--i){var a=e.$from.node(i),s=e.$from.index(i),l=e.$to.indexAfter(i);if(i<e.depth&&a.canReplace(s,l,o))return i;if(0==i||a.type.spec.isolating||(t=a,r=l,0!=(n=s)&&!t.canReplace(n,t.childCount)||r!=t.childCount&&!t.canReplace(0,r)))break}},t.findWrapping=function(e,t,n,r){void 0===r&&(r=e);var o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var a=i.length?i[0]:t;return n.canReplaceWith(r,o,a)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),a=t.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:t).contentMatch,l=r;s&&l<o;l++)s=s.matchType(n.child(l).type);return s&&s.validEnd?a:null}(r,t);return i?o.map(m).concat({type:t,attrs:n}).concat(i.map(m)):null},t.StepMap=n,t.MapResult=h,t.Mapping=r,t.AddMarkStep=w,t.RemoveMarkStep=C,t.ReplaceStep=x,t.ReplaceAroundStep=g,t.replaceStep=k}));v(qr);qr.Transform,qr.TransformError,qr.Step,qr.StepResult,qr.joinPoint,qr.canJoin,qr.canSplit,qr.insertPoint,qr.dropPoint,qr.liftTarget,qr.findWrapping,qr.StepMap,qr.MapResult,qr.Mapping,qr.AddMarkStep,qr.RemoveMarkStep,qr.ReplaceStep,qr.ReplaceAroundStep,qr.replaceStep;var Jr=g(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.create(null),l=function(e,t,n){this.ranges=n||[new o(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},n={anchor:{},head:{},from:{},to:{},$from:{},$to:{},empty:{}};n.anchor.get=function(){return this.$anchor.pos},n.head.get=function(){return this.$head.pos},n.from.get=function(){return this.$from.pos},n.to.get=function(){return this.$to.pos},n.$from.get=function(){return this.ranges[0].$from},n.$to.get=function(){return this.ranges[0].$to},n.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},l.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},l.prototype.replace=function(e,t){void 0===t&&(t=Ur.Slice.empty);for(var n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)n=(r=n).lastChild;for(var i=e.steps.length,a=this.ranges,s=0;s<a.length;s++){var l=a[s],c=l.$from,u=l.$to,p=e.mapping.slice(i);e.replaceRange(p.map(c.pos),p.map(u.pos),s?Ur.Slice.empty:t),0==s&&f(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}},l.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,l=e.mapping.slice(n),c=l.map(a.pos),u=l.map(s.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),f(e,n,t.isInline?-1:1))}},l.findFrom=function(e,t,n){var r=e.parent.inlineContent?new c(e):d(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;0<=o;o--){var i=t<0?d(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):d(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}},l.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new a(e.node(0))},l.atStart=function(e){return d(e,e,0,0,1)||new a(e)},l.atEnd=function(e){return d(e,e,e.content.size,e.childCount,-1)||new a(e)},l.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=r[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},l.jsonID=function(e,t){if(e in r)throw new RangeError("Duplicate use of selection JSON ID "+e);return(r[e]=t).prototype.jsonID=e,t},l.prototype.getBookmark=function(){return c.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(l.prototype,n),l.prototype.visible=!0;var o=function(e,t){this.$from=e,this.$to=t},c=function(i){function a(e,t){void 0===t&&(t=e),i.call(this,e,t)}i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a;var e={$cursor:{}};return e.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},a.prototype.map=function(e,t){var n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return i.near(n);var r=e.resolve(t.map(this.anchor));return new a(r.parent.inlineContent?r:n,n)},a.prototype.replace=function(e,t){if(void 0===t&&(t=Ur.Slice.empty),i.prototype.replace.call(this,e,t),t==Ur.Slice.empty){var n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}},a.prototype.eq=function(e){return e instanceof a&&e.anchor==this.anchor&&e.head==this.head},a.prototype.getBookmark=function(){return new s(this.anchor,this.head)},a.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},a.fromJSON=function(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new a(e.resolve(t.anchor),e.resolve(t.head))},a.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},a.between=function(e,t,n){var r=e.pos-t.pos;if(n&&!r||(n=0<=r?1:-1),!t.parent.inlineContent){var o=i.findFrom(t,n,!0)||i.findFrom(t,-n,!0);if(!o)return i.near(t,n);t=o.$head}return e.parent.inlineContent||(0==r?e=t:(e=(i.findFrom(e,-n,!0)||i.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0&&(e=t)),new a(e,t)},Object.defineProperties(a.prototype,e),a}(l);l.jsonID("text",c);var s=function(e,t){this.anchor=e,this.head=t};s.prototype.map=function(e){return new s(e.map(this.anchor),e.map(this.head))},s.prototype.resolve=function(e){return c.between(e.resolve(this.anchor),e.resolve(this.head))};var u=function(a){function s(e){var t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);a.call(this,e,n),this.node=t}return a&&(s.__proto__=a),((s.prototype=Object.create(a&&a.prototype)).constructor=s).prototype.map=function(e,t){var n=t.mapResult(this.anchor),r=n.deleted,o=n.pos,i=e.resolve(o);return r?a.near(i):new s(i)},s.prototype.content=function(){return new Ur.Slice(Ur.Fragment.from(this.node),0,0)},s.prototype.eq=function(e){return e instanceof s&&e.anchor==this.anchor},s.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},s.prototype.getBookmark=function(){return new i(this.anchor)},s.fromJSON=function(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new s(e.resolve(t.anchor))},s.create=function(e,t){return new this(e.resolve(t))},s.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},s}(l);u.prototype.visible=!1,l.jsonID("node",u);var i=function(e){this.anchor=e};i.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new s(r,r):new i(r)},i.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&u.isSelectable(n)?new u(t):l.near(t)};var a=function(t){function n(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.toJSON=function(){return{type:"all"}},n.fromJSON=function(e){return new n(e)},n.prototype.map=function(e){return new n(e)},n.prototype.eq=function(e){return e instanceof n},n.prototype.getBookmark=function(){return p},n}(l);l.jsonID("all",a);var p={map:function(){return this},resolve:function(e){return new a(e)}};function d(e,t,n,r,o,i){if(t.inlineContent)return c.create(e,n);for(var a=r-(0<o?0:1);0<o?a<t.childCount:0<=a;a+=o){var s=t.child(a);if(s.isAtom){if(!i&&u.isSelectable(s))return u.create(e,n-(o<0?s.nodeSize:0))}else{var l=d(e,s,n+o,o<0?s.childCount:0,o,i);if(l)return l}n+=s.nodeSize*o}}function f(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o,i=e.steps[r];if(i instanceof qr.ReplaceStep||i instanceof qr.ReplaceAroundStep)e.mapping.maps[r].forEach(function(e,t,n,r){null==o&&(o=r)}),e.setSelection(l.near(e.doc.resolve(o),n))}}var h=function(n){function e(e){n.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={selection:{},selectionSet:{},storedMarksSet:{},isGeneric:{},scrolledIntoView:{}};return t.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(e){return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},t.selectionSet.get=function(){return 0<(1&this.updated)},e.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},e.prototype.ensureMarks=function(e){return Ur.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},e.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},t.storedMarksSet.get=function(){return 0<(2&this.updated)},e.prototype.addStep=function(e,t){n.prototype.addStep.call(this,e,t),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(e){return this.time=e,this},e.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},e.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Ur.Mark.none))),n.replaceWith(this,e),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o))},e.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},e.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},t.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},t.scrolledIntoView.get=function(){return 0<(4&this.updated)},Object.defineProperties(e.prototype,t),e}(qr.Transform);function m(e,t){return t&&e?e.bind(t):e}var v=function(e,t,n){this.name=e,this.init=m(t.init,n),this.apply=m(t.apply,n)},g=[new v("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new v("selection",{init:function(e,t){return e.selection||l.atStart(t.doc)},apply:function(e){return e.selection}}),new v("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new v("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],y=function(e,t){var n=this;this.schema=e,this.fields=g.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach(function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),(n.pluginsByKey[e.key]=e).spec.state&&n.fields.push(new v(e.key,e.spec.state,e))})},b=function(e){this.config=e},w={schema:{},plugins:{},tr:{}};w.schema.get=function(){return this.config.schema},w.plugins.get=function(){return this.config.plugins},b.prototype.apply=function(e){return this.applyTransaction(e).state},b.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},b.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,l=r?r[i].state:this,c=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}},b.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new b(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<C.length;i++)C[i](this,e,t);return t},w.tr.get=function(){return new h(this)},b.create=function(e){for(var t=new y(e.schema||e.doc.type.schema,e.plugins),n=new b(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},b.prototype.reconfigure=function(e){for(var t=new y(e.schema||this.schema,e.plugins),n=t.fields,r=new b(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r},b.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(function(e){return e.toJSON()})),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t},b.fromJSON=function(o,i,a){if(!i)throw new RangeError("Invalid input for EditorState.fromJSON");if(!o.schema)throw new RangeError("Required config field 'schema' missing");var e=new y(o.schema,o.plugins),s=new b(e);return e.fields.forEach(function(e){if("doc"==e.name)s.doc=Ur.Node.fromJSON(o.schema,i.doc);else if("selection"==e.name)s.selection=l.fromJSON(s.doc,i.selection);else if("storedMarks"==e.name)i.storedMarks&&(s.storedMarks=i.storedMarks.map(o.schema.markFromJSON));else{if(a)for(var t in a){var n=a[t],r=n.spec.state;if(n.key==e.name&&r&&r.fromJSON&&Object.prototype.hasOwnProperty.call(i,t))return void(s[e.name]=r.fromJSON.call(n,o,i[t],s))}s[e.name]=e.init(o,s)}}),s},b.addApplyListener=function(e){C.push(e)},b.removeApplyListener=function(e){var t=C.indexOf(e);-1<t&&C.splice(t,1)},Object.defineProperties(b.prototype,w);var C=[];var k=function(e){this.props={},e.props&&function e(t,n,r){for(var o in t){var i=t[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=e(i,n,{})),r[o]=i}return r}(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:x("plugin")};k.prototype.getState=function(e){return e[this.key]};var E=Object.create(null);function x(e){return e in E?e+"$"+ ++E[e]:(E[e]=0,e+"$")}var S=function(e){void 0===e&&(e="key"),this.key=x(e)};S.prototype.get=function(e){return e.config.pluginsByKey[this.key]},S.prototype.getState=function(e){return e[this.key]},t.Selection=l,t.SelectionRange=o,t.TextSelection=c,t.NodeSelection=u,t.AllSelection=a,t.Transaction=h,t.EditorState=b,t.Plugin=k,t.PluginKey=S});v(Jr);Jr.Selection,Jr.SelectionRange;var Gr=Jr.TextSelection,Xr=(Jr.NodeSelection,Jr.AllSelection,Jr.Transaction,Jr.EditorState),Yr=Jr.Plugin,Zr=Jr.PluginKey,Qr=g(function(e,t){function n(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function r(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):0<r.parentOffset))return!1;var o=u(r);if(!o){var i=r.blockRange(),a=i&&qr.liftTarget(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}var s=o.nodeBefore;if(!s.type.spec.isolating&&v(e,o,t))return!0;if(0!=r.parent.content.size||!c(s,"end")&&!Jr.NodeSelection.isSelectable(s))return!(!s.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0);if(t){var l=e.tr.deleteRange(r.before(),r.after());l.setSelection(c(s,"end")?Jr.Selection.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):Jr.NodeSelection.create(l.doc,o.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}function c(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function o(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):0<r.parentOffset))return!1;var o=u(r),i=o&&o.nodeBefore;return!(!i||!Jr.NodeSelection.isSelectable(i))&&(t&&t(e.tr.setSelection(Jr.NodeSelection.create(e.doc,o.pos-i.nodeSize)).scrollIntoView()),!0)}function u(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;0<=t;t--){if(0<e.index(t))return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function i(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var o=s(r);if(!o)return!1;var i=o.nodeAfter;if(v(e,o,t))return!0;if(0!=r.parent.content.size||!c(i,"start")&&!Jr.NodeSelection.isSelectable(i))return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0);if(t){var a=e.tr.deleteRange(r.before(),r.after());a.setSelection(c(i,"start")?Jr.Selection.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):Jr.NodeSelection.create(a.doc,a.mapping.map(o.pos))),t(a.scrollIntoView())}return!0}function a(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var o=s(r),i=o&&o.nodeAfter;return!(!i||!Jr.NodeSelection.isSelectable(i))&&(t&&t(e.tr.setSelection(Jr.NodeSelection.create(e.doc,o.pos)).scrollIntoView()),!0)}function s(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;0<=t;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function l(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function p(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=i.contentMatchAt(a).defaultType;if(!i.canReplaceWith(a,a,s))return!1;if(t){var l=r.after(),c=e.tr.replaceWith(l,l,s.createAndFill());c.setSelection(Jr.Selection.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0}function d(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!i||!i.isTextblock)return!1;if(t){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(a,i.createAndFill());s.setSelection(Jr.TextSelection.create(s.doc,a+1)),t(s.scrollIntoView())}return!0}function f(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(1<n.depth&&n.after()!=n.end(-1)){var r=n.before();if(qr.canSplit(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&qr.liftTarget(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)}function h(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof Jr.NodeSelection&&e.selection.node.isBlock)return!(!r.parentOffset||!qr.canSplit(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof Jr.TextSelection&&a.deleteSelection();var s=0==r.depth?null:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,l=i&&s?[{type:s}]:null,c=qr.canSplit(a.doc,r.pos,1,l);l||c||!qr.canSplit(a.doc,a.mapping.map(r.pos),1,s&&[{type:s}])||(l=[{type:s}],c=!0),c&&(a.split(a.mapping.map(r.pos),1,l),i||r.parentOffset||r.parent.type==s||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),Ur.Fragment.from(s.create(),r.parent))||a.setNodeMarkup(a.mapping.map(r.before()),s)),t(a.scrollIntoView())}return!0}function m(e,t){return t&&t(e.tr.setSelection(new Jr.AllSelection(e.doc))),!0}function v(e,t,n){var r,o,i,a,s,l,c,u,p=t.nodeBefore,d=t.nodeAfter;if(p.type.spec.isolating||d.type.spec.isolating)return!1;if(i=e,s=n,l=(a=t).nodeBefore,c=a.nodeAfter,u=a.index(),l&&c&&l.type.compatibleContent(c.type)&&(!l.content.size&&a.parent.canReplace(u-1,u)?(s&&s(i.tr.delete(a.pos-l.nodeSize,a.pos).scrollIntoView()),1):a.parent.canReplace(u,u+1)&&(c.isTextblock||qr.canJoin(i.doc,a.pos))&&(s&&s(i.tr.clearIncompatible(a.pos,l.type,l.contentMatchAt(l.childCount)).join(a.pos).scrollIntoView()),1)))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(r=(o=p.contentMatchAt(p.childCount)).findWrapping(d.type))&&o.matchType(r[0]||d.type).validEnd){if(n){for(var f=t.pos+d.nodeSize,h=Ur.Fragment.empty,m=r.length-1;0<=m;m--)h=Ur.Fragment.from(r[m].create(null,h));h=Ur.Fragment.from(p.copy(h));var v=e.tr.step(new qr.ReplaceAroundStep(t.pos-1,f,t.pos,f,new Ur.Slice(h,1,0),r.length,!0)),g=f+2*r.length;qr.canJoin(v.doc,g)&&v.join(g),n(v.scrollIntoView())}return!0}var y=Jr.Selection.findFrom(t,1),b=y&&y.$from.blockRange(y.$to),w=b&&qr.liftTarget(b);return null!=w&&w>=t.depth&&(n&&n(e.tr.lift(b,w).scrollIntoView()),!0)}function g(){for(var o=[],e=arguments.length;e--;)o[e]=arguments[e];return function(e,t,n){for(var r=0;r<o.length;r++)if(o[r](e,t,n))return!0;return!1}}Object.defineProperty(t,"__esModule",{value:!0});var y=g(n,r,o),b=g(n,i,a),w={Enter:g(l,d,f,h),"Mod-Enter":p,Backspace:y,"Mod-Backspace":y,Delete:b,"Mod-Delete":b,"Mod-a":m},C={"Ctrl-h":w.Backspace,"Alt-Backspace":w["Mod-Backspace"],"Ctrl-d":w.Delete,"Ctrl-Alt-Backspace":w["Mod-Delete"],"Alt-Delete":w["Mod-Delete"],"Alt-d":w["Mod-Delete"]};for(var k in w)C[k]=w[k];var E=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?C:w;t.deleteSelection=n,t.joinBackward=r,t.selectNodeBackward=o,t.joinForward=i,t.selectNodeForward=a,t.joinUp=function(e,t){var n,r=e.selection,o=r instanceof Jr.NodeSelection;if(o){if(r.node.isTextblock||!qr.canJoin(e.doc,r.from))return!1;n=r.from}else if(null==(n=qr.joinPoint(e.doc,r.from,-1)))return!1;if(t){var i=e.tr.join(n);o&&i.setSelection(Jr.NodeSelection.create(i.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0},t.joinDown=function(e,t){var n,r=e.selection;if(r instanceof Jr.NodeSelection){if(r.node.isTextblock||!qr.canJoin(e.doc,r.to))return!1;n=r.to}else if(null==(n=qr.joinPoint(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},t.lift=function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=i&&qr.liftTarget(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)},t.newlineInCode=l,t.exitCode=p,t.createParagraphNear=d,t.liftEmptyBlock=f,t.splitBlock=h,t.splitBlockKeepMarks=function(n,r){return h(n,r&&function(e){var t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();t&&e.ensureMarks(t),r(e)})},t.selectParentNode=function(e,t){var n,r=e.selection,o=r.$from,i=r.to,a=o.sharedDepth(i);return 0!=a&&(n=o.before(a),t&&t(e.tr.setSelection(Jr.NodeSelection.create(e.doc,n))),!0)},t.selectAll=m,t.wrapIn=function(s,l){return function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=i&&qr.findWrapping(i,s,l);return!!a&&(t&&t(e.tr.wrap(i,a).scrollIntoView()),!0)}},t.setBlockType=function(a,s){return function(o,e){var t=o.selection,n=t.from,r=t.to,i=!1;return o.doc.nodesBetween(n,r,function(e,t){if(i)return!1;if(e.isTextblock&&!e.hasMarkup(a,s))if(e.type==a)i=!0;else{var n=o.doc.resolve(t),r=n.index();i=n.parent.canReplaceWith(r,r+1,a)}}),!!i&&(e&&e(o.tr.setBlockType(n,r,a,s).scrollIntoView()),!0)}},t.toggleMark=function(v,g){return function(e,t){var n=e.selection,r=n.empty,o=n.$cursor,i=n.ranges;if(r&&!o||!function(i,a,s){for(var e=function(e){var t=a[e],n=t.$from,r=t.$to,o=0==n.depth&&i.type.allowsMarkType(s);if(i.nodesBetween(n.pos,r.pos,function(e){if(o)return!1;o=e.inlineContent&&e.type.allowsMarkType(s)}),o)return{v:!0}},t=0;t<a.length;t++){var n=e(t);if(n)return n.v}return!1}(e.doc,i,v))return!1;if(t)if(o)v.isInSet(e.storedMarks||o.marks())?t(e.tr.removeStoredMark(v)):t(e.tr.addStoredMark(v.create(g)));else{for(var a=!1,s=e.tr,l=0;!a&&l<i.length;l++){var c=i[l],u=c.$from,p=c.$to;a=e.doc.rangeHasMark(u.pos,p.pos,v)}for(var d=0;d<i.length;d++){var f=i[d],h=f.$from,m=f.$to;a?s.removeMark(h.pos,m.pos,v):s.addMark(h.pos,m.pos,v.create(g))}t(s.scrollIntoView())}return!0}},t.autoJoin=function(n,r){if(Array.isArray(r)){var t=r;r=function(e){return-1<t.indexOf(e.type.name)}}return function(e,t){return n(e,t&&(g=t,y=r,function(e){if(!e.isGeneric)return g(e);for(var o=[],t=0;t<e.mapping.maps.length;t++){for(var n=e.mapping.maps[t],r=0;r<o.length;r++)o[r]=n.map(o[r]);n.forEach(function(e,t,n,r){return o.push(n,r)})}for(var i=[],a=0;a<o.length;a+=2)for(var s=o[a],l=o[a+1],c=e.doc.resolve(s),u=c.sharedDepth(l),p=c.node(u),d=c.indexAfter(u),f=c.after(u+1);f<=l;++d){var h=p.maybeChild(d);if(!h)break;if(d&&-1==i.indexOf(f)){var m=p.child(d-1);m.type==h.type&&y(m,h)&&i.push(f)}f+=h.nodeSize}i.sort(function(e,t){return e-t});for(var v=i.length-1;0<=v;v--)qr.canJoin(e.doc,i[v])&&e.join(i[v]);g(e)}));var g,y}},t.chainCommands=g,t.pcBaseKeymap=w,t.macBaseKeymap=C,t.baseKeymap=E});v(Qr);Qr.deleteSelection,Qr.joinBackward,Qr.selectNodeBackward,Qr.joinForward,Qr.selectNodeForward,Qr.joinUp,Qr.joinDown,Qr.lift,Qr.newlineInCode,Qr.exitCode,Qr.createParagraphNear,Qr.liftEmptyBlock,Qr.splitBlock,Qr.splitBlockKeepMarks,Qr.selectParentNode,Qr.selectAll,Qr.wrapIn;for(var eo=Qr.setBlockType,to=Qr.toggleMark,no=(Qr.autoJoin,Qr.chainCommands,Qr.pcBaseKeymap,Qr.macBaseKeymap,Qr.baseKeymap),ro={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},oo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},io="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),ao="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),so="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),lo="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),co=io&&(lo||+io[1]<57)||so&&lo,uo=0;uo<10;uo++)ro[48+uo]=ro[96+uo]=String(uo);for(uo=1;uo<=24;uo++)ro[uo+111]="F"+uo;for(uo=65;uo<=90;uo++)ro[uo]=String.fromCharCode(uo+32),oo[uo]=String.fromCharCode(uo);for(var po in ro)oo.hasOwnProperty(po)||(oo[po]=ro[po]);function fo(e){var t=!(co&&(e.ctrlKey||e.altKey||e.metaKey)||ao&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?oo:ro)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}var ho=fo;fo.base=ro,fo.shift=oo;var mo=g(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,l=(n=ho)&&"object"==typeof n&&"default"in n?n.default:n,c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function r(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var s=0;s<i.length-1;s++){var l=i[s];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))r=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);c?o=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function u(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function o(e){var s=function(e){var t=Object.create(null);for(var n in e)t[r(n)]=e[n];return t}(e);return function(e,t){var n,r=l(t),o=1==r.length&&" "!=r,i=s[u(r,t,!o)];if(i&&i(e.state,e.dispatch,e))return!0;if(o&&(t.shiftKey||t.altKey||t.metaKey)&&(n=l.base[t.keyCode])&&n!=r){var a=s[u(n,t,!0)];if(a&&a(e.state,e.dispatch,e))return!0}return!1}}t.keymap=function(e){return new Jr.Plugin({props:{handleKeyDown:o(e)}})},t.keydownHandler=o});v(mo);var vo=mo.keymap,go=(mo.keydownHandler,function(e,t){var n=l({},e);return Object.keys(t).forEach(function(e){n[e]?n[e].push(t[e]):n[e]=[t[e]]}),n}),yo=function(e){var i,t,n={};return e.forEach(function(e){e&&e.keymaps&&(n=go(n,e.keymaps))}),n=go(n,no),i=n,t={},Object.keys(i).forEach(function(o){t[o]=function(e,t){for(var n=!1,r=0;r<i[o].length;r++)if(i[o][r](e,t)){n=!0;break}return n}}),new vo(n=t)},bo=function(r,o){return function(e,t){var n=e.schema.nodes[r];return eo(n,o)(e,t)}},wo={"mod-alt-0":function(e,t){return bo("paragraph")(e,t)},"mod-alt-1":function(e,t){return bo("heading",{level:1})(e,t)},"mod-alt-2":function(e,t){return bo("heading",{level:2})(e,t)},"mod-alt-3":function(e,t){return bo("heading",{level:3})(e,t)},"mod-alt-4":function(e,t){return bo("heading",{level:4})(e,t)},"mod-alt-5":function(e,t){return bo("heading",{level:5})(e,t)},"mod-alt-6":function(e,t){return bo("heading",{level:6})(e,t)}},Co={p:{key:"mod-alt-0",label:"Paragraph"},h1:{key:"mod-alt-1",label:"Heading1"},h2:{key:"mod-alt-2",label:"Heading2"},h3:{key:"mod-alt-3",label:"Heading3"},h4:{key:"mod-alt-4",label:"Heading4"},h5:{key:"mod-alt-5",label:"Heading5"},h6:{key:"mod-alt-6",label:"Heading6"}},ko=new Zr("block"),Eo=function(i){var a,s=!1,e=i.doc,t=i.selection,n=t.$from,r=t.$to,l=(n.depth<r.depth?n.depth:r.depth)-1;return e.nodesBetween(n.pos,r.pos,function(e,t){var n=i.doc.resolve(t).depth;if(e.isBlock&&!(n<l)){var r=e.type.name,o=e.attrs;a?(r!==a.type||"heading"===a.type&&o.level!==a.attrs.level)&&(s=!0):a={type:r,attrs:o}}}),s?void 0:a},xo=new Yr({key:ko,state:{init:function(e,t){return{selectedBlock:Eo(t)}},apply:function(e,t,n,r){return e.docChanged||n.selection!==r.selection?{selectedBlock:Eo(r)}:t}}}),So=function(){var e=navigator.userAgent,t=[{s:"Windows",r:/Win16/},{s:"Windows",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows",r:/(Windows 98|Win98)/},{s:"Windows",r:/Windows CE/},{s:"Windows",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows",r:/Windows NT 5.2/},{s:"Windows",r:/Windows NT 6.0/},{s:"Windows",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/}];for(var n in t){var r=t[n];if(r.r.test(e))return r.s}},Oo=function(e){var t="⌘";"Windows"===So()&&(t="^");var n="";return e.label&&(n="".concat(e.label," ")),n=(n=(n=(n+=e.key).replace("mod",t)).replace("shift","⇧")).replace("alt","⌥")},Mo=[{value:{blockType:"paragraph",tag:"p",keymap:Oo({key:Co.p.key})},label:"Normal",name:"p"},{value:{blockType:"heading-1",tag:"h1",keymap:Oo({key:Co.h1.key})},label:"Heading 1",name:"h1"},{value:{blockType:"heading-2",tag:"h2",keymap:Oo({key:Co.h2.key})},label:"Heading 2",name:"h2"},{value:{blockType:"heading-3",tag:"h3",keymap:Oo({key:Co.h3.key})},label:"Heading 3",name:"h3"},{value:{blockType:"heading-4",tag:"h4",keymap:Oo({key:Co.h4.key})},label:"Heading 4",name:"h4"},{value:{blockType:"heading-5",tag:"h5",keymap:Oo({key:Co.h5.key})},label:"Heading 5",name:"h5"},{value:{blockType:"heading-6",tag:"h6",keymap:Oo({key:Co.h6.key})},label:"Heading 6",name:"h6"}],Ao=function(e){function i(){var e,t;a(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=f(this,(e=d(i)).call.apply(e,[this].concat(r)))).handleChange=function(e){t.props.onChange(e.value.blockType)},t}return c(i,w.PureComponent),s(i,[{key:"render",value:function(){var e,t=this.props,n=t.options,r=t.selectedBlockType;return e=r?n.find(function(e){return e.value.blockType===r}):{value:void 0,label:"Other"},I.createElement(Pr,{onChange:this.handleChange,options:n,selectedOption:e})}}]),i}(),Do=function(e){function i(){var e,t;a(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=f(this,(e=d(i)).call.apply(e,[this].concat(r)))).handleChange=function(e){t.props.onChange(e.currentTarget.name)},t}return c(i,w.PureComponent),s(i,[{key:"render",value:function(){var r=this,e=this.props,o=e.options,i=e.selectedBlockType;return I.createElement(I.Fragment,null,o.map(function(e,t){var n=$e[e.name.toUpperCase()];return I.createElement(w.Fragment,{key:"block-btn-".concat(e.name)},I.createElement(Le,{name:e.value.blockType,onClick:r.handleChange,selected:e.name===i,title:Oo(Co[e.name])},I.createElement(n,null)),t<o.length-1&&I.createElement(Fr,{type:"toolbar"}))}))}}]),i}(),To={name:"block",keymaps:wo,KeymapInfo:Co,toolbarComponent:function(e){function o(){var e,s;a(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(s=f(this,(e=d(o)).call.apply(e,[this].concat(n)))).changeBlockType=function(e){var t,n;n="paragraph"===e?e:(t={level:e.split("-")[1]},"heading");var r=s.props.app_params.view,o=(r=void 0===r?{}:r).state,i=r.dispatch,a=o.schema.nodes[n];eo(a,t)(o,i)},s.getSelectedBlock=function(){var e=s.props.app_params.view,t=(e=void 0===e?{}:e).state;if(t){var n=ko.getState(t),r=n&&n.selectedBlock;if(r){var o=r.type,i=r.attrs;return i&&i.level?"".concat(o,"-").concat(i.level):o}}},s}return c(o,w.PureComponent),s(o,[{key:"render",value:function(){var e=this.props.config,t=(e=void 0===e?{}:e).grouped,n=e.options,r=Mo;return n&&(r=Mo.filter(function(e){return 0<=n.indexOf(e.name)})),t?I.createElement(Ao,{onChange:this.changeBlockType,selectedBlockType:this.getSelectedBlock(),options:r}):I.createElement(Do,{onChange:this.changeBlockType,selectedBlockType:this.getSelectedBlock(),options:r})}}]),o}(),plugin:xo,schema:{nodes:["heading"]}},No=g(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var S={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var n=/Edge\/(\d+)/.exec(navigator.userAgent),r=/MSIE \d/.test(navigator.userAgent),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);S.mac=/Mac/.test(navigator.platform);var i=S.ie=!!(r||o||n);S.ie_version=r?document.documentMode||6:o?+o[1]:n?+n[1]:null,S.gecko=!i&&/gecko\/(\d+)/i.test(navigator.userAgent),S.gecko_version=S.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var a=!i&&/Chrome\/(\d+)/.exec(navigator.userAgent);S.chrome=!!a,S.chrome_version=a&&+a[1],S.ios=!i&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),S.android=/Android \d/.test(navigator.userAgent),S.webkit=!i&&"WebkitAppearance"in document.documentElement.style,S.safari=/Apple Computer/.test(navigator.vendor),S.webkit_version=S.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var h=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},f=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},m=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},v=function(e,t,n,r){return n&&(l(e,t,n,r,-1)||l(e,t,n,r,1))},s=/^(img|br|input|textarea|hr)$/i;function l(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:c(e))||3==e.nodeType&&"\ufeff"==e.nodeValue){var i=e.parentNode;if(1!=i.nodeType||(void 0,(a=e.pmViewDesc)&&a.node&&a.node.isBlock)||s.test(e.nodeName)||"false"==e.contentEditable)return!1;t=h(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(o<0?-1:0)],t=o<0?c(e):0}}var a}function c(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}var O=function(e){var t=e.isCollapsed;return t&&S.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function g(e,t){return"number"==typeof e?e:e[t]}function p(e,t,n){for(var r,o=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument,s=a.defaultView,l=n||e.dom;l;l=f(l))if(1==l.nodeType){var c=l==a.body||1!=l.nodeType,u=c?{left:0,right:(r=s).innerWidth,top:0,bottom:r.innerHeight}:l.getBoundingClientRect(),p=0,d=0;if(t.top<u.top+g(o,"top")?d=-(u.top-t.top+g(i,"top")):t.bottom>u.bottom-g(o,"bottom")&&(d=t.bottom-u.bottom+g(i,"bottom")),t.left<u.left+g(o,"left")?p=-(u.left-t.left+g(i,"left")):t.right>u.right-g(o,"right")&&(p=t.right-u.right+g(i,"right")),(p||d)&&(c?s.scrollBy(p,d):(d&&(l.scrollTop+=d),p&&(l.scrollLeft+=p))),c)break}}function y(e,t){for(var n,r,o=2e8,i=0,a=t.top,s=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var u=void 0;if(1==l.nodeType)u=l.getClientRects();else{if(3!=l.nodeType)continue;u=m(l).getClientRects()}for(var p=0;p<u.length;p++){var d=u[p];if(d.top<=a&&d.bottom>=s){a=Math.max(d.bottom,a),s=Math.min(d.top,s);var f=d.left>t.left?d.left-t.left:d.right<t.left?t.left-d.right:0;if(f<o){n=l,r=(o=f)&&3==n.nodeType?{left:d.right<t.left?d.right:d.left,top:t.top}:t,1==l.nodeType&&f&&(i=c+(t.left>=(d.left+d.right)/2?1:0));continue}}!n&&(t.left>=d.right&&t.top>=d.top||t.left>=d.left&&t.top>=d.bottom)&&(i=c+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=b(r,1);if(i.top!=i.bottom&&(i.left-1<=t.left&&i.right+1>=t.left&&i.top-1<=t.top&&i.bottom+1>=t.top))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:y(n,r)}function u(e,t){var n,r,o=e.root;if(o.caretPositionFromPoint){var i,a=o.caretPositionFromPoint(t.left,t.top);if(a)n=(i=a).offsetNode,r=i.offset}if(!n&&o.caretRangeFromPoint){var s,l=o.caretRangeFromPoint(t.left,t.top);if(l)n=(s=l).startContainer,r=s.startOffset}var c,u,p,d,f=o.elementFromPoint(t.left,t.top+1);if(!f)return null;if(p=t,f=(d=(u=f).parentNode)&&/^li$/i.test(d.nodeName)&&p.left<u.getBoundingClientRect().left?d:u,n&&(n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(c=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var a=e.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)o=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;o=a.posAfter}}i=a.dom.parentNode}return-1<o?o:e.docView.posFromDOM(t,n)}(e,n,r,t))),null==c&&null==(c=function(e,t,n){if(!e.dom.contains(1!=t.nodeType?t.parentNode:t))return null;var r=y(t,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(o,i,a)}(e,f,t)))return null;var h=e.docView.nearestDesc(f,!0);return{pos:c,inside:h?h.posAtStart-h.border:-1}}function b(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function d(e,t){var n,r,o=e.docView.domFromPos(t),i=o.node,a=o.offset;if(3==i.nodeType)a<i.nodeValue.length&&(r=b(m(i,a,a+1),-1),n="left"),r&&r.left!=r.right||!a||(r=b(m(i,a-1,a),1),n="right");else if(i.firstChild){if(a<i.childNodes.length){var s=i.childNodes[a];r=b(3==s.nodeType?m(s):s,-1),n="left"}if((!r||r.top==r.bottom)&&a){var l=i.childNodes[a-1];r=b(3==l.nodeType?m(l):l,1),n="right"}}else r=i.getBoundingClientRect(),n="left";var c=r[n];return{top:r.top,bottom:r.bottom,left:c,right:c}}function w(e,t,n){var r=e.state,o=e.root.activeElement;r==t&&e.inDOMChange||e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o.focus()}}var C=/[\u0590-\u08ac]/;var k=null,E=null,x=!1;function M(e,t,n){return k==t&&E==n?x:(k=t,x="up"==(E=n)||"down"==n?(s=e,l=n,o=(r=t).selection,!!(c="up"==l?o.$anchor.min(o.$head):o.$anchor.max(o.$head)).depth&&w(s,r,function(){for(var e=s.docView.domFromPos(c.pos).node;;){var t=s.docView.nearestDesc(e,!0);if(!t||t.node.isBlock)break;e=t.dom.parentNode}for(var n=d(s,c.pos),r=e.firstChild;r;r=r.nextSibling){var o=void 0;if(1==r.nodeType)o=r.getClientRects();else{if(3!=r.nodeType)continue;o=m(r,0,r.nodeValue.length).getClientRects()}for(var i=0;i<o.length;i++){var a=o[i];if(a.bottom>a.top&&("up"==l?a.bottom<n.top+1:a.top>n.bottom-1))return!1}}return!0})):function(o,e,i){var a=e.selection.$head;if(!a.parent.isTextblock||!a.depth)return!1;var t=a.parentOffset,n=!t,r=t==a.parent.content.size,s=getSelection();return C.test(a.parent.textContent)&&s.modify?w(o,e,function(){var e=s.getRangeAt(0),t=s.focusNode,n=s.focusOffset;s.modify("move",i,"character");var r=!o.docView.domAfterPos(a.before()).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||t==s.focusNode&&n==s.focusOffset;return s.removeAllRanges(),s.addRange(e),r}):"left"==i||"backward"==i?n:r}(e,t,n));var s,r,l,o,c}var A=function(e,t,n,r){this.parent=e,this.children=t,((this.dom=n).pmViewDesc=this).contentDOM=r,this.dirty=0},D={beforePosition:{},size:{},border:{},posBefore:{},posAtStart:{},posAfter:{},posAtEnd:{},contentLost:{}};A.prototype.matchesWidget=function(){return!1},A.prototype.matchesMark=function(){return!1},A.prototype.matchesNode=function(){return!1},A.prototype.matchesHack=function(){return!1},D.beforePosition.get=function(){return!1},A.prototype.parseRule=function(){return null},A.prototype.stopEvent=function(){return!1},D.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},D.border.get=function(){return 0},A.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},A.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},D.posBefore.get=function(){return this.parent.posBeforeChild(this)},D.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},D.posAfter.get=function(){return this.posBefore+this.size},D.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},A.prototype.localPosFromDOM=function(e,t,n){var r;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var o,i;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}var a,s;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&(!(s=a.pmViewDesc)||s.parent!=this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){r=!1;break}if(l.parentNode.firstChild!=l)break}if(null==r&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){r=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==r?0<n:r)?this.posAtEnd:this.posAtStart},A.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(e):o.nodeDOM==e))return o;n=!1}}},A.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},A.prototype.posFromDOM=function(e,t,n){for(var r=e;;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}},A.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},A.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&this.children[n].beforePosition;)n++;return{node:this.contentDOM,offset:n}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],o=t+r.size;if(e<o)return r.domFromPos(e-t-r.border);t=o}},A.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=0,a=0;;a++){var s=this.children[a],l=i+s.size;if(-1==r&&e<=l){var c=i+s.border;if(c<=e&&t<=l-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e-c,t-c,n+c);e=n+i;for(var u=a;0<u;u--){var p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=h(p.dom)+1;break}e-=p.size}-1==r&&(r=0)}if(-1<r&&t<=l){t=n+l;for(var d=a+1;d<this.children.length;d++){var f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=h(f.dom);break}t+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},A.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},A.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},A.prototype.setSelection=function(e,t,n){for(var r=Math.min(e,t),o=Math.max(e,t),i=0,a=0;i<this.children.length;i++){var s=this.children[i],l=a+s.size;if(a<r&&o<l)return s.setSelection(e-a-s.border,t-a-s.border,n);a=l}var c=this.domFromPos(e),u=this.domFromPos(t),p=n.getSelection(),d=document.createRange();if(!v(c.node,c.offset,p.anchorNode,p.anchorOffset)||!v(u.node,u.offset,p.focusNode,p.focusOffset)){if(p.extend)d.setEnd(c.node,c.offset),d.collapse(!1);else{if(t<e){var f=c;c=u,u=f}d.setEnd(u.node,u.offset),d.setStart(c.node,c.offset)}p.removeAllRanges(),p.addRange(d),p.extend&&p.extend(u.node,u.offset)}},A.prototype.ignoreMutation=function(e){return!this.contentDOM},D.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},A.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&n<=t:e<i&&n<t){var a=n+o.border,s=i-o.border;if(a<=e&&t<=s)return this.dirty=e==n||t==i?2:1,void(e==a&&t==s&&o.contentLost?o.dirty=3:o.markDirty(e-a,t-a));o.dirty=3}n=i}this.dirty=2},Object.defineProperties(A.prototype,D);var T=[],N=function(s){function e(e,t,n,r){var o,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:r})),!t.type.spec.raw){if(1!=i.nodeType){var a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable=!1,i.classList.add("ProseMirror-widget")}s.call(this,e,T,i,null),this.widget=t,o=this}s&&(e.__proto__=s),(e.prototype=Object.create(s&&s.prototype)).constructor=e;var t={beforePosition:{}};return t.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(e.prototype,t),e}(A),R=function(o){function e(){o.apply(this,arguments)}return o&&(e.__proto__=o),((e.prototype=Object.create(o&&o.prototype)).constructor=e).prototype.parseRule=function(){for(var e,t=this.dom.firstChild;t;t=t.nextSibling){var n=void 0;if(3==t.nodeType){var r=t.nodeValue.replace(/\ufeff/g,"");if(!r)continue;n=document.createTextNode(r)}else{if("\ufeff"==t.textContent)continue;n=t.cloneNode(!0)}e||(e=document.createDocumentFragment()),e.appendChild(n)}return e?{skip:e}:o.prototype.parseRule.call(this)},e.prototype.ignoreMutation=function(){return!1},e}(N),P=function(o){function a(e,t,n,r){o.call(this,e,[],n,r),this.mark=t}return o&&(a.__proto__=o),((a.prototype=Object.create(o&&o.prototype)).constructor=a).create=function(e,t,n,r){var o=Y(r)[t.type.name],i=o&&o(t,r,n);return i&&i.dom||(i=Ur.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t,n))),new a(e,t,i.dom,i.contentDOM||i.dom)},a.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},a.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},a.prototype.markDirty=function(e,t){if(o.prototype.markDirty.call(this,e,t),0!=this.dirty){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}},a}(A),F=function(c){function f(e,t,n,r,o,i,a,s,l){c.call(this,e,t.isLeaf?T:[],o,i),this.nodeDOM=a,this.node=t,this.outerDeco=n,this.innerDeco=r,i&&this.updateChildren(s,l)}c&&(f.__proto__=c);var e={size:{},border:{}};return((f.prototype=Object.create(c&&c.prototype)).constructor=f).create=function(e,t,n,r,o,i){var a,s=Y(o)[t.type.name],l=s&&s(t,o,function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:i},n),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){var p;c=(p=Ur.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t))).dom,u=p.contentDOM}u||t.isText||"BR"==c.nodeName||(c.contentEditable=!1,t.type.spec.draggable&&(c.draggable=!0));var d=c;return c=H(c,n,t),l?a=new B(e,t,n,r,c,u,d,l,o):t.isText?new I(e,t,n,r,c,d,o):new f(e,t,n,r,c,u,d,o,i+1)},f.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?Ur.Fragment.empty:e.node.content},t},f.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&U(t,this.outerDeco)&&n.eq(this.innerDeco)},e.size.get=function(){return this.node.nodeSize},e.border.get=function(){return this.node.isLeaf?0:1},f.prototype.updateChildren=function(o,i){var n=this,a=new G(this),s=this.node.inlineContent;!function(e,t,n,r){var o=t.locals(e),i=0;if(0==o.length){for(var a=0;a<e.childCount;a++){var s=e.child(a);r(s,o,t.forChild(i,s),a),i+=s.nodeSize}return}for(var l=0,c=[],u=null,p=0;;){if(l<o.length&&o[l].to==i){for(var d=o[l++],f=void 0;l<o.length&&o[l].to==i;)(f||(f=[d])).push(o[l++]);if(f){f.sort(X);for(var h=0;h<f.length;h++)n(f[h],p)}else n(d,p)}var m=void 0;if(u)m=u,u=null;else{if(!(p<e.childCount))break;m=e.child(p++)}for(var v=0;v<c.length;v++)c[v].to<=i&&c.splice(v--,1);for(;l<o.length&&o[l].from==i;)c.push(o[l++]);var g=i+m.nodeSize;if(m.isText){var y=g;l<o.length&&o[l].from<y&&(y=o[l].from);for(var b=0;b<c.length;b++)c[b].to<y&&(y=c[b].to);y<g&&(u=m.cut(y-i),m=m.cut(0,y-i),g=y)}r(m,c.length?c.slice():T,t.forChild(i,m),p-1),i=g}}(this.node,this.innerDeco,function(e,t){e.spec.marks?a.syncToMarks(e.spec.marks,s,o):0<=e.type.side&&a.syncToMarks(t==n.node.childCount?Ur.Mark.none:n.node.child(t).marks,s,o),a.placeWidget(e,o,i)},function(e,t,n,r){a.syncToMarks(e.marks,s,o),a.findNodeMatch(e,t,n,r)||a.updateNextNode(e,t,n,o,r)||a.addNode(e,t,n,o,i),i+=e.nodeSize}),a.syncToMarks(T,s,o),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&this.renderChildren()},f.prototype.renderChildren=function(){!function e(t,n){var r=t.firstChild;for(var o=0;o<n.length;o++){var i=n[o],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=K(r);r=r.nextSibling}else t.insertBefore(a,r);if(i instanceof P){var s=r?r.previousSibling:t.lastChild;e(i.contentDOM,i.children),r=s?s.nextSibling:t.firstChild}}for(;r;)r=K(r)}(this.contentDOM,this.children),S.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom)},f.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},f.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},f.prototype.updateOuterDeco=function(e){if(!U(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=$(this.dom,this.nodeDOM,j(this.outerDeco,this.node,t),j(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},f.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode")},f.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode")},Object.defineProperties(f.prototype,e),f}(A);function _(e,t,n,r,o){return H(r,t,e),new F(null,e,t,n,r,r,r,o,0)}var I=function(s){function e(e,t,n,r,o,i,a){s.call(this,e,t,n,r,o,null,i,a)}return s&&(e.__proto__=s),((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.parseRule=function(){var e=this.nodeDOM.parentNode;return e?{skip:e}:{ignore:!0}},e.prototype.update=function(e,t){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,!(this.dirty=0))},e.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},e.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},e.prototype.localPosFromDOM=function(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):s.prototype.localPosFromDOM.call(this,e,t,n)},e.prototype.ignoreMutation=function(e){return"characterData"!=e.type},e}(F),L=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(A),B=function(c){function e(e,t,n,r,o,i,a,s,l){c.call(this,e,t,n,r,o,i,a,l),this.spec=s}return c&&(e.__proto__=c),((e.prototype=Object.create(c&&c.prototype)).constructor=e).prototype.update=function(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(e,t);return o&&this.updateInner(e,t,n,r),o}return!(!this.contentDOM&&!e.isLeaf)&&c.prototype.update.call(this,e,t,n,r)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():c.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():c.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,t,n){this.spec.setSelection?this.spec.setSelection(e,t,n):c.prototype.setSelection.call(this,e,t,n)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),c.prototype.destroy.call(this)},e.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):c.prototype.ignoreMutation.call(this,e)},e}(F);function V(e){e&&(this.nodeName=e)}V.prototype=Object.create(null);var z=[new V];function j(e,t,n){if(0==e.length)return z;for(var r=n?z[0]:new V,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs,s=r;if(a)for(var l in a.nodeName&&o.push(s=new V(a.nodeName)),a){var c=a[l];null!=c&&(n&&1==o.length&&o.push(s=r=new V(t.isInline?"span":"div")),"class"==l?s.class=(s.class?s.class+" ":"")+c:"style"==l?s.style=(s.style?s.style+";":"")+c:"nodeName"!=l&&(s[l]=c))}}return o}function $(e,t,n,r){if(n==z&&r==z)return t;for(var o=t,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var l=void 0;o=(s&&s.nodeName==a.nodeName&&o!=e&&(l=t.parentNode)&&l.tagName.toLowerCase()==a.nodeName||(l=document.createElement(a.nodeName)).appendChild(o),l)}W(o,s||z[0],a)}return o}function W(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" "):T,a=n.class?n.class.split(" "):T,s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var l=0;l<a.length;l++)-1==i.indexOf(a[l])&&e.classList.add(a[l])}if(t.style!=n.style){if(t.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(t.style);)e.style[c[1].toLowerCase()]="";n.style&&(e.style.cssText+=n.style)}}function H(e,t,n){return $(e,e,z,j(t,n,1!=e.nodeType))}function U(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function K(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var q,J,G=function(e){this.top=e,this.index=0,this.stack=[],this.changed=!1,this.preMatched=function(e,t){for(var n=[],r=e.childCount,o=t.length-1;0<r&&0<=o;o--){var i=t[o],a=i.node;if(a){if(a!=e.child(r-1))break;n[--r]=i}}return n}(e.node.content,e.children)};function X(e,t){return e.type.side-t.type.side}function Y(e){return J==e._props?q:(J=e._props,n={},e.someProp("nodeViews",function(e){for(var t in e)Object.prototype.hasOwnProperty.call(n,t)||(n[t]=e[t])}),q=n);var n}function Z(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=0<t?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?e.doc.resolve(0<t?i.after():i.before()):null:i;return a&&Jr.Selection.findFrom(a,t)}function Q(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function ee(e,t){var n=e.state.selection;if(n instanceof Jr.TextSelection){if(n.empty){if(e.endOfTextblock(0<t?"right":"left")){var r=Z(e.state,t);return!!(r&&r instanceof Jr.NodeSelection)&&Q(e,r)}var o,i=n.$head,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(a&&Jr.NodeSelection.isSelectable(a)){var s=t<0?i.pos-a.nodeSize:i.pos;if(a.isAtom||(o=e.docView.descAt(s))&&!o.contentDOM)return Q(e,new Jr.NodeSelection(t<0?e.state.doc.resolve(i.pos-a.nodeSize):i))}return!1}return!1}if(n instanceof Jr.NodeSelection&&n.node.isInline)return Q(e,new Jr.TextSelection(0<t?n.$to:n.$from));var l=Z(e.state,t);return!!l&&Q(e,l)}function te(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ne(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function re(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(S.gecko&&1==n.nodeType&&r<te(n)&&ne(n.childNodes[r])&&(a=!0);;)if(0<r)if(1!=n.nodeType){if(3!=n.nodeType||"\ufeff"!=n.nodeValue.charAt(r-1))break;S.ie&&S.ie_version<=11&&(a=!0),o=n,i=--r}else{var s=n.childNodes[r-1];if(ne(s))o=n,i=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(ie(n))break;for(var l=n.previousSibling;l&&ne(l);)o=n.parentNode,i=h(l),l=l.previousSibling;if(l)r=te(n=l);else{if((n=n.parentNode)==e.dom)break;r=0}}a?ae(e,t,n,r):o&&ae(e,t,o,i)}}function oe(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=te(n);;)if(r<a){if(1!=n.nodeType)break;if(!ne(n.childNodes[r]))break;o=n,i=++r}else{if(ie(n))break;for(var s=n.nextSibling;s&&ne(s);)o=s.parentNode,i=h(s)+1,s=s.nextSibling;if(s)r=0,a=te(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}o&&ae(e,t,o,i)}}function ie(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function ae(e,t,n,r){if(O(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.selectionReader.storeDOMState(e.selection)}function se(e,t){var n=e.state.selection;if(n instanceof Jr.TextSelection&&!n.empty)return!1;var r=n.$from,o=n.$to;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var i=Z(e.state,t);if(i&&i instanceof Jr.NodeSelection)return Q(e,i)}if(r.parent.inlineContent)return!1;var a=Jr.Selection.findFrom(t<0?r:o,t);return!a||Q(e,a)}function le(e,t){if(!(e.state.selection instanceof Jr.TextSelection))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(0<t?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(!a||a.isText)return!1;var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}G.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},G.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},G.prototype.syncToMarks=function(e,t,n){for(var r,o=this,i=0,a=this.stack.length>>1,s=Math.min(a,e.length);i<s&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(e[i]);)i++;for(;i<a;)o.destroyRest(),o.top.dirty=0,o.index=o.stack.pop(),o.top=o.stack.pop(),a--;for(;a<e.length;){if(o.stack.push(o.top,o.index+1),o.index<o.top.children.length&&(r=o.top.children[o.index]).matchesMark(e[a]))o.top=r;else{var l=P.create(o.top,e[a],t,n);o.top.children.splice(o.index,0,l),o.top=l,o.changed=!0}o.index=0,a++}},G.prototype.findNodeMatch=function(e,t,n,r){for(var o=this.index,i=this.top.children,a=Math.min(i.length,o+5);o<a;o++){var s=i[o],l=void 0;if(s.matchesNode(e,t,n)&&(-1==(l=this.preMatched.indexOf(s))||l==r))return this.destroyBetween(this.index,o),this.index++,!0}return!1},G.prototype.updateNextNode=function(e,t,n,r,o){if(this.index==this.top.children.length)return!1;var i=this.top.children[this.index];if(i instanceof F){var a=this.preMatched.indexOf(i);if(-1<a&&a!=o)return!1;var s=i.dom;if(i.update(e,t,n,r))return i.dom!=s&&(this.changed=!0),this.index++,!0}return!1},G.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,F.create(this.top,e,t,n,r,o)),this.changed=!0},G.prototype.placeWidget=function(e,t,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var r=new(e.spec.isCursorWrapper?R:N)(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},G.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof P;)e=e.children[e.children.length-1];if(!e||!(e instanceof I)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new L(this.top,T,t,null)),this.changed=!0}};var ce=function(e,t,n){this.prev=e,this.mapping=t,this.state=n},ue=function(e){this.seen=[new ce(null,null,e)],Jr.EditorState.addApplyListener(this.track=this.track.bind(this))};ue.prototype.destroy=function(){Jr.EditorState.removeApplyListener(this.track)},ue.prototype.find=function(e){for(var t=this.seen.length-1;0<=t;t--){var n=this.seen[t];if(n.state==e)return n}},ue.prototype.track=function(e,t,n){var r=this.seen.length<200?this.find(e):null;r&&this.seen.push(new ce(r,t.docChanged?t.mapping:null,n))},ue.prototype.getMapping=function(e,t){var n=this.find(e);if(!n)return null;for(var r=[],o=n;o;o=o.prev)o.mapping&&r.push(o.mapping);for(var i=t||new qr.Mapping,a=r.length-1;0<=a;a--)i.appendMapping(r[a]);return i};var pe=function(e){var t=this;this.view=e,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastSelection=e.state.selection,this.ignoreUpdates=!1,this.suppressUpdates=!1,this.poller=new("onselectionchange"in document?de:fe)(this),this.focusFunc=function(){return t.poller.start(be(t.view))}.bind(this),this.blurFunc=this.poller.stop,e.dom.addEventListener("focus",this.focusFunc),e.dom.addEventListener("blur",this.blurFunc),e.editable||this.poller.start(!1)};pe.prototype.destroy=function(){this.view.dom.removeEventListener("focus",this.focusFunc),this.view.dom.removeEventListener("blur",this.blurFunc),this.poller.stop()},pe.prototype.poll=function(e){this.poller.poll(e)},pe.prototype.editableChanged=function(){this.view.editable?be(this.view)||this.poller.stop():this.poller.start()},pe.prototype.domChanged=function(){var e=this.view.root.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastHeadNode||e.focusOffset!=this.lastHeadOffset},pe.prototype.storeDOMState=function(e){var t=this.view.root.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastHeadNode=t.focusNode,this.lastHeadOffset=t.focusOffset,this.lastSelection=e},pe.prototype.clearDOMState=function(){this.lastAnchorNode=this.lastSelection=null},pe.prototype.readFromDOM=function(e){if(!this.ignoreUpdates&&this.domChanged()&&be(this.view)){if(this.suppressUpdates)return he(this.view);if(this.view.inDOMChange||this.view.domObserver.flush(),!this.view.inDOMChange){var t,n,r=this.view.root.getSelection(),o=this.view.state.doc,i=this.view.docView.nearestDesc(r.focusNode),a=i&&0==i.size,s=this.view.docView.posFromDOM(r.focusNode,r.focusOffset),l=o.resolve(s);if(O(r)){for(t=l;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&Jr.NodeSelection.isSelectable(i.node)&&i.parent){var c=i.posBefore;n=new Jr.NodeSelection(s==c?l:o.resolve(c))}}else t=o.resolve(this.view.docView.posFromDOM(r.anchorNode,r.anchorOffset));if(!n){var u="pointer"==e||this.view.state.selection.head<l.pos&&!a?1:-1;n=ye(this.view,t,l,u)}if(this.view.state.selection.eq(n))he(this.view);else{var p=this.view.state.tr.setSelection(n);"pointer"==e?p.setMeta("pointer",!0):"key"==e&&p.scrollIntoView(),this.view.dispatch(p)}}}};var de=function(e){var t=this;this.listening=!1,this.curOrigin=null,this.originTime=0,this.reader=e,this.readFunc=function(){return e.readFromDOM(t.originTime>Date.now()-50?t.curOrigin:null)}};de.prototype.poll=function(e){this.curOrigin=e,this.originTime=Date.now()},de.prototype.start=function(e){this.listening||(this.reader.view.dom.ownerDocument.addEventListener("selectionchange",this.readFunc),this.listening=!0,e&&this.readFunc())},de.prototype.stop=function(){this.listening&&(this.reader.view.dom.ownerDocument.removeEventListener("selectionchange",this.readFunc),this.listening=!1)};var fe=function(e){this.polling=null,this.reader=e,this.pollFunc=this.doPoll.bind(this,null)};function he(e,t){var n=e.state.selection;if(function(e,t){if(t instanceof Jr.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(ge(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else ge(e)}(e,n),e.editable&&!e.hasFocus()){if(!t)return;S.gecko&&S.gecko_version<=55&&(e.selectionReader.ignoreUpdates=!0,e.dom.focus(),e.selectionReader.ignoreUpdates=!1)}else if(!e.editable&&!we(e)&&!t)return;var r=e.selectionReader;if(!r.lastSelection||!r.lastSelection.eq(n)||r.domChanged()){if(r.ignoreUpdates=!0,e.cursorWrapper)c=(l=e).root.getSelection(),u=document.createRange(),p=l.cursorWrapper.dom,u.setEnd(p,p.childNodes.length),u.collapse(!1),c.removeAllRanges(),c.addRange(u),!l.state.selection.visible&&S.ie&&S.ie_version<=11&&(p.disabled=!0,p.disabled=!1);else{var o,i,a=n.anchor,s=n.head;!me||n instanceof Jr.TextSelection||(n.$from.parent.inlineContent||(o=ve(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=ve(e,n.to))),e.docView.setSelection(a,s,e.root),me&&(o&&(o.contentEditable="false"),i&&(i.contentEditable="false")),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):a!=s&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}var l,c,u,p;r.storeDOMState(n),r.ignoreUpdates=!1}}fe.prototype.doPoll=function(e){var t=this.reader.view;t.focused||!t.editable?(this.reader.readFromDOM(e),this.polling=setTimeout(this.pollFunc,100)):this.polling=null},fe.prototype.poll=function(e){clearTimeout(this.polling),this.polling=setTimeout(e?this.doPoll.bind(this,e):this.pollFunc,0)},fe.prototype.start=function(){null==this.polling&&this.poll()},fe.prototype.stop=function(){clearTimeout(this.polling),this.polling=null};var me=S.safari||S.chrome&&S.chrome_version<63;function ve(e,t){var n=e.docView.domFromPos(t),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return i.contentEditable="true",i;if(a)return a.contentEditable="true",a}}function ge(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function ye(t,n,r,e){return t.someProp("createSelectionBetween",function(e){return e(t,n,r)})||Jr.TextSelection.between(n,r,e)}function be(e){return(!e.editable||e.root.activeElement==e.dom)&&we(e)}function we(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Ce(e){return!1===e.type.spec.inclusive}function ke(e){var t=e.selection,n=t.$head,r=t.$anchor,o=t.visible,i=n.pos!=r.pos||o&&!n.parent.inlineContent?null:n;return i&&(!o||e.storedMarks||0==i.parent.content.length||i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.some(Ce))?i:null}var Ee=function e(t,n){var r=this;this.view=t,this.state=t.state,this.composing=n,this.from=this.to=null,this.typeOver=!1,this.timeout=n?null:setTimeout(function(){return r.finish()},e.commitTimeout),this.trackMappings=new ue(t.state),this.mapping=new qr.Mapping,this.mappingTo=t.state};function xe(e,t){for(var n=t||0;n<e.depth;n++)if(e.index(n)+1<e.node(n).childCount)return!1;return e.parentOffset==e.parent.content.size}function Se(e,t){for(var n=t||0;n<e.depth;n++)if(0<e.index(0))return!1;return 0==e.parentOffset}function Oe(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Me(e,t,n,r){return Math.max(r.anchor,r.head)>t.content.size?null:ye(e,t.resolve(n.map(r.anchor)),t.resolve(n.map(r.head)))}function Ae(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;0<r&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function De(e,t){for(var n=[],r=t.content,o=t.openStart,i=t.openEnd;1<o&&1<i&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var s=e.someProp("clipboardSerializer")||Ur.DOMSerializer.fromSchema(e.state.schema),l=document.createElement("div");l.appendChild(s.serializeFragment(r));for(var c,u=l.firstChild;u&&1==u.nodeType&&(c=Re[u.nodeName.toLowerCase()]);){for(var p=c.length-1;0<=p;p--){for(var d=document.createElement(c[p]);l.firstChild;)d.appendChild(l.firstChild);l.appendChild(d)}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n)),{dom:l,text:e.someProp("clipboardTextSerializer",function(e){return e(t)})||t.content.textBetween(0,t.content.size,"\n\n")}}function Te(e,t,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",function(e){t=e(t)}),s)return new Ur.Slice(Ur.Fragment.from(e.state.schema.text(t)),0,0);var c=e.someProp("clipboardTextParser",function(e){return e(t,o)});c?a=c:(i=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach(function(e){i.appendChild(document.createElement("p")).textContent=e}))}else e.someProp("transformPastedHTML",function(e){return n=e(n)}),i=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=(Pe||(Pe=document.implementation.createHTMLDocument("title"))).createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=o&&Re[o[1].toLowerCase()])&&(e=n.map(function(e){return"<"+e+">"}).join("")+e+n.map(function(e){return"</"+e+">"}).reverse().join(""),i=n.length);r.innerHTML=e;for(var a=0;a<i;a++)r=r.firstChild;return r}(n);var u=i&&i.querySelector("[data-pm-slice]"),p=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||Ur.DOMParser.fromSchema(e.state.schema);a=d.parseSlice(i,{preserveWhitespace:!(!l&&!p),context:o})}return a=p?function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var o=t.content,i=t.openStart,a=t.openEnd,s=n.length-2;0<=s;s-=2){var l=r.nodes[n[s]];if(!l||l.hasRequiredAttrs())break;o=Ur.Fragment.from(l.create(n[s+1],o)),i++,a++}return new Ur.Slice(o,i,a)}(new Ur.Slice(a.content,Math.min(a.openStart,+p[1]),Math.min(a.openEnd,+p[2])),p[3]):Ur.Slice.maxOpen(function(n,r){if(n.childCount<2)return n;for(var e=function(e){var t=r.node(e),o=t.contentMatchAt(r.index(e)),i=void 0,a=[];if(n.forEach(function(e){if(a){var t,n=o.findWrapping(e.type);if(!n)return a=null;if(t=a.length&&i.length&&function e(t,n,r,o,i){if(i<t.length&&i<n.length&&t[i]==n[i]){var a=e(t,n,r,o.lastChild,i+1);if(a)return o.copy(o.content.replaceChild(o.childCount-1,a));var s=o.contentMatchAt(o.childCount);if(s.matchType(i==t.length-1?r.type:t[i+1]))return o.copy(o.content.append(Ur.Fragment.from(Ne(r,t,i+1))))}}(n,i,e,a[a.length-1],0))a[a.length-1]=t;else{a.length&&(a[a.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1));var o=t.contentMatchAt(t.childCount).fillBefore(Ur.Fragment.empty,!0);return t.copy(r.append(o))}(a[a.length-1],i.length));var r=Ne(e,n);a.push(r),o=o.matchType(r.type,r.attrs),i=n}}}),a)return{v:Ur.Fragment.from(a)}},t=r.depth;0<=t;t--){var o=e(t);if(o)return o.v}return n}(a.content,o),!1),e.someProp("transformPasted",function(e){a=e(a)}),a}function Ne(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;n<=r;r--)e=t[r].create(null,Ur.Fragment.from(e));return e}Ee.prototype.addRange=function(e,t){null==this.from?(this.from=e,this.to=t):(this.from=Math.min(e,this.from),this.to=Math.max(t,this.to))},Ee.prototype.changedRange=function(){if(null==this.from)return function(e){var t=e.$anchor.min(e.$head),n=e.$anchor.max(e.$head);{if(t.sameParent(n)&&t.parent.inlineContent&&t.parentOffset&&n.parentOffset<n.parent.content.size){var r=Math.max(0,t.parentOffset),o=t.parent.content.size,i=Math.min(o,n.parentOffset);if(0<r&&(r=t.parent.childBefore(r).offset),i<o){var a=t.parent.childAfter(i);i=a.offset+a.node.nodeSize}var s=t.start();return{from:s+r,to:s+i}}for(var l=0;;l++){var c=Se(t,l+1),u=xe(n,l+1);if(c||u||t.index(l)!=n.index(l)||n.node(l).isTextblock){var p=t.before(l+1),d=n.after(l+1);return c&&0<t.index(l)&&(p-=t.node(l).child(t.index(l)-1).nodeSize),u&&n.index(l)+1<n.node(l).childCount&&(d+=n.node(l).child(n.index(l)+1).nodeSize),{from:p,to:d}}}}}(this.state.selection);var e=this.state.doc.resolve(Math.min(this.from,this.state.selection.from)),t=this.state.doc.resolve(this.to),n=e.sharedDepth(this.to);return{from:e.before(n+1),to:t.after(n+1)}},Ee.prototype.markDirty=function(e){null==this.from?this.view.docView.markDirty((e=e||this.changedRange()).from,e.to):this.view.docView.markDirty(this.from,this.to)},Ee.prototype.stateUpdated=function(e){return this.trackMappings.getMapping(e,this.mapping)?(this.trackMappings.destroy(),this.trackMappings=new ue(e),this.mappingTo=e,!0):(this.markDirty(),this.destroy(),!1)},Ee.prototype.finish=function(e){if(clearTimeout(this.timeout),!this.composing||e){this.view.domObserver.flush();var t=this.changedRange();this.markDirty(t),this.destroy();var n=this.state.selection,r=this.typeOver&&n instanceof Jr.TextSelection&&!n.empty&&n.$head.sameParent(n.$anchor);!function(t,e,n,r,o){var i,a,s=function(e,t,n){var r=e.docView.parseRange(n.from,n.to),o=r.node,i=r.fromOffset,a=r.toOffset,s=r.from,l=r.to,c=e.root.getSelection(),u=null,p=c.anchorNode;p&&e.dom.contains(1==p.nodeType?p:p.parentNode)&&(u=[{node:p,offset:c.anchorOffset}],O(c)||u.push({node:c.focusNode,offset:c.focusOffset}));if(S.chrome&&8===e.lastKeyCode)for(var d=a;i<d;d--){var f=o.childNodes[d-1],h=f.pmViewDesc;if("BR"==f.nodeType&&!h){a=d;break}if(!h||h.size)break}var m=t.doc,v=e.someProp("domParser")||Ur.DOMParser.fromSchema(e.state.schema),g=m.resolve(s),y=null,b=v.parse(o,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:a,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:(w=v,C=g,function(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(S.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName))return w.matchTag(document.createElement("li"),C);if(e.parentNode.lastChild==e)return{ignore:!0}}}),context:g});var w,C;if(u&&null!=u[0].pos){var k=u[0].pos,E=u[1]&&u[1].pos;null==E&&(E=k),y={anchor:k+s,head:E+s}}return{doc:b,sel:y,from:s,to:l}}(t,n,r),l=n.doc,c=l.slice(s.from,s.to);a=8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(i=n.selection.to,"end"):(i=n.selection.from,"start");t.lastKeyCode=null;var u=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,l=a.b;if("end"==o){var c=Math.max(0,i-Math.min(s,l));r-=s+c-i}if(s<i&&e.size<t.size){var u=r<=i&&s<=r?i-r:0;l=(i-=u)+(l-s),s=i}else if(l<i){var p=r<=i&&l<=r?i-r:0;s=(i-=p)+(s-l),l=i}return{start:i,endA:s,endB:l}}(c.content,s.doc.content,s.from,i,a);if(!u){if(o){var p=t.state,d=p.selection;t.dispatch(p.tr.replaceSelectionWith(p.schema.text(p.doc.textBetween(d.from,d.to)),!0).scrollIntoView())}else if(s.sel){var f=Me(t,t.state.doc,e,s.sel);f&&!f.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(f))}return}var h,m=s.doc.resolveNoCache(u.start-s.from),v=s.doc.resolveNoCache(u.endB-s.from);if(!m.sameParent(v)&&m.pos<s.doc.content.size&&(h=Jr.Selection.findFrom(s.doc.resolve(m.pos+1),1,!0))&&h.head==v.pos&&t.someProp("handleKeyDown",function(e){return e(t,Oe(13,"Enter"))}))return;if(n.selection.anchor>u.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||Ae(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=e.resolve(Ae(i,!0,!0));if(!a.parent.isTextblock||a.pos>n||Ae(a,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(l,u.start,u.endA,m,v)&&t.someProp("handleKeyDown",function(e){return e(t,Oe(8,"Backspace"))}))return S.android&&S.chrome&&(t.selectionReader.suppressUpdates=!0,setTimeout(function(){return t.selectionReader.suppressUpdates=!1},50));var g,y,b,w,C=e.map(u.start),k=e.map(u.endA,-1);if(m.sameParent(v)&&m.parent.inlineContent)if(m.pos==v.pos)g=t.state.tr.delete(C,k),y=l.resolve(u.start).marksAcross(l.resolve(u.endA));else if(u.endA==u.endB&&(w=l.resolve(u.start))&&(b=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,s=i,l=a,c=0;c<a.length;c++)s=a[c].removeFromSet(s);for(var u=0;u<i.length;u++)l=i[u].removeFromSet(l);if(1==s.length&&0==l.length)r=s[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=l.length)return null;r=l[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var p=[],d=0;d<t.childCount;d++)p.push(o(t.child(d)));if(Ur.Fragment.from(p).eq(e))return{mark:r,type:n}}(m.parent.content.cut(m.parentOffset,v.parentOffset),w.parent.content.cut(w.parentOffset,u.endA-w.start()))))g=t.state.tr,"add"==b.type?g.addMark(C,k,b.mark):g.removeMark(C,k,b.mark);else if(m.parent.child(m.index()).isText&&m.index()==v.index()-(v.textOffset?0:1)){var E=m.parent.textBetween(m.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",function(e){return e(t,C,k,E)}))return;g=t.state.tr.insertText(E,C,k)}g||(g=t.state.tr.replace(C,k,s.doc.slice(u.start-s.from,u.endB-s.from)));if(s.sel){var x=Me(t,g.doc,e,s.sel);x&&g.setSelection(x)}y&&g.ensureMarks(y);t.dispatch(g.scrollIntoView())}(this.view,this.mapping,this.state,t,r),this.view.docView.dirty&&this.view.updateState(this.view.state)}},Ee.prototype.destroy=function(){clearTimeout(this.timeout),this.trackMappings.destroy(),this.view.inDOMChange=null},Ee.prototype.compositionEnd=function(){var e=this;this.composing&&(this.composing=!1,this.timeout=setTimeout(function(){return e.finish()},50))},Ee.start=function(e,t){return e.inDOMChange?t&&(clearTimeout(e.inDOMChange.timeout),e.inDOMChange.composing=!0):e.inDOMChange=new Ee(e,t),e.inDOMChange},Ee.commitTimeout=20;var Re={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Pe=null;var Fe={childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0},_e=S.ie&&S.ie_version<=11,Ie=function(e){var t=this;this.view=e,this.observer=window.MutationObserver&&new window.MutationObserver(function(e){return t.registerMutations(e)}),_e&&(this.onCharData=function(e){return t.registerMutation({target:e.target,type:"characterData",oldValue:e.prevValue})})};Ie.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Fe),_e&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData)},Ie.prototype.stop=function(){this.observer&&(this.flush(),this.observer.disconnect()),_e&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)},Ie.prototype.flush=function(){this.observer&&this.registerMutations(this.observer.takeRecords())},Ie.prototype.registerMutations=function(e){for(var t=0;t<e.length;t++)this.registerMutation(e[t])},Ie.prototype.registerMutation=function(e){if(this.view.editable){var t=this.view.docView.nearestDesc(e.target);if(("attributes"!=e.type||t!=this.view.docView&&"contenteditable"!=e.attributeName)&&t&&!t.ignoreMutation(e)){var n,r;if("childList"==e.type){var o=e.previousSibling&&e.previousSibling.parentNode==e.target?h(e.previousSibling)+1:0;if(-1==o)return;n=t.localPosFromDOM(e.target,o,-1);var i=e.nextSibling&&e.nextSibling.parentNode==e.target?h(e.nextSibling):e.target.childNodes.length;if(-1==i)return;r=t.localPosFromDOM(e.target,i,1)}else"attributes"==e.type?(n=t.posAtStart-t.border,r=t.posAtEnd+t.border):(n=t.posAtStart,r=t.posAtEnd,e.target.nodeValue==e.oldValue&&(Ee.start(this.view).typeOver=!0));Ee.start(this.view).addRange(n,r)}}};var Le={},Be={};function Ve(n){n.someProp("handleDOMEvents",function(e){for(var t in e)n.eventHandlers[t]||n.dom.addEventListener(t,n.eventHandlers[t]=function(e){return ze(n,e)})})}function ze(n,r){return n.someProp("handleDOMEvents",function(e){var t=e[r.type];return!!t&&(t(n,r)||r.defaultPrevented)})}function je(e){return{left:e.clientX,top:e.clientY}}Be.keydown=function(t,n){if(t.shiftKey=16==n.keyCode||n.shiftKey,t.inDOMChange){if(t.inDOMChange.composing)return;t.inDOMChange.finish()}var e,r,o,i,a,s;t.lastKeyCode=n.keyCode,t.lastKeyCodeTime=Date.now(),t.someProp("handleKeyDown",function(e){return e(t,n)})||(e=t,a=(r=n).keyCode,i="",(o=r).ctrlKey&&(i+="c"),o.metaKey&&(i+="m"),o.altKey&&(i+="a"),o.shiftKey&&(i+="s"),s=i,8==a||S.mac&&72==a&&"c"==s?le(e,-1)||re(e):46==a||S.mac&&68==a&&"c"==s?le(e,1)||oe(e):13==a||27==a||(37==a?ee(e,-1)||re(e):39==a?ee(e,1)||oe(e):38==a?se(e,-1)||re(e):40==a?se(e,1)||oe(e):s==(S.mac?"m":"c")&&(66==a||73==a||89==a||90==a)))?n.preventDefault():t.selectionReader.poll("key")},Be.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Be.keypress=function(t,n){if(!(t.inDOMChange||!n.charCode||n.ctrlKey&&!n.altKey||S.mac&&n.metaKey))if(t.someProp("handleKeyPress",function(e){return e(t,n)}))n.preventDefault();else{var r=t.state.selection;if(!(r instanceof Jr.TextSelection&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(n.charCode);t.someProp("handleTextInput",function(e){return e(t,r.$from.pos,r.$to.pos,o)})||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}}};var $e={time:0,x:0,y:0,type:""};function We(n,e,r,t,o){if(-1==t)return!1;for(var i=n.state.doc.resolve(t),a=function(t){if(n.someProp(e,function(e){return t>i.depth?e(n,r,i.nodeAfter,i.before(t),o,!0):e(n,r,i.node(t),i.before(t),o,!1)}))return{v:!0}},s=i.depth+1;0<s;s--){var l=a(s);if(l)return l.v}return!1}function He(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Ue(t,n,e,r,o){return We(t,"handleClickOn",n,e,r)||t.someProp("handleClick",function(e){return e(t,n,r)})||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof Jr.NodeSelection&&(n=o.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;0<a;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(Jr.NodeSelection.isSelectable(s)){r=n&&0<o.$from.depth&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(He(e,Jr.NodeSelection.create(e.state.doc,r),"pointer"),!0)}(t,e):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Jr.NodeSelection.isSelectable(r))&&(He(e,new Jr.NodeSelection(n),"pointer"),!0)}(t,e))}function Ke(t,n,e,r){return We(t,"handleTripleClickOn",n,e,r)||t.someProp("handleTripleClick",function(e){return e(t,n,r)})||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(He(e,Jr.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),o=r.depth+1;0<o;o--){var i=o>r.depth?r.nodeAfter:r.node(o),a=r.before(o);if(i.inlineContent)He(e,Jr.TextSelection.create(n,a+1,a+1+i.content.size),"pointer");else{if(!Jr.NodeSelection.isSelectable(i))continue;He(e,Jr.NodeSelection.create(n,a),"pointer")}return!0}}(t,e)}function qe(e){return!!e.inDOMChange&&(e.inDOMChange.finish(!0),!0)}var Je=S.mac?"metaKey":"ctrlKey";Le.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n,r,o,i,a=qe(e),s=Date.now(),l="singleClick";s-$e.time<500&&(n=t,o=(r=$e).x-n.clientX,i=r.y-n.clientY,o*o+i*i<100)&&!t[Je]&&("singleClick"==$e.type?l="doubleClick":"doubleClick"==$e.type&&(l="tripleClick")),$e={time:s,x:t.clientX,y:t.clientY,type:l};var c=e.posAtCoords(je(t));c&&("singleClick"==l?e.mouseDown=new Ge(e,c,t,a):("doubleClick"==l?function(t,n,e,r){return We(t,"handleDoubleClickOn",n,e,r)||t.someProp("handleDoubleClick",function(e){return e(t,n,r)})}:Ke)(e,c.pos,c.inside,t)?t.preventDefault():e.selectionReader.poll("pointer"))};var Ge=function(e,t,n,r){var o,i,a=this;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[Je],this.allowDefault=n.shiftKey,-1<t.inside)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{var s=e.state.doc.resolve(t.pos);o=s.parent,i=s.depth?s.before():0}this.mightDrag=null,this.target=r?null:n.target,(o.type.spec.draggable&&!1!==o.type.spec.selectable||e.state.selection instanceof Jr.NodeSelection&&i==e.state.selection.from)&&(this.mightDrag={node:o,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&S.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){return a.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),e.selectionReader.poll("pointer")};Ge.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Ge.prototype.up=function(e){this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)&&(this.allowDefault?(S.ie&&ke(this.view.state)&&this.view.updateState(this.view.state),this.view.selectionReader.poll("pointer")):Ue(this.view,this.pos.pos,this.pos.inside,e,this.selectNode)?e.preventDefault():this.flushed?(He(this.view,Jr.Selection.near(this.view.state.doc.resolve(this.pos.pos)),"pointer"),e.preventDefault()):this.view.selectionReader.poll("pointer"))},Ge.prototype.move=function(e){!this.allowDefault&&(4<Math.abs(this.event.x-e.clientX)||4<Math.abs(this.event.y-e.clientY))&&(this.allowDefault=!0),this.view.selectionReader.poll("pointer")},Le.touchdown=function(e){qe(e),e.selectionReader.poll("pointer")},Le.contextmenu=function(e){return qe(e)},Be.compositionstart=Be.compositionupdate=function(e){Ee.start(e,!0)},Be.compositionend=function(e,t){if(!e.inDOMChange){if(!t.data)return;Ee.start(e,!0)}e.inDOMChange.compositionEnd()},Be.input=function(e){var t=Ee.start(e);t.composing||t.finish()};var Xe=S.ie&&S.ie_version<15||S.ios&&S.webkit_version<604;function Ye(t,e,n,r){var o=Te(t,e,n,t.shiftKey,t.state.selection.$from);if(!o)return!1;if(t.someProp("handlePaste",function(e){return e(t,r,o)}))return!0;var i,a=0==(i=o).openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null,s=a?t.state.tr.replaceSelectionWith(a,t.shiftKey):t.state.tr.replaceSelection(o);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Le.copy=Be.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=Xe?null:t.clipboardData,i=De(e,n.content()),a=i.dom,s=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",s)):function(e,t){var n=t.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=n.createRange();i.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout(function(){n.body.removeChild(r),e.focus()},50)}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Be.paste=function(e,t){var n,r,o,i,a,s=Xe?null:t.clipboardData;s&&(Ye(e,s.getData("text/plain"),s.getData("text/html"),t)||0<s.files.length)?t.preventDefault():(r=t,o=(n=e).dom.ownerDocument,i=n.shiftKey||n.state.selection.$from.parent.type.spec.code,a=o.body.appendChild(o.createElement(i?"textarea":"div")),i||(a.contentEditable="true"),a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout(function(){n.focus(),o.body.removeChild(a),i?Ye(n,a.value,null,r):Ye(n,a.textContent,a.innerHTML,r)},50))};var Ze=function(e,t){this.slice=e,this.move=t},Qe=S.mac?"altKey":"ctrlKey";for(var et in Le.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,o=r.empty?null:e.posAtCoords(je(t));if(o&&o.pos>=r.from&&o.pos<=(r instanceof Jr.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(Jr.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(Jr.NodeSelection.create(e.state.doc,i.posBefore)))}var a=e.state.selection.content(),s=De(e,a),l=s.dom,c=s.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Xe?"Text":"text/html",l.innerHTML),Xe||t.dataTransfer.setData("text/plain",c),e.dragging=new Ze(a,!t[Qe])}},Le.dragend=function(e){window.setTimeout(function(){return e.dragging=null},50)},Be.dragover=Be.dragenter=function(e,t){return t.preventDefault()},Be.drop=function(t,n){var r=t.dragging;if(t.dragging=null,n.dataTransfer){var e=t.posAtCoords(je(n));if(e){var o=t.state.doc.resolve(e.pos);if(o){var i=r&&r.slice||Te(t,n.dataTransfer.getData(Xe?"Text":"text/plain"),Xe?null:n.dataTransfer.getData("text/html"),!1,o);if(i&&(n.preventDefault(),!t.someProp("handleDrop",function(e){return e(t,n,i,r&&r.move)}))){var a=i?qr.dropPoint(t.state.doc,o.pos,i):o.pos;null==a&&(a=o.pos);var s=t.state.tr;r&&r.move&&s.deleteSelection();var l=s.mapping.map(a),c=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,u=s.doc;if(c?s.replaceRangeWith(l,l,i.content.firstChild):s.replaceRange(l,l,i),!s.doc.eq(u)){var p=s.doc.resolve(l);c&&Jr.NodeSelection.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild)?s.setSelection(new Jr.NodeSelection(p)):s.setSelection(ye(t,p,s.doc.resolve(s.mapping.map(a)))),t.focus(),t.dispatch(s.setMeta("uiEvent","drop"))}}}}}},Le.focus=function(e){e.focused||(e.dom.classList.add("ProseMirror-focused"),e.focused=!0)},Le.blur=function(e){e.focused&&(e.dom.classList.remove("ProseMirror-focused"),e.focused=!1)},Be)Le[et]=Be[et];function tt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var nt=function(e,t){this.spec=t||lt,this.side=this.spec.side||0,this.toDOM=e};nt.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new it(i-n,i-n,this)},nt.prototype.valid=function(){return!0},nt.prototype.eq=function(e){return this==e||e instanceof nt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&tt(this.spec,e.spec))};var rt=function(e,t){this.spec=t||lt,this.attrs=e};rt.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i<=o?null:new it(o,i,this)},rt.prototype.valid=function(e,t){return t.from<t.to},rt.prototype.eq=function(e){return this==e||e instanceof rt&&tt(this.attrs,e.attrs)&&tt(this.spec,e.spec)},rt.is=function(e){return e.type instanceof rt};var ot=function(e,t){this.spec=t||lt,this.attrs=e};ot.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new it(o.pos-n,i.pos-n,this)},ot.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset;return o==t.from&&o+e.child(r).nodeSize==t.to},ot.prototype.eq=function(e){return this==e||e instanceof ot&&tt(this.attrs,e.attrs)&&tt(this.spec,e.spec)};var it=function(e,t,n){this.from=e,this.to=t,this.type=n},at={spec:{}};it.prototype.copy=function(e,t){return new it(e,t,this.type)},it.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},it.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},it.widget=function(e,t,n){return new it(e,e,new nt(t,n))},it.inline=function(e,t,n,r){return new it(e,t,new rt(n,r))},it.node=function(e,t,n,r){return new it(e,t,new ot(n,r))},at.spec.get=function(){return this.type.spec},Object.defineProperties(it.prototype,at);var st=[],lt={},ct=function(e,t){this.local=e&&e.length?e:st,this.children=t&&t.length?t:st};ct.create=function(e,t){return t.length?mt(t,e,0,lt):ut},ct.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},ct.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,n,r+l,o)}},ct.prototype.map=function(e,t,n){return this==ut||0==e.maps.length?this:this.mapInner(e,t,0,0,n||lt)},ct.prototype.mapInner=function(e,t,n,r,o){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(e,n,r);s&&s.type.valid(t,s)?(i||(i=[])).push(s):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?function(e,t,n,r,s,l,o){for(var c=e.slice(),i=function(e,t,n,r){for(var o=0;o<c.length;o+=3){var i=c[o+1],a=void 0;-1==i||i+l<e||(t>=c[o]+l?c[o+1]=-1:(a=r-n-(t-e)+(l-s))&&(c[o]+=a,c[o+1]+=a))}},a=0;a<n.maps.length;a++)n.maps[a].forEach(i);for(var u=!1,p=0;p<c.length;p+=3)if(-1==c[p+1]){var d=n.map(c[p]+l),f=d-s;if(f<0||f>=r.content.size){u=!0;continue}var h=n.map(e[p+1]+l,-1),m=h-s,v=r.content.findIndex(f),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==f&&y+b.nodeSize==m){var w=c[p+2].mapInner(n,b,d+1,c[p]+l+1,o);w!=ut?(c[p]=f,c[p+1]=m,c[p+2]=w):(c[p+1]=-2,u=!0)}else u=!0}if(u){var C=function(e,t,i,a,s,n,l){function c(e,t){for(var n=0;n<e.local.length;n++){var r=e.local[n].map(a,s,t);r?i.push(r):l.onRemove&&l.onRemove(e.local[n].spec)}for(var o=0;o<e.children.length;o+=3)c(e.children[o+2],e.children[o]+t+1)}for(var r=0;r<e.length;r+=3)-1==e[r+1]&&c(e[r+2],t[r]+n+1);return i}(c,e,t?dt(t,s):[],n,s,l,o),k=mt(C,r,0,o);t=k.local;for(var E=0;E<c.length;E+=3)c[E+1]<0&&(c.splice(E,3),E-=3);for(var x=0,S=0;x<k.children.length;x+=3){for(var O=k.children[x];S<c.length&&c[S]<O;)S+=3;c.splice(S,0,k.children[x],k.children[x+1],k.children[x+2])}}return new ct(t&&t.sort(vt),c)}(this.children,i,e,t,n,r,o):i?new ct(i.sort(vt)):ut},ct.prototype.add=function(e,t){return t.length?this==ut?ct.create(e,t):this.addInner(e,t,0):this},ct.prototype.addInner=function(e,o,i){var a,s=this,l=0;e.forEach(function(e,t){var n,r=t+i;if(n=ft(o,e,r)){for(a||(a=s.children.slice());l<a.length&&a[l]<t;)l+=3;a[l]==t?a[l+2]=a[l+2].addInner(e,n,r+1):a.splice(l,0,t,t+e.nodeSize,mt(n,e,r+1,lt)),l+=3}});var t=dt(l?ht(o):o,-i);return new ct(t.length?this.local.concat(t).sort(vt):this.local,a||this.children)},ct.prototype.remove=function(e){return 0==e.length||this==ut?this:this.removeInner(e,0)},ct.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,a=n[o]+t,s=n[o+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>a&&c.to<s&&(e[l]=null,(i||(i=[])).push(c));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,a+1);u!=ut?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var p=0,d=void 0;p<e.length;p++)if(d=e[p])for(var f=0;f<r.length;f++)r[f].type.eq(d.type)&&(r==this.local&&(r=this.local.slice()),r.splice(f--,1));return n==this.children&&r==this.local?this:r.length||n.length?new ct(r,n):ut},ct.prototype.forChild=function(e,t){var n,r;if(this==ut)return this;if(t.isLeaf)return ct.empty;for(var o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,a=i+t.content.size,s=0;s<this.local.length;s++){var l=this.local[s];if(l.from<a&&l.to>i&&l.type instanceof rt){var c=Math.max(i,l.from)-i,u=Math.min(a,l.to)-i;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){var p=new ct(r.sort(vt));return n?new pt([p,n]):p}return n||ut},ct.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof ct)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!1},ct.prototype.locals=function(e){return gt(this.localsInner(e))},ct.prototype.localsInner=function(e){if(this==ut)return st;if(e.inlineContent||!this.local.some(rt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof rt||t.push(this.local[n]);return t};var ut=new ct;ct.empty=ut,ct.removeOverlap=gt;var pt=function(e){this.members=e};function dt(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new it(o.from+t,o.to+t,o.type))}return n}function ft(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,a=void 0;i<e.length;i++)(a=e[i])&&a.from>n&&a.to<r&&((o||(o=[])).push(a),e[i]=null);return o}function ht(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function mt(o,e,i,a){var s=[],l=!1;e.forEach(function(e,t){var n=ft(o,e,t+i);if(n){l=!0;var r=mt(n,e,i+t+1,a);r!=ut&&s.push(t,t+e.nodeSize,r)}});for(var t=dt(l?ht(o):o,-i).sort(vt),n=0;n<t.length;n++)t[n].type.valid(e,t[n])||(a.onRemove&&a.onRemove(t[n].spec),t.splice(n--,1));return t.length||s.length?new ct(t,s):ut}function vt(e,t){return e.from-t.from||e.to-t.to}function gt(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),yt(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),yt(t,o+1,i.copy(r.to,i.to)))}}return t}function yt(e,t,n){for(;t<e.length&&0<vt(n,e[t]);)t++;e.splice(t,0,n)}function bt(n){var r=[];return n.someProp("decorations",function(e){var t=e(n.state);t&&t!=ut&&r.push(t)}),n.cursorWrapper&&r.push(ct.create(n.state.doc,[n.cursorWrapper.deco])),pt.from(r)}pt.prototype.forChild=function(e,t){if(t.isLeaf)return ct.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=ut&&(o instanceof pt?n=n.concat(o.members):n.push(o))}return pt.from(n)},pt.prototype.eq=function(e){if(!(e instanceof pt)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},pt.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?gt(n?t:t.sort(vt)):st},pt.from=function(e){switch(e.length){case 0:return ut;case 1:return e[0];default:return new pt(e)}};var wt=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=xt(this),this.cursorWrapper=null,Et(this),this.docView=_(this.state.doc,kt(this),bt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(n){n.shiftKey=!1,n.mouseDown=null,n.inDOMChange=null,n.lastKeyCode=null,n.lastKeyCodeTime=0,n.domObserver=new Ie(n),n.domObserver.start(),n.eventHandlers=Object.create(null);var e=function(e){var t=Le[e];n.dom.addEventListener(e,n.eventHandlers[e]=function(e){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(n,e)||ze(n,e)||!n.editable&&e.type in Be||t(n,e)})};for(var t in Le)e(t);Ve(n)}(this),this.selectionReader=new pe(this),this.pluginViews=[],this.updatePluginViews()},Ct={props:{},root:{}};function kt(n){var r=Object.create(null);return r.class="ProseMirror"+(n.focused?" ProseMirror-focused":""),r.contenteditable=String(n.editable),n.someProp("attributes",function(e){if("function"==typeof e&&(e=e(n.state)),e)for(var t in e)"class"==t?r.class+=" "+e[t]:r[t]||"contenteditable"==t||"nodeName"==t||(r[t]=String(e[t]))}),[it.node(0,n.state.doc.content.size,r)]}function Et(e){var t,n,r=ke(e.state);if(!r||S.ie&&e.mouseDown)e.cursorWrapper=null;else{var o,i=e.state.selection.visible,a=e.state.storedMarks||r.marks();e.cursorWrapper&&Ur.Mark.sameSet(e.cursorWrapper.deco.spec.marks,a)&&"\ufeff"==e.cursorWrapper.dom.textContent&&e.cursorWrapper.deco.spec.visible==i?e.cursorWrapper.deco.pos!=r.pos&&(o=e.cursorWrapper.dom):(t=i,(n=document.createElement("span")).textContent="\ufeff",t||(n.style.position="absolute",n.style.left="-100000px"),o=n),o&&(e.cursorWrapper={dom:o,deco:it.widget(r.pos,o,{isCursorWrapper:!0,marks:a,raw:!0,visible:i})})}}function xt(t){return!t.someProp("editable",function(e){return!1===e(t.state)})}Ct.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},wt.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ve(this),this._props=e,this.updateState(e.state)},wt.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},wt.prototype.updateState=function(e){var t=this,n=this.state;if(this.state=e,n.plugins!=e.plugins&&Ve(this),this.domObserver.flush(),!this.inDOMChange||!this.inDOMChange.stateUpdated(e)){var r=this.editable;this.editable=xt(this),Et(this);var o=bt(this),i=kt(this),a=n.config!=e.config?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",s=!this.docView.matchesNode(e.doc,i,o),l=s||!e.selection.eq(n.selection)||this.selectionReader.domChanged(),c="preserve"==a&&l&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=e.dom.ownerDocument,a=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var l=e.root.elementFromPoint(a,s);if(l!=e.dom&&e.dom.contains(l)){var c=l.getBoundingClientRect();if(c.top>=o-20){t=l,n=c.top;break}}}for(var u=[],p=e.dom;p&&(u.push({dom:p,top:p.scrollTop,left:p.scrollLeft}),p!=i.body);p=f(p));return{refDOM:t,refTop:n,stack:u}}(this);if(l&&(this.domObserver.stop(),s&&(this.docView.update(e.doc,i,o,this)||(this.docView.destroy(),this.docView=_(e.doc,i,o,this.dom,this)),this.selectionReader.clearDOMState()),he(this),this.domObserver.start()),r!=this.editable&&this.selectionReader.editableChanged(),this.updatePluginViews(n),"reset"==a)this.dom.scrollTop=0;else if("to selection"==a){var u=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(e){return e(t)})||(e.selection instanceof Jr.NodeSelection?p(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),u):p(this,this.coordsAtPos(e.selection.head),u))}else c&&function(e){for(var t=e.refDOM,n=e.refTop,r=e.stack,o=t?t.getBoundingClientRect().top:0,i=0==o?0:o-n,a=0;a<r.length;a++){var s=r[a],l=s.dom,c=s.top,u=s.left;l.scrollTop!=c+i&&(l.scrollTop=c+i),l.scrollLeft!=u&&(l.scrollLeft=u)}}(c)}},wt.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},wt.prototype.updatePluginViews=function(e){var t=this.state.plugins;if(e&&e.plugins==t)for(var n=0;n<this.pluginViews.length;n++){var r=this.pluginViews[n];r.update&&r.update(this,e)}else{this.destroyPluginViews();for(var o=0;o<t.length;o++){var i=t[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},wt.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var a=o[i].props[e];if(null!=a&&(n=t?t(a):a))return n}},wt.prototype.hasFocus=function(){return this.root.activeElement==this.dom},wt.prototype.focus=function(){this.domObserver.stop(),he(this,!0),this.domObserver.start(),this.editable&&this.dom.focus()},Ct.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return this._root=t;return e||document},wt.prototype.posAtCoords=function(e){var t=u(this,e);return this.inDOMChange&&t&&(t.pos=this.inDOMChange.mapping.map(t.pos),-1!=t.inside&&(t.inside=this.inDOMChange.mapping.map(t.inside))),t},wt.prototype.coordsAtPos=function(e){return this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e)),d(this,e)},wt.prototype.domAtPos=function(e){return this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e)),this.docView.domFromPos(e)},wt.prototype.nodeDOM=function(e){this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e));var t=this.docView.descAt(e);return t?t.nodeDOM:null},wt.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return this.inDOMChange&&(r=this.inDOMChange.mapping.map(r)),r},wt.prototype.endOfTextblock=function(e,t){return M(this,t||this.state,e)},wt.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.inDOMChange&&e.inDOMChange.destroy(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t])}(this),this.destroyPluginViews(),this.selectionReader.destroy(),this.mounted?(this.docView.update(this.state.doc,[],bt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},wt.prototype.dispatchEvent=function(e){var t,n;ze(t=this,n=e)||!Le[n.type]||!t.editable&&n.type in Be||Le[n.type](t,n)},wt.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(wt.prototype,Ct),t.EditorView=wt,t.Decoration=it,t.DecorationSet=ct,t.__serializeForClipboard=De,t.__parseFromClipboard=Te});v(No);var Ro=No.EditorView,Po=No.Decoration,Fo=No.DecorationSet,_o=(No.__serializeForClipboard,No.__parseFromClipboard,new Zr("common")),Io={name:"common",plugin:new Yr({key:_o,state:{init:function(){return{editorHasFocus:!1,hideInlineToolbar:!1}},apply:function(e,t){var n=l({},t),r=e.getMeta("EDITOR_FOCUSED");return void 0!==r&&(n.editorHasFocus=r),n.hideInlineToolbar=e.getMeta("HIDE_MODALS"),n}},props:{handleDOMEvents:{focus:function(e){var t=e.state;return(0,e.dispatch)(t.tr.setMeta("EDITOR_FOCUSED",!0)),!1},blur:function(e){var t=e.state;return(0,e.dispatch)(t.tr.setMeta("EDITOR_FOCUSED",!1)),!1}},decorations:function(e){var t=e&&_o.getState(e),n=t.editorHasFocus,r=t.hideInlineToolbar;if(!e.selection.empty&&n&&!r){var o=e.selection,i=o.$from,a=o.$to;return Fo.create(e.doc,[Po.inline(i.pos,a.pos,{class:"nib-selected",style:"position: relative;"})])}}}}),keymaps:{},schema:{nodes:["doc","paragraph","text"]}},Lo={"mod-/":function(e,t){t(e.tr.setMeta("SHOW_HELP_OVERLAY",!0))}},Bo={help:{key:"mod-/",label:"Help"}},Vo={plugins:{options:"block inline link list image table help",image:{uploadCallback:function(e){}}},toolbar:{options:"top inline",top:{options:"block inline link list image table history help",block:{options:"p h1 h2 h3 h4 h5 h6",grouped:!0},inline:{options:"strong em underline strike subsup"}},inline:{options:"block inline",block:{options:"p h1 h2",grouped:!1},inline:{options:"strong em underline"}}}},zo=I.createContext(Vo),jo=new Zr("help"),$o=new Yr({key:jo,state:{init:function(){return{helpVisible:!1}},apply:function(e,t){return e.getMeta("SHOW_HELP_OVERLAY")?{helpVisible:!0}:e.getMeta("HIDE_HELP_OVERLAY")?{helpVisible:!1}:t}}}),Wo=function(e){function i(){var e,n;a(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=f(this,(e=d(i)).call.apply(e,[this].concat(r)))).hideHelpOverlay=function(){var e=n.props.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("HIDE_HELP_OVERLAY",!0))},n}return c(i,w.PureComponent),s(i,[{key:"render",value:function(){var e=this,t=this.context.config.plugins,n=Ss(t.options);return I.createElement(Ye,{hideOverlay:this.hideHelpOverlay,render:function(){return I.createElement(Ho,{onClick:e.stopPropagation},I.createElement(Uo,null,I.createElement(Ko,null,"Help"),I.createElement(Jo,{onClick:e.hideHelpOverlay})),I.createElement(Go,null,I.createElement(Xo,null,I.createElement(qo,null,"Keyboard Shortcuts"),n.map(function(e){var t=e.name,n=e.keymaps;return I.createElement(w.Fragment,{key:"plugin-keymap-".concat(t)},n.map(function(e){var t=e.key,n=e.label;return I.createElement(Yo,{key:"option-key-".concat(t)},I.createElement("span",null,n),I.createElement("span",null,function(e){var t="⌘";"Windows"===So()&&(t="^");var n=e.replace("mod",t);return n=(n=(n=n.replace(/-/g," + ")).replace("shift","⇧")).replace("alt","⌥")}(t)))}))}))))}})}}]),i}();Wo.contextType=zo;var Ho=Ie("div",{target:"e1vks40b0"})("background-color:white;color:#212121;font-size:16px;min-width:372px;border-radius:2px;"),Uo=Ie("div",{target:"e1vks40b1"})("box-shadow:rgb(235,236,240) 0px 2px 0px;padding:12px 24px;display:flex;justify-content:space-between;align-items:center;"),Ko=Ie("div",{target:"e1vks40b2"})("font-size:20px;"),qo=Ie("div",{target:"e1vks40b3"})("font-weight:bold;padding:0px 24px 10px;"),Jo=Ie($e.Cross,{target:"e1vks40b4"})("cursor:pointer;"),Go=Ie("div",{target:"e1vks40b5"})("padding:20px 0;"),Xo=Ie("div",{target:"e1vks40b6"})("height:256px;overflow:scroll;"),Yo=Ie("div",{target:"e1vks40b7"})("padding:4px 24px;display:flex;justify-content:space-between;"),Zo={name:"help",KeymapInfo:Bo,keymaps:Lo,overlays:[{condition:function(e){var t=jo.getState(e);return t&&t.helpVisible},component:Wo}],plugin:$o,toolbarComponent:function(e){function i(){var e,n;a(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=f(this,(e=d(i)).call.apply(e,[this].concat(r)))).showHelpOverlay=function(){var e=n.props.app_params.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("SHOW_HELP_OVERLAY",!0))},n}return c(i,w.PureComponent),s(i,[{key:"render",value:function(){return I.createElement(Le,{onClick:this.showHelpOverlay,title:Oo(Bo.help)},I.createElement($e.Question,null))}}]),i}()},Qo=function(){};Qo.prototype.append=function(e){return e.length?(e=Qo.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},Qo.prototype.prepend=function(e){return e.length?Qo.from(e).append(this):this},Qo.prototype.appendInner=function(e){return new ti(this,e)},Qo.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),t<=e?Qo.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},Qo.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},Qo.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},Qo.prototype.map=function(n,e,t){void 0===e&&(e=0),void 0===t&&(t=this.length);var r=[];return this.forEach(function(e,t){return r.push(n(e,t))},e,t),r},Qo.from=function(e){return e instanceof Qo?e:e&&e.length?new ei(e):Qo.empty};var ei=function(t){function n(e){t.call(this),this.values=e}t&&(n.__proto__=t);var e={length:{},depth:{}};return((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.flatten=function(){return this.values},n.prototype.sliceInner=function(e,t){return 0==e&&t==this.length?this:new n(this.values.slice(e,t))},n.prototype.getInner=function(e){return this.values[e]},n.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},n.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;n<=o;o--)if(!1===e(this.values[o],r+o))return!1},n.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new n(this.values.concat(e.flatten()))},n.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new n(e.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(n.prototype,e),n}(Qo);Qo.empty=new ei([]);var ti=function(n){function r(e,t){n.call(this),this.left=e,this.right=t,this.length=e.length+t.length,this.depth=Math.max(e.depth,t.depth)+1}return n&&(r.__proto__=n),((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},r.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},r.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(o<n&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},r.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(o<t&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},r.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):n<=e?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},r.prototype.leafAppend=function(e){var t=this.right.leafAppend(e);if(t)return new r(this.left,t)},r.prototype.leafPrepend=function(e){var t=this.left.leafPrepend(e);if(t)return new r(t,this.right)},r.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new r(this.left,new r(this.right,e)):new r(this,e)},r}(Qo),ni=Qo,ri=g(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=ni)&&"object"==typeof n&&"default"in n?n.default:n,v=function(e,t){this.items=e,this.eventCount=t};v.prototype.popEvent=function(e,t){var o=this;if(0==this.eventCount)return null;for(var i,a,s=this.items.length;;s--){if(o.items.get(s-1).selection){--s;break}}t&&(i=this.remapping(s,this.items.length),a=i.maps.length);var l,c,u=e.tr,p=[],d=[];return this.items.forEach(function(e,t){if(!e.step)return i||(i=o.remapping(s,t+1),a=i.maps.length),a--,void d.push(e);if(i){d.push(new g(e.map));var n,r=e.step.map(i.slice(a));r&&u.maybeStep(r).doc&&(n=u.mapping.maps[u.mapping.maps.length-1],p.push(new g(n,null,null,p.length+d.length))),a--,n&&i.appendMap(n,a)}else u.maybeStep(e.step);return e.selection?(l=i?e.selection.map(i.slice(a)):e.selection,c=new v(o.items.slice(0,s).append(d.reverse().concat(p)),o.eventCount-1),!1):void 0},this.items.length,0),{remaining:c,transform:u,selection:l}},v.prototype.addTransform=function(e,t,n,r){for(var o=[],i=this.eventCount,a=this.items,s=!r&&a.length?a.get(a.length-1):null,l=0;l<e.steps.length;l++){var c,u=e.steps[l].invert(e.docs[l]),p=new g(e.mapping.maps[l],u,t);(c=s&&s.merge(p))&&(p=c,l?o.pop():a=a.slice(0,a.length-1)),o.push(p),t&&(i++,t=null),r||(s=p)}var d,f,h,m=i-n.depth;return y<m&&(f=m,(d=a).forEach(function(e,t){if(e.selection&&0==f--)return h=t,!1}),a=d.slice(h),i-=m),new v(a.append(o),i)},v.prototype.remapping=function(r,e){var o=new qr.Mapping;return this.items.forEach(function(e,t){var n=null!=e.mirrorOffset&&t-e.mirrorOffset>=r?n=o.maps.length-e.mirrorOffset:null;o.appendMap(e.map,n)},r,e),o},v.prototype.addMaps=function(e){return 0==this.eventCount?this:new v(this.items.append(e.map(function(e){return new g(e)})),this.eventCount)},v.prototype.rebased=function(i,e){if(!this.eventCount)return this;var a=[],t=Math.max(0,this.items.length-e),s=i.mapping,l=i.steps.length,c=this.eventCount;this.items.forEach(function(e){e.selection&&c--},t);var u=e;this.items.forEach(function(e){var t=s.getMirror(--u);if(null!=t){l=Math.min(l,t);var n=s.maps[t];if(e.step){var r=i.steps[t].invert(i.docs[t]),o=e.selection&&e.selection.map(s.slice(u,t));o&&c++,a.push(new g(n,r,o))}else a.push(new g(n))}},t);for(var n=[],r=e;r<l;r++)n.push(new g(s.maps[r]));var o=this.items.slice(0,t).append(n).append(a),p=new v(o,c);return 500<p.emptyItemCount()&&(p=p.compress(this.items.length-a.length)),p},v.prototype.emptyItemCount=function(){var t=0;return this.items.forEach(function(e){e.step||t++}),t},v.prototype.compress=function(l){void 0===l&&(l=this.items.length);var c=this.remapping(0,l),u=c.maps.length,p=[],d=0;return this.items.forEach(function(e,t){if(l<=t)p.push(e),e.selection&&d++;else if(e.step){var n=e.step.map(c.slice(u)),r=n&&n.getMap();if(u--,r&&c.appendMap(r,u),n){var o=e.selection&&e.selection.map(c.slice(u));o&&d++;var i,a=new g(r.invert(),n,o),s=p.length-1;(i=p.length&&p[s].merge(a))?p[s]=i:p.push(a)}}else e.map&&u--},this.items.length,0),new v(r.from(p.reverse()),d)},v.empty=new v(r.empty,0);var g=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};g.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new g(t.getMap().invert(),t,this.selection)}};var u=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},y=20;function c(e){var o=[];return e.forEach(function(e,t,n,r){return o.push(n,r)}),o}function p(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function o(e,t,n,r){var o=d(t),i=f.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,o);if(a){var s=a.selection.resolve(a.transform.doc),l=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),i,o),c=new u(r?l:a.remaining,r?a.remaining:l,null,0);n(a.transform.setSelection(s).setMeta(f,{redo:r,historyState:c}).scrollIntoView())}}var i=!1,a=null;function d(e){var t=e.plugins;if(a!=t){i=!1,a=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){i=!0;break}}return i}var f=new Jr.PluginKey("history"),h=new Jr.PluginKey("closeHistory");t.HistoryState=u,t.closeHistory=function(e){return e.setMeta(h,!0)},t.history=function(r){return r={depth:r&&r.depth||100,newGroupDelay:r&&r.newGroupDelay||500},new Jr.Plugin({key:f,state:{init:function(){return new u(v.empty,v.empty,null,0)},apply:function(e,t,n){return function(e,t,n,r){var o,i=n.getMeta(f);if(i)return i.historyState;n.getMeta(h)&&(e=new u(e.done,e.undone,null,0));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(f))return a.getMeta(f).redo?new u(e.done.addTransform(n,null,r,d(t)),e.undone,c(n.mapping.maps[n.steps.length-1]),e.prevTime):new u(e.done,e.undone.addTransform(n,null,r,d(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new u(e.done.rebased(n,o),e.undone.rebased(n,o),p(e.prevRanges,n.mapping),e.prevTime):new u(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),p(e.prevRanges,n.mapping),e.prevTime);var s=e.prevTime<(n.time||0)-r.newGroupDelay||!a&&!function(e,r){if(!r)return!1;if(!e.docChanged)return!0;var o=!1;return e.mapping.maps[0].forEach(function(e,t){for(var n=0;n<r.length;n+=2)e<=r[n+1]&&t>=r[n]&&(o=!0)}),o}(n,e.prevRanges),l=a?p(e.prevRanges,n.mapping):c(n.mapping.maps[n.steps.length-1]);return new u(e.done.addTransform(n,s?t.selection.getBookmark():null,r,d(t)),v.empty,l,n.time)}(t,n,e,r)}},config:r})},t.undo=function(e,t){var n=f.getState(e);return!(!n||0==n.done.eventCount||(t&&o(n,e,t,!1),0))},t.redo=function(e,t){var n=f.getState(e);return!(!n||0==n.undone.eventCount||(t&&o(n,e,t,!0),0))},t.undoDepth=function(e){var t=f.getState(e);return t?t.done.eventCount:0},t.redoDepth=function(e){var t=f.getState(e);return t?t.undone.eventCount:0}});v(ri);ri.HistoryState,ri.closeHistory;var oi=ri.history,ii=ri.undo,ai=ri.redo,si=(ri.undoDepth,ri.redoDepth,{"mod-shift-z":function(e,t){return ai(e,t)},"mod-z":function(e,t){return ii(e,t)}}),li={redo:{key:"mod-shift-Z",label:"Redo"},undo:{key:"mod-Z",label:"Undo"}},ci=function(e){function i(){var e,r;a(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=f(this,(e=d(i)).call.apply(e,[this].concat(n)))).undo=function(){var e=r.props.app_params.view,t=e.state,n=e.dispatch;ii(t,n)},r.redo=function(){var e=r.props.app_params.view,t=e.state,n=e.dispatch;ai(t,n)},r}return c(i,w.PureComponent),s(i,[{key:"render",value:function(){return I.createElement(I.Fragment,null,I.createElement(Le,{onClick:this.undo,title:Oo(li.undo)},I.createElement($e.Undo,null)),I.createElement(Fr,{type:"toolbar"}),I.createElement(Le,{onClick:this.redo,title:Oo(li.redo)},I.createElement($e.Redo,null)))}}]),i}(),ui=oi(),pi={name:"history",keymaps:si,KeymapInfo:li,toolbarComponent:ci,plugin:ui},di=function(){function r(e,t){var n=this;a(this,r),this.dom=document.createElement("span"),this.dom.style.position="relative",this.dom.style.display="inline-block",this.img=document.createElement("img"),this.img.src=e.attrs.src,this.img.style=e.attrs.style,this.dom.appendChild(this.img),this.img.addEventListener("mousedown",function(e){n.img.style.outline="2px solid #065FD4",n.div1=document.createElement("div"),n.div1.style="height: 10px; width: 10px; position: absolute;left: 0px;top: 0px; background-color: #065FD4;",n.dom.appendChild(n.div1),n.div2=document.createElement("div"),n.div2.style="height: 10px; width: 10px; position: absolute;right: 0px;top: 0px; background-color: #065FD4;",n.dom.appendChild(n.div2),n.div3=document.createElement("div"),n.div3.style="height: 10px; width: 10px; position: absolute;left: 0px;bottom: 0px; background-color: #065FD4;",n.dom.appendChild(n.div3),n.div4=document.createElement("div"),n.div4.style="height: 10px; width: 10px; position: absolute;right: 0px;bottom: 0px; background-color: #065FD4;",n.dom.appendChild(n.div4),e.stopPropagation()})}return s(r,[{key:"stopEvent",value:function(){return!0}}]),r}(),fi=new Zr("image"),hi=new Yr({key:fi,state:{init:function(){return{imageToolbarVisible:!1}},apply:function(e,t){return e.getMeta("SHOW_IMAGE_TOOLBAR")?{imageToolbarVisible:!0}:e.getMeta("HIDE_IMAGE_TOOLBAR")?{imageToolbarVisible:!1}:t}},props:{nodeViews:{image:function(e,t){return new di(e,t)}}}}),mi=function(e){function o(){var e,c;a(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(c=f(this,(e=d(o)).call.apply(e,[this].concat(n)))).state={uploading:!1},c.handleImageInputChange=function(e){var t=e.target.files;c.insertImage(t[0])},c.insertImage=function(e){c.setState({uploading:!0}),(0,c.context.config.plugins.image.uploadCallback)(e).then(function(e){var t=e.link;if(c.setState({uploading:!1}),t){var n=c.props.view,r=n.state,o=n.dispatch,i=r.selection,a=i.$from,s=i.$to,l=r.schema.nodes.image;o(r.tr.replaceRangeWith(a.pos,s.pos,l.create({src:t})))}}).finally(function(){c.hideImageOverlay()})},c.stopDefault=function(e){e.preventDefault(),e.stopPropagation()},c.onImageDrop=function(e){c.stopDefault(e);for(var t=e.dataTransfer,n=t.items,r=t.files,o=n||r,i=!!n,a=0;a<o.length;a++)if((!i||"file"===o[a].kind)&&o[a].type.match("^image/")){var s=i?o[a].getAsFile():o[a];c.insertImage(s)}},c.hideImageOverlay=function(){var e=c.props.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("HIDE_IMAGE_TOOLBAR",!0))},c}return c(o,w.PureComponent),s(o,[{key:"render",value:function(){var e=this,t=this.state.uploading;return I.createElement(Ye,{hideOverlay:this.hideImageOverlay,render:function(){return I.createElement(vi,{onClick:e.stopPropagation},I.createElement("label",{htmlFor:"file"},I.createElement(bi,{type:"file",id:"file",onChange:e.handleImageInputChange}),I.createElement(gi,{onDragEnter:e.stopDefault,onDragOver:e.stopDefault,onDrop:e.onImageDrop,uploading:t},I.createElement(yi,null,"Drag and Drop the Image ",I.createElement("br",null)," or ",I.createElement("br",null)," Click to Upload"),I.createElement(wi,{uploading:t}))))}})}}]),o}();mi.contextType=zo;var vi=Ie("div",{target:"e1b3e1kg0"})("background-color:white;min-height:240px;min-width:300px;padding:20px;"),gi=Ie("div",{target:"e1b3e1kg1"})("align-items:center;background:",function(e){return e.theme.imageUploadOverlay.backgroundColor},";border:1px dashed ",function(e){var t=e.theme;return e.uploading?t.imageUploadOverlay.backgroundColor.borderActiveColor:t.imageUploadOverlay.backgroundColor.borderColor},";display:flex;flex-direction:column;height:",function(e){return e.theme.imageUploadOverlay.height},";justify-content:center;width:",function(e){return e.theme.imageUploadOverlay.width},";> span{margin-bottom:10px;}"),yi=Ie("span",{target:"e1b3e1kg2"})("margin-top:50px;text-align:center;"),bi=Ie("input",{target:"e1b3e1kg3"})("display:none;"),wi=Ie(Ir,{target:"e1b3e1kg4"})("margin-top:10px;visibility:",function(e){return e.uploading?"visible":"hidden"},";"),Ci={name:"image",overlays:[{condition:function(e){var t=fi.getState(e);return t&&t.imageToolbarVisible},component:mi}],plugin:hi,schema:{nodes:["image"]},toolbarComponent:function(e){function i(){var e,n;a(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=f(this,(e=d(i)).call.apply(e,[this].concat(r)))).showImageOverlay=function(){var e=n.props.app_params.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("SHOW_IMAGE_TOOLBAR",!0))},n}return c(i,w.PureComponent),s(i,[{key:"render",value:function(){return I.createElement(Le,{onClick:this.showImageOverlay,title:"Image"},I.createElement($e.Image,null))}}]),i}()},ki=function(r,o){return function(e,t){var n=e.schema.marks[r];return to(n,o)(e,t)}},Ei={"mod-b":function(e,t){return ki("strong")(e,t)},"mod-i":function(e,t){return ki("em",{level:1})(e,t)},"mod-u":function(e,t){return ki("underline",{level:2})(e,t)},"mod-shift-s":function(e,t){return ki("strike",{level:2})(e,t)}},xi={strong:{key:"mod-B",label:"Bold"},em:{key:"mod-I",label:"Italic"},underline:{key:"mod-U",label:"Underline"},strike:{key:"mod-shift-S",label:"Strikethrough"}},Si=new Zr("inline"),Oi=function(e){var t=e.selection,n=t.$from,r=t.$to,o=[];return t.empty&&(o=p(e.storedMarks||r.marks())),e.doc.nodesBetween(n.pos,r.pos,function(e){e.marks&&(o=p(o).concat(p(e.marks)))}),o},Mi=new Yr({key:Si,state:{init:function(e,t){return{activeMarks:Oi(t)}},apply:function(e,t,n,r){var o=n.storedMarks&&n.storedMarks.length,i=r.storedMarks&&r.storedMarks.length;return e.docChanged||n.selection!==r.selection||o!==i?{activeMarks:Oi(r)}:t}}}),Ai={strong:"Bold",em:"Italic",underline:"Underline",strike:"Strike"},Di={name:"inline",keymaps:Ei,KeymapInfo:xi,toolbarComponent:function(e){function o(){var e,p;a(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(p=f(this,(e=d(o)).call.apply(e,[this].concat(n)))).getActiveMarks=function(){var e=p.props.app_params.view.state,t=Si.getState(e);return t&&t.activeMarks},p.isSubsupMarkActive=function(e,t){var n=p.props.app_params.view.state.schema.marks;return e.find(function(e){return e.type===n.subsup&&e.attrs.type===t})},p.toggleMarkofType=function(e){var t=e.currentTarget.getAttribute("name"),n=p.props.app_params.view,r=n.state,o=n.dispatch,i=r.schema.marks[t];to(i)(r,o)},p.toggleSupSubMark=function(e,t){var n=p.props.app_params.view,r=n.state,o=n.dispatch,i=r.schema,a=r.selection,s=r.tr,l=a.$from,c=a.$to,u=i.marks.subsup;p.isSubsupMarkActive(p.getActiveMarks(),e)?o(s.removeMark(l.pos,c.pos,r.schema.marks.subsup)):(p.isSubsupMarkActive(p.getActiveMarks(),t)&&s.removeMark(l.pos,c.pos,r.schema.marks.subsup),s.addMark(l.pos,c.pos,u.create({type:e})),o(s))},p.toggleSupMark=function(){p.toggleSupSubMark("sup","sub")},p.toggleSubMark=function(e){p.toggleSupSubMark("sub","sup")},p}return c(o,w.PureComponent),s(o,[{key:"render",value:function(){var o=this;if(!this.props.app_params.view)return null;var i=this.getActiveMarks(),a=this.props.app_params.view.state.schema.marks,s=this.props.config.options;return I.createElement(I.Fragment,null,["strong","em","underline","strike"].reduce(function(e,t,n){if(0<=s.indexOf(t)){e.length||e.push(I.createElement(Fr,{key:"inlinestyle-separator",type:"toolbar"}));var r=$e[Ai[t]];e.push(I.createElement(w.Fragment,{key:"inlinestyle-".concat(n)},I.createElement(Le,{name:t,onClick:o.toggleMarkofType,selected:a[t].isInSet(i),title:Oo(xi[t])},I.createElement(r,null)),I.createElement(Fr,{type:"toolbar"})))}return e},[]),0<=s.indexOf("subsup")&&I.createElement(I.Fragment,null,I.createElement(Le,{name:"sup",onClick:this.toggleSupMark,selected:this.isSubsupMarkActive(i,"sup"),title:"Superscript"},I.createElement($e.Sup,null)),I.createElement(Fr,{type:"toolbar"}),I.createElement(Le,{name:"sub",onClick:this.toggleSubMark,selected:this.isSubsupMarkActive(i,"sub"),title:"Subscript"},I.createElement($e.Sub,null))))}}]),o}(),plugin:Mi,schema:{marks:["em","strike","strong","subsup","underline"]}},Ti={"mod-k":function(e,t){t(e.tr.setMeta("SHOW_LINK_TOOLBAR",!0))}},Ni={link:{key:"mod-K",label:"Link"}},Ri=new Zr("link"),Pi=function(e){var r,t=e.selection,n=t.$from,o=t.$to,i=e.schema.marks;return e.doc.nodesBetween(n.pos,o.pos,function(e,t){if(e.marks){var n=e.marks.find(function(e){return e.type===i.link});n&&(r={from:t,to:t+e.nodeSize,href:n.attrs.href})}}),r},Fi=new Yr({key:Ri,state:{init:function(e,t){return{link:Pi(t)}},apply:function(e,t,n,r){var o=Pi(r);if(e.getMeta("HIDE_EDIT_LINK_TOOLBAR")||e.getMeta("HIDE_LINK_TOOLBAR"))return{link:o};var i=t.decoration;if(e.getMeta("SHOW_LINK_TOOLBAR")){var a=r.selection,s=a.$from,l=a.$to;if(s.pos===l.pos){var c=document.createElement("span");c.className="nib-link-marker",i=Fo.create(r.doc,[Po.widget(s.pos,c)])}else i=Fo.create(r.doc,[Po.inline(s.pos,l.pos,{class:"nib-link-marker"})]);return{link:o,decoration:i}}return o?(i&&(!t.link||t.link.from===o.from&&t.link.to===o.to)||(i=Fo.create(r.doc,[Po.inline(o.from,o.to,{class:"nib-edit-link-marker"})])),{link:o,decoration:i}):{decoration:i}}},props:{decorations:function(e){return(e&&Ri.getState(e)).decoration}}}),_i=function(e){function i(){var e,o;a(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(o=f(this,(e=d(i)).call.apply(e,[this].concat(n)))).showLinkToolbar=function(){var e=o.props.app_params.view,t=void 0===e?{}:e,n=t.state,r=t.dispatch;t.hasFocus||t.focus(),r(n.tr.setMeta("SHOW_LINK_TOOLBAR",!0))},o.isLinkMarkActive=function(){var e=o.props.app_params.view,t=(e=void 0===e?{}:e).state;if(t){var n=Ri.getState(t);return n&&!!n.link}},o}return c(i,w.PureComponent),s(i,[{key:"render",value:function(){return I.createElement(Le,{name:"link",onClick:this.showLinkToolbar,disabled:this.isLinkMarkActive(),title:Oo(Ni.link)},I.createElement($e.Link,null))}}]),i}(),Ii={elmClassName:"nib-link-marker",component:function(e){function t(e){var u;return a(this,t),(u=f(this,d(t).call(this,e))).updateValue=function(e){u.setState(o({},"".concat(e.target.name),e.target.value))},u.addLink=function(){var e=u.state,t=e.linkText,n=e.href;if(t&&t.length){var r=u.props.view,o=r.state,i=r.dispatch,a=o.tr,s=o.selection,l=s.$from,c=s.$to;i(a.insertText(t,l.pos,c.pos).addMark(l.pos,l.pos+t.length,o.schema.marks.link.create({href:n})).setMeta("SHOW_LINK_TOOLBAR",!1)),r.focus(),u.closeModal()}},u.getSelectedText=function(){var e=u.props.view;if(!e)return"";var t=e.state,n=t.selection,r=n.$from,o=n.$to;return t.doc.textBetween(r.pos,o.pos)},u.handleKeyDown=function(e){"Enter"===e.key&&u.addLink()},u.closeModal=function(){var e=u.props.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("HIDE_LINK_TOOLBAR",!0))},u.state={linkText:u.getSelectedText(),href:"",isMouseDown:!1},u.modalWrapper=I.createRef(),u}return c(t,w.PureComponent),s(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.linkText,r=t.href,o=this.props,i=o.editorWrapper,a=o.marker;return I.createElement(qe,{closeModal:this.closeModal,editorWrapper:i,marker:a,render:function(){return I.createElement(Li,{ref:e.modalWrapper},I.createElement("div",null,I.createElement(We,{autoFocus:!0,label:"Text",name:"linkText",onChange:e.updateValue,onKeyPress:e.handleKeyDown,value:n}),I.createElement(We,{label:"Href",name:"href",onChange:e.updateValue,onKeyPress:e.handleKeyDown,value:r})),I.createElement(Bi,{onClick:e.addLink},"Apply"))}})}}]),t}()},Li=Ie("div",{target:"ey96jxb0"})("align-items:flex-end;background:white;border-radius:4px;display:flex;padding:5px 10px;font-size:14px;"),Bi=Ie(Ve,{target:"ey96jxb1"})("margin:4px 0;"),Vi={elmClassName:"nib-edit-link-marker",component:function(e){function t(e){var r;return a(this,t),(r=f(this,d(t).call(this,e))).updateHref=function(e){r.setState({href:e.target.value})},r.getLink=function(){var e=r.props.view,t=(e=void 0===e?{}:e).state;if(t){var n=Ri.getState(t);return n&&n.link}},r.getActiveLinkMark=function(){var e=r.props.view;if(e){var t=r.getLink();if(t)return e.domAtPos(t.from).node.querySelector("a")}},r.updateLink=function(){var e=r.getLink(),t=r.props.view,n=t.state;(0,t.dispatch)(n.tr.removeMark(e.from,e.to,n.schema.marks.link).addMark(e.from,e.to,n.schema.marks.link.create({href:r.state.href})).setSelection(new Gr(n.doc.resolve(e.to)))),r.closeModal()},r.unLink=function(){var e=r.getLink(),t=r.props.view,n=t.state;(0,t.dispatch)(n.tr.removeMark(e.from,e.to,n.schema.marks.link)),t.focus(),r.closeModal()},r.closeModal=function(){var e=r.props.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("HIDE_EDIT_LINK_TOOLBAR",!0))},r.state={href:"",isMouseDown:!1},r}return c(t,w.PureComponent),s(t,[{key:"render",value:function(){var e=this,t=this.getLink();if(!t)return null;var n=this.props,r=n.editorWrapper,o=n.marker;return I.createElement(qe,{closeModal:this.closeModal,editorWrapper:r,marker:o,render:function(){return I.createElement(zi,null,I.createElement("label",{htmlFor:"href"},"Href"),I.createElement(We,{name:"href",onChange:e.updateHref,defaultValue:t.href}),I.createElement(Ve,{onClick:e.updateLink},"Apply"),I.createElement(Fr,null),I.createElement(Ve,{onClick:e.unLink},"Unlink"))}})}}]),t}()},zi=Ie("div",{target:"e1vhaqjd0"})("align-items:center;background:white;border-radius:4px;display:flex;padding:5px 10px;font-size:14px;"),ji={name:"link",keymaps:Ti,KeymapInfo:Ni,toolbarComponent:_i,plugin:Fi,schema:{marks:["link"]},modals:[Ii,Vi]},$i=g(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=["ol",0],r=["ul",0],o=["li",0],i={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?n:["ol",{start:e.attrs.order},0]}},a={parseDOM:[{tag:"ul"}],toDOM:function(){return r}},s={parseDOM:[{tag:"li"}],toDOM:function(){return o},defining:!0};function l(e,t){var n={};for(var r in e)n[r]=e[r];for(var o in t)n[o]=t[o];return n}t.orderedList=i,t.bulletList=a,t.listItem=s,t.addListNodes=function(e,t,n){return e.append({ordered_list:l(i,{content:"list_item+",group:n}),bullet_list:l(a,{content:"list_item+",group:n}),list_item:l(s,{content:t})})},t.wrapInList=function(u,p){return function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=!1,s=i;if(!i)return!1;if(2<=i.depth&&r.node(i.depth-1).type.compatibleContent(u)&&0==i.startIndex){if(0==r.index(i.depth-1))return!1;var l=e.doc.resolve(i.start-2);s=new Ur.NodeRange(l,l,i.depth),i.endIndex<i.parent.childCount&&(i=new Ur.NodeRange(r,e.doc.resolve(o.end(i.depth)),i.depth)),a=!0}var c=qr.findWrapping(s,u,p,i);return!!c&&(t&&t(function(e,t,n,r,o){for(var i=Ur.Fragment.empty,a=n.length-1;0<=a;a--)i=Ur.Fragment.from(n[a].type.create(n[a].attrs,i));e.step(new qr.ReplaceAroundStep(t.start-(r?2:0),t.end,t.start,t.end,new Ur.Slice(i,0,0),n.length,!0));for(var s=0,l=0;l<n.length;l++)n[l].type==o&&(s=l+1);for(var c=n.length-s,u=t.start+n.length-(r?2:0),p=t.parent,d=t.startIndex,f=t.endIndex,h=!0;d<f;d++,h=!1)!h&&qr.canSplit(e.doc,u,c)&&(e.split(u,c),u+=2*c),u+=p.child(d).nodeSize;return e}(e.tr,i,c,a,u).scrollIntoView()),!0)}},t.splitListItem=function(h){return function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=n.node;if(i&&i.isBlock||r.depth<2||!r.sameParent(o))return!1;var a=r.node(-1);if(a.type!=h)return!1;if(0==r.parent.content.size){if(2==r.depth||r.node(-3).type!=h||r.index(-2)!=r.node(-2).childCount-1)return!1;if(t){for(var s=Ur.Fragment.empty,l=0<r.index(-1),c=r.depth-(l?1:2);c>=r.depth-3;c--)s=Ur.Fragment.from(r.node(c).copy(s));s=s.append(Ur.Fragment.from(h.createAndFill()));var u=e.tr.replace(r.before(l?null:-1),r.after(-3),new Ur.Slice(s,l?3:2,2));u.setSelection(e.selection.constructor.near(u.doc.resolve(r.pos+(l?3:2)))),t(u.scrollIntoView())}return!0}var p=o.pos==r.end()?a.defaultContentType(0):null,d=e.tr.delete(r.pos,o.pos),f=p&&[null,{type:p}];return!!qr.canSplit(d.doc,r.pos,2,f)&&(t&&t(d.split(r.pos,2,f).scrollIntoView()),!0)}},t.liftListItem=function(d){return function(e,t){var n,r,o,i,a,s,l=e.selection,c=l.$from,u=l.$to,p=c.blockRange(u,function(e){return e.childCount&&e.firstChild.type==d});return!!p&&(!t||(c.node(p.depth-1).type==d?(n=t,r=d,o=p,i=e.tr,a=o.end,s=o.$to.end(o.depth),a<s&&(i.step(new qr.ReplaceAroundStep(a-1,s,a,s,new Ur.Slice(Ur.Fragment.from(r.create(null,o.parent.copy())),1,0),1,!0)),o=new Ur.NodeRange(i.doc.resolve(o.$from.pos),i.doc.resolve(s),o.depth)),n(i.lift(o,qr.liftTarget(o)).scrollIntoView()),!0):function(e,t,n){for(var r=e.tr,o=n.parent,i=n.end,a=n.endIndex-1,s=n.startIndex;s<a;a--)i-=o.child(a).nodeSize,r.delete(i-1,i+1);var l=r.doc.resolve(n.start),c=l.nodeAfter,u=0==n.startIndex,p=n.endIndex==o.childCount,d=l.node(-1),f=l.index(-1);if(!d.canReplace(f+(u?0:1),f+1,c.content.append(p?Ur.Fragment.empty:Ur.Fragment.from(o))))return!1;var h=l.pos,m=h+c.nodeSize;return r.step(new qr.ReplaceAroundStep(h-(u?1:0),m+(p?1:0),h+1,m-1,new Ur.Slice((u?Ur.Fragment.empty:Ur.Fragment.from(o.copy(Ur.Fragment.empty))).append(p?Ur.Fragment.empty:Ur.Fragment.from(o.copy(Ur.Fragment.empty))),u?0:1,p?0:1),u?0:1)),t(r.scrollIntoView()),!0}(e,t,p)))}},t.sinkListItem=function(h){return function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o,function(e){return e.childCount&&e.firstChild.type==h});if(!i)return!1;var a=i.startIndex;if(0==a)return!1;var s=i.parent,l=s.child(a-1);if(l.type!=h)return!1;if(t){var c=l.lastChild&&l.lastChild.type==s.type,u=Ur.Fragment.from(c?h.create():null),p=new Ur.Slice(Ur.Fragment.from(h.create(null,Ur.Fragment.from(s.copy(u)))),c?3:1,0),d=i.start,f=i.end;t(e.tr.step(new qr.ReplaceAroundStep(d-(c?3:1),f,d,f,p,1,!0)).scrollIntoView())}return!0}}});v($i);$i.orderedList,$i.bulletList,$i.listItem,$i.addListNodes;var Wi=$i.wrapInList,Hi=$i.splitListItem,Ui=$i.liftListItem,Ki=$i.sinkListItem,qi=function(e,t){var n=e.state,r=e.dispatch,o=n.selection.$anchor,i=n.schema.nodes,a=o.node(o.depth-2),s=a&&a.type.name,l=o.node(o.depth-1);return(l&&l.type.name)===i.listItem.name?s!==t?(Ui(i.listItem)(e.state,e.dispatch),Wi(i[t])(e.state,r)):Ji(i.listItem,e):Wi(i[t])(n,r)},Ji=function(e,t){for(var n=t.state.selection.$from.depth;1<n;)Ui(e)(t.state,t.dispatch),n=t.state.selection.$from.depth;return!0},Gi={"mod-shift-7":function(e,t){return qi("orderedList")(e,t)},"mod-shift-8":function(e,t){return qi("bulletList")(e,t)},Enter:function(e,t){return r=t,o=(n=e).selection.$anchor,i=n.schema.nodes,(a=o.node(o.depth-1)).type===i.listItem&&(0<a.textContent.length?Hi(i.listItem)(n,r):Ui(i.listItem)(n,r));var n,r,o,i,a},Tab:function(e,t){return Ki(e.schema.nodes.listItem)(e,t)},"shift-Tab":function(e,t){return Ui(e.schema.nodes.listItem)(e,t)}},Xi={orderedList:{key:"mod-shift-7",label:"Numbered List"},bulletList:{key:"mod-shift-8",label:"Bullet List"}},Yi=function(e){var t=e.schema.nodes,n=t.bulletList,r=t.orderedList,o=e.selection.$from.node(-2);if(o&&(o.type===n||o.type===r))return o.type},Zi=new Zr("list"),Qi=new Yr({key:Zi,state:{init:function(e,t){return{selectedListType:Yi(t)}},apply:function(e,t,n,r){return e.docChanged||n.selection!==r.selection?{selectedListType:Yi(r)}:t}}}),ea={name:"list",keymaps:Gi,KeymapInfo:Xi,toolbarComponent:function(e){function i(){var e,o;a(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(o=f(this,(e=d(i)).call.apply(e,[this].concat(n)))).toggleList=function(e){var t=e.currentTarget.getAttribute("name"),n=o.props.app_params.view;qi(n,t)},o.getSelectedListType=function(){var e=o.props.app_params.view,t=(e=void 0===e?{}:e).state;if(t){var n=Zi.getState(t),r=n&&n.selectedListType;return r&&r.name}},o}return c(i,w.PureComponent),s(i,[{key:"render",value:function(){var e=this.getSelectedListType();return I.createElement(I.Fragment,null,I.createElement(Le,{name:"bulletList",onClick:this.toggleList,selected:"bulletList"===e,title:Oo(Xi.bulletList)},I.createElement($e.ListBulleted,null)),I.createElement(Fr,{type:"toolbar"}),I.createElement(Le,{name:"orderedList",onClick:this.toggleList,selected:"orderedList"===e,title:Oo(Xi.orderedList)},I.createElement($e.ListNumbered,null)))}}]),i}(),plugin:Qi,schema:{nodes:["heading","bulletList","listItem","orderedList"]}},ta=g(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var S={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var n=/Edge\/(\d+)/.exec(navigator.userAgent),r=/MSIE \d/.test(navigator.userAgent),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);S.mac=/Mac/.test(navigator.platform);var i=S.ie=!!(r||o||n);S.ie_version=r?document.documentMode||6:o?+o[1]:n?+n[1]:null,S.gecko=!i&&/gecko\/(\d+)/i.test(navigator.userAgent),S.gecko_version=S.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var a=!i&&/Chrome\/(\d+)/.exec(navigator.userAgent);S.chrome=!!a,S.chrome_version=a&&+a[1],S.ios=!i&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),S.android=/Android \d/.test(navigator.userAgent),S.webkit=!i&&"WebkitAppearance"in document.documentElement.style,S.safari=/Apple Computer/.test(navigator.vendor),S.webkit_version=S.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var h=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},v=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},m=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},g=function(e,t,n,r){return n&&(l(e,t,n,r,-1)||l(e,t,n,r,1))},s=/^(img|br|input|textarea|hr)$/i;function l(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:c(e))||3==e.nodeType&&"\ufeff"==e.nodeValue){var i=e.parentNode;if(1!=i.nodeType||(void 0,(a=e.pmViewDesc)&&a.node&&a.node.isBlock)||s.test(e.nodeName)||"false"==e.contentEditable)return!1;t=h(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(o<0?-1:0)],t=o<0?c(e):0}}var a}function c(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}var O=function(e){var t=e.isCollapsed;return t&&S.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function f(e,t){return"number"==typeof e?e:e[t]}function y(e,t,n){for(var r,o=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument,s=a.defaultView,l=n||e.dom;l;l=v(l))if(1==l.nodeType){var c=l==a.body||1!=l.nodeType,u=c?{left:0,right:(r=s).innerWidth,top:0,bottom:r.innerHeight}:l.getBoundingClientRect(),p=0,d=0;if(t.top<u.top+f(o,"top")?d=-(u.top-t.top+f(i,"top")):t.bottom>u.bottom-f(o,"bottom")&&(d=t.bottom-u.bottom+f(i,"bottom")),t.left<u.left+f(o,"left")?p=-(u.left-t.left+f(i,"left")):t.right>u.right-f(o,"right")&&(p=t.right-u.right+f(i,"right")),(p||d)&&(c?s.scrollBy(p,d):(d&&(l.scrollTop+=d),p&&(l.scrollLeft+=p))),c)break}}function b(e,t){for(var n,r,o=2e8,i=0,a=t.top,s=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var u=void 0;if(1==l.nodeType)u=l.getClientRects();else{if(3!=l.nodeType)continue;u=m(l).getClientRects()}for(var p=0;p<u.length;p++){var d=u[p];if(d.top<=a&&d.bottom>=s){a=Math.max(d.bottom,a),s=Math.min(d.top,s);var f=d.left>t.left?d.left-t.left:d.right<t.left?t.left-d.right:0;if(f<o){n=l,r=(o=f)&&3==n.nodeType?{left:d.right<t.left?d.right:d.left,top:t.top}:t,1==l.nodeType&&f&&(i=c+(t.left>=(d.left+d.right)/2?1:0));continue}}!n&&(t.left>=d.right&&t.top>=d.top||t.left>=d.left&&t.top>=d.bottom)&&(i=c+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=C(r,1);if(i.top!=i.bottom&&w(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:b(n,r)}function w(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function u(e,t){var n,r,o=e.root;if(o.caretPositionFromPoint){var i,a=o.caretPositionFromPoint(t.left,t.top);if(a)n=(i=a).offsetNode,r=i.offset}if(!n&&o.caretRangeFromPoint){var s,l=o.caretRangeFromPoint(t.left,t.top);if(l)n=(s=l).startContainer,r=s.startOffset}var c,u,p,d,f=o.elementFromPoint(t.left,t.top+1);if(!f||!e.dom.contains(1!=f.nodeType?f.parentNode:f)){var h=e.dom.getBoundingClientRect();if(!w(t,h))return null;if(!(f=function e(t,n,r){var o=t.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2),a=i;;){var s=t.childNodes[a];if(1==s.nodeType)for(var l=s.getClientRects(),c=0;c<l.length;c++){var u=l[c];if(w(n,u))return e(s,n,u)}if((a=(a+1)%o)==i)break}return t}(e.dom,t,h)))return null}p=t,f=(d=(u=f).parentNode)&&/^li$/i.test(d.nodeName)&&p.left<u.getBoundingClientRect().left?d:u,n&&(n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(c=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var a=e.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)o=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;o=a.posAfter}}i=a.dom.parentNode}return-1<o?o:e.docView.posFromDOM(t,n)}(e,n,r,t))),null==c&&(c=function(e,t,n){var r=b(t,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(o,i,a)}(e,f,t));var m=e.docView.nearestDesc(f,!0);return{pos:c,inside:m?m.posAtStart-m.border:-1}}function C(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function p(e,t){var n,r,o=e.docView.domFromPos(t),i=o.node,a=o.offset;if(3==i.nodeType)a<i.nodeValue.length&&(r=C(m(i,a,a+1),-1),n="left"),r&&r.left!=r.right||!a||(r=C(m(i,a-1,a),1),n="right");else if(i.firstChild){if(a<i.childNodes.length){var s=i.childNodes[a];r=C(3==s.nodeType?m(s):s,-1),n="left"}if((!r||r.top==r.bottom)&&a){var l=i.childNodes[a-1];r=C(3==l.nodeType?m(l):l,1),n="right"}}else r=i.getBoundingClientRect(),n="left";var c=r[n];return{top:r.top,bottom:r.bottom,left:c,right:c}}function d(e,t,n){var r=e.state,o=e.root.activeElement;r==t&&e.inDOMChange||e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o.focus()}}var k=/[\u0590-\u08ac]/;var E=null,x=null,M=!1;function A(e,t,n){return E==t&&x==n?M:(E=t,M="up"==(x=n)||"down"==n?(s=e,l=n,o=(r=t).selection,c="up"==l?o.$anchor.min(o.$head):o.$anchor.max(o.$head),d(s,r,function(){for(var e=s.docView.domFromPos(c.pos).node;;){var t=s.docView.nearestDesc(e,!0);if(!t)break;if(t.node.isBlock){e=t.dom;break}e=t.dom.parentNode}for(var n=p(s,c.pos),r=e.firstChild;r;r=r.nextSibling){var o=void 0;if(1==r.nodeType)o=r.getClientRects();else{if(3!=r.nodeType)continue;o=m(r,0,r.nodeValue.length).getClientRects()}for(var i=0;i<o.length;i++){var a=o[i];if(a.bottom>a.top&&("up"==l?a.bottom<n.top+1:a.top>n.bottom-1))return!1}}return!0})):function(o,e,i){var a=e.selection.$head;if(!a.parent.isTextblock)return!1;var t=a.parentOffset,n=!t,r=t==a.parent.content.size,s=getSelection();return k.test(a.parent.textContent)&&s.modify?d(o,e,function(){var e=s.getRangeAt(0),t=s.focusNode,n=s.focusOffset;s.modify("move",i,"character");var r=!(a.depth?o.docView.domAfterPos(a.before()):o.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||t==s.focusNode&&n==s.focusOffset;return s.removeAllRanges(),s.addRange(e),r}):"left"==i||"backward"==i?n:r}(e,t,n));var s,r,l,o,c}var D=function(e,t,n,r){this.parent=e,this.children=t,((this.dom=n).pmViewDesc=this).contentDOM=r,this.dirty=0},T={beforePosition:{},size:{},border:{},posBefore:{},posAtStart:{},posAfter:{},posAtEnd:{},contentLost:{}};D.prototype.matchesWidget=function(){return!1},D.prototype.matchesMark=function(){return!1},D.prototype.matchesNode=function(){return!1},D.prototype.matchesHack=function(){return!1},T.beforePosition.get=function(){return!1},D.prototype.parseRule=function(){return null},D.prototype.stopEvent=function(){return!1},T.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},T.border.get=function(){return 0},D.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},D.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},T.posBefore.get=function(){return this.parent.posBeforeChild(this)},T.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},T.posAfter.get=function(){return this.posBefore+this.size},T.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},D.prototype.localPosFromDOM=function(e,t,n){var r;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var o,i;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}var a,s;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&(!(s=a.pmViewDesc)||s.parent!=this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){r=!1;break}if(l.parentNode.firstChild!=l)break}if(null==r&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){r=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==r?0<n:r)?this.posAtEnd:this.posAtStart},D.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(e):o.nodeDOM==e))return o;n=!1}}},D.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},D.prototype.posFromDOM=function(e,t,n){for(var r=e;;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}},D.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},D.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&this.children[n].beforePosition;)n++;return{node:this.contentDOM,offset:n}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],o=t+r.size;if(e<o)return r.domFromPos(e-t-r.border);t=o}},D.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=0,a=0;;a++){var s=this.children[a],l=i+s.size;if(-1==r&&e<=l){var c=i+s.border;if(c<=e&&t<=l-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e-c,t-c,n+c);e=n+i;for(var u=a;0<u;u--){var p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=h(p.dom)+1;break}e-=p.size}-1==r&&(r=0)}if(-1<r&&t<=l){t=n+l;for(var d=a+1;d<this.children.length;d++){var f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=h(f.dom);break}t+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},D.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},D.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},D.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),i=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var l=this.children[a],c=s+l.size;if(s<o&&i<c)return l.setSelection(e-s-l.border,t-s-l.border,n,r);s=c}var u=this.domFromPos(e),p=this.domFromPos(t),d=n.getSelection(),f=document.createRange();if(r||!g(u.node,u.offset,d.anchorNode,d.anchorOffset)||!g(p.node,p.offset,d.focusNode,d.focusOffset)){if(d.extend)f.setEnd(u.node,u.offset),f.collapse(!1);else{if(t<e){var h=u;u=p,p=h}f.setEnd(p.node,p.offset),f.setStart(u.node,u.offset)}d.removeAllRanges(),d.addRange(f),d.extend&&d.extend(p.node,p.offset)}},D.prototype.ignoreMutation=function(e){return!this.contentDOM},T.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},D.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&n<=t:e<i&&n<t){var a=n+o.border,s=i-o.border;if(a<=e&&t<=s)return this.dirty=e==n||t==i?2:1,void(e==a&&t==s&&o.contentLost?o.dirty=3:o.markDirty(e-a,t-a));o.dirty=3}n=i}this.dirty=2},Object.defineProperties(D.prototype,T);var N=[],R=function(s){function e(e,t,n,r){var o,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:r})),!t.type.spec.raw){if(1!=i.nodeType){var a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable=!1,i.classList.add("ProseMirror-widget")}s.call(this,e,N,i,null),this.widget=t,o=this}s&&(e.__proto__=s),(e.prototype=Object.create(s&&s.prototype)).constructor=e;var t={beforePosition:{}};return t.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(e.prototype,t),e}(D),P=function(o){function e(){o.apply(this,arguments)}return o&&(e.__proto__=o),((e.prototype=Object.create(o&&o.prototype)).constructor=e).prototype.parseRule=function(){for(var e,t=this.dom.firstChild;t;t=t.nextSibling){var n=void 0;if(3==t.nodeType){var r=t.nodeValue.replace(/\ufeff/g,"");if(!r)continue;n=document.createTextNode(r)}else{if("\ufeff"==t.textContent)continue;n=t.cloneNode(!0)}e||(e=document.createDocumentFragment()),e.appendChild(n)}return e?{skip:e}:o.prototype.parseRule.call(this)},e.prototype.ignoreMutation=function(){return!1},e}(R),F=function(o){function a(e,t,n,r){o.call(this,e,[],n,r),this.mark=t}return o&&(a.__proto__=o),((a.prototype=Object.create(o&&o.prototype)).constructor=a).create=function(e,t,n,r){var o=r.nodeViews[t.type.name],i=o&&o(t,r,n);return i&&i.dom||(i=Ur.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t,n))),new a(e,t,i.dom,i.contentDOM||i.dom)},a.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},a.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},a.prototype.markDirty=function(e,t){if(o.prototype.markDirty.call(this,e,t),0!=this.dirty){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}},a}(D),_=function(c){function f(e,t,n,r,o,i,a,s,l){c.call(this,e,t.isLeaf?N:[],o,i),this.nodeDOM=a,this.node=t,this.outerDeco=n,this.innerDeco=r,i&&this.updateChildren(s,l)}c&&(f.__proto__=c);var e={size:{},border:{}};return((f.prototype=Object.create(c&&c.prototype)).constructor=f).create=function(e,t,n,r,o,i){var a,s=o.nodeViews[t.type.name],l=s&&s(t,o,function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:i},n),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){var p;c=(p=Ur.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t))).dom,u=p.contentDOM}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable=!1),t.type.spec.draggable&&(c.draggable=!0));var d=c;return c=U(c,n,t),l?a=new V(e,t,n,r,c,u,d,l,o,i+1):t.isText?new L(e,t,n,r,c,d,o):new f(e,t,n,r,c,u,d,o,i+1)},f.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?Ur.Fragment.empty:e.node.content},t},f.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&K(t,this.outerDeco)&&n.eq(this.innerDeco)},e.size.get=function(){return this.node.nodeSize},e.border.get=function(){return this.node.isLeaf?0:1},f.prototype.updateChildren=function(o,i){var n=this,a=new J(this),s=this.node.inlineContent;!function(e,t,n,r){var o=t.locals(e),i=0;if(0==o.length){for(var a=0;a<e.childCount;a++){var s=e.child(a);r(s,o,t.forChild(i,s),a),i+=s.nodeSize}return}for(var l=0,c=[],u=null,p=0;;){if(l<o.length&&o[l].to==i){for(var d=o[l++],f=void 0;l<o.length&&o[l].to==i;)(f||(f=[d])).push(o[l++]);if(f){f.sort(G);for(var h=0;h<f.length;h++)n(f[h],p)}else n(d,p)}var m=void 0;if(u)m=u,u=null;else{if(!(p<e.childCount))break;m=e.child(p++)}for(var v=0;v<c.length;v++)c[v].to<=i&&c.splice(v--,1);for(;l<o.length&&o[l].from==i;)c.push(o[l++]);var g=i+m.nodeSize;if(m.isText){var y=g;l<o.length&&o[l].from<y&&(y=o[l].from);for(var b=0;b<c.length;b++)c[b].to<y&&(y=c[b].to);y<g&&(u=m.cut(y-i),m=m.cut(0,y-i),g=y)}r(m,c.length?c.slice():N,t.forChild(i,m),p-1),i=g}}(this.node,this.innerDeco,function(e,t){e.spec.marks?a.syncToMarks(e.spec.marks,s,o):0<=e.type.side&&a.syncToMarks(t==n.node.childCount?Ur.Mark.none:n.node.child(t).marks,s,o),a.placeWidget(e,o,i)},function(e,t,n,r){a.syncToMarks(e.marks,s,o),a.findNodeMatch(e,t,n,r)||a.updateNextNode(e,t,n,o,r)||a.addNode(e,t,n,o,i),i+=e.nodeSize}),a.syncToMarks(N,s,o),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&this.renderChildren()},f.prototype.renderChildren=function(){!function e(t,n){var r=t.firstChild;for(var o=0;o<n.length;o++){var i=n[o],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=q(r);r=r.nextSibling}else t.insertBefore(a,r);if(i instanceof F){var s=r?r.previousSibling:t.lastChild;e(i.contentDOM,i.children),r=s?s.nextSibling:t.firstChild}}for(;r;)r=q(r)}(this.contentDOM,this.children),S.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom)},f.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},f.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},f.prototype.updateOuterDeco=function(e){if(!K(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=W(this.dom,this.nodeDOM,$(this.outerDeco,this.node,t),$(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},f.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},f.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(f.prototype,e),f}(D);function I(e,t,n,r,o){return U(r,t,e),new _(null,e,t,n,r,r,r,o,0)}var L=function(s){function e(e,t,n,r,o,i,a){s.call(this,e,t,n,r,o,null,i,a)}return s&&(e.__proto__=s),((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.parseRule=function(){var e=this.nodeDOM.parentNode;return e?{skip:e}:{ignore:!0}},e.prototype.update=function(e,t){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,!(this.dirty=0))},e.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},e.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},e.prototype.localPosFromDOM=function(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):s.prototype.localPosFromDOM.call(this,e,t,n)},e.prototype.ignoreMutation=function(e){return"characterData"!=e.type},e}(_),B=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(D),V=function(u){function e(e,t,n,r,o,i,a,s,l,c){u.call(this,e,t,n,r,o,i,a,l,c),this.spec=s}return u&&(e.__proto__=u),((e.prototype=Object.create(u&&u.prototype)).constructor=e).prototype.update=function(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(e,t);return o&&this.updateInner(e,t,n,r),o}return!(!this.contentDOM&&!e.isLeaf)&&u.prototype.update.call(this,e,t,n,r)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():u.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():u.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):u.prototype.setSelection.call(this,e,t,n,r)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),u.prototype.destroy.call(this)},e.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):u.prototype.ignoreMutation.call(this,e)},e}(_);function z(e){e&&(this.nodeName=e)}z.prototype=Object.create(null);var j=[new z];function $(e,t,n){if(0==e.length)return j;for(var r=n?j[0]:new z,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs,s=r;if(a)for(var l in a.nodeName&&o.push(s=new z(a.nodeName)),a){var c=a[l];null!=c&&(n&&1==o.length&&o.push(s=r=new z(t.isInline?"span":"div")),"class"==l?s.class=(s.class?s.class+" ":"")+c:"style"==l?s.style=(s.style?s.style+";":"")+c:"nodeName"!=l&&(s[l]=c))}}return o}function W(e,t,n,r){if(n==j&&r==j)return t;for(var o=t,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var l=void 0;o=(s&&s.nodeName==a.nodeName&&o!=e&&(l=t.parentNode)&&l.tagName.toLowerCase()==a.nodeName||(l=document.createElement(a.nodeName)).appendChild(o),l)}H(o,s||j[0],a)}return o}function H(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" "):N,a=n.class?n.class.split(" "):N,s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var l=0;l<a.length;l++)-1==i.indexOf(a[l])&&e.classList.add(a[l])}if(t.style!=n.style){if(t.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(t.style);)e.style[c[1].toLowerCase()]="";n.style&&(e.style.cssText+=n.style)}}function U(e,t,n){return W(e,e,j,$(t,n,1!=e.nodeType))}function K(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function q(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var J=function(e){this.top=e,this.index=0,this.stack=[],this.changed=!1,this.preMatched=function(e,t){for(var n=[],r=e.childCount,o=t.length-1;0<r&&0<=o;o--){var i=t[o],a=i.node;if(a){if(a!=e.child(r-1))break;n[--r]=i}}return n}(e.node.content,e.children)};function G(e,t){return e.type.side-t.type.side}function X(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=0<t?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?e.doc.resolve(0<t?i.after():i.before()):null:i;return a&&Jr.Selection.findFrom(a,t)}function Y(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Z(e,t,n){var r=e.state.selection;if(r instanceof Jr.TextSelection){if(!r.empty||-1<n.indexOf("s"))return!1;if(e.endOfTextblock(0<t?"right":"left")){var o=X(e.state,t);return!!(o&&o instanceof Jr.NodeSelection)&&Y(e,o)}var i,a=r.$head,s=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(s&&Jr.NodeSelection.isSelectable(s)){var l=t<0?a.pos-s.nodeSize:a.pos;if(s.isAtom||(i=e.docView.descAt(l))&&!i.contentDOM)return Y(e,new Jr.NodeSelection(t<0?e.state.doc.resolve(a.pos-s.nodeSize):a))}return!1}if(r instanceof Jr.NodeSelection&&r.node.isInline)return Y(e,new Jr.TextSelection(0<t?r.$to:r.$from));var c=X(e.state,t);return!!c&&Y(e,c)}function Q(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ee(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function te(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(S.gecko&&1==n.nodeType&&r<Q(n)&&ee(n.childNodes[r])&&(a=!0);;)if(0<r)if(1!=n.nodeType){if(3!=n.nodeType||"\ufeff"!=n.nodeValue.charAt(r-1))break;S.ie&&S.ie_version<=11&&(a=!0),o=n,i=--r}else{var s=n.childNodes[r-1];if(ee(s))o=n,i=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(re(n))break;for(var l=n.previousSibling;l&&ee(l);)o=n.parentNode,i=h(l),l=l.previousSibling;if(l)r=Q(n=l);else{if((n=n.parentNode)==e.dom)break;r=0}}a?oe(e,t,n,r):o&&oe(e,t,o,i)}}function ne(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=Q(n);;)if(r<a){if(1!=n.nodeType)break;if(!ee(n.childNodes[r]))break;o=n,i=++r}else{if(re(n))break;for(var s=n.nextSibling;s&&ee(s);)o=s.parentNode,i=h(s)+1,s=s.nextSibling;if(s)r=0,a=Q(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}o&&oe(e,t,o,i)}}function re(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function oe(e,t,n,r){if(O(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.selectionReader.storeDOMState(e.selection)}function ie(e,t,n){var r=e.state.selection;if(r instanceof Jr.TextSelection&&!r.empty||-1<n.indexOf("s"))return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=X(e.state,t);if(a&&a instanceof Jr.NodeSelection)return Y(e,a)}if(o.parent.inlineContent)return!1;var s=Jr.Selection.findFrom(t<0?o:i,t);return!s||Y(e,s)}function ae(e,t){if(!(e.state.selection instanceof Jr.TextSelection))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(0<t?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(!a||a.isText)return!1;var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}function se(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function le(e,t){var n,r,o=t.keyCode,i=(r="",(n=t).ctrlKey&&(r+="c"),n.metaKey&&(r+="m"),n.altKey&&(r+="a"),n.shiftKey&&(r+="s"),r);return 8==o||S.mac&&72==o&&"c"==i?ae(e,-1)||te(e):46==o||S.mac&&68==o&&"c"==i?ae(e,1)||ne(e):13==o||27==o||(37==o?Z(e,-1,i)||te(e):39==o?Z(e,1,i)||ne(e):38==o?ie(e,-1,i)||te(e):40==o?function(e){if(S.chrome&&!(0<e.state.selection.$head.parentOffset)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;se(e,o,!0),setTimeout(function(){return se(e,o,!1)},20)}}}(e)||ie(e,1,i)||ne(e):i==(S.mac?"m":"c")&&(66==o||73==o||89==o||90==o))}J.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},J.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},J.prototype.syncToMarks=function(e,t,n){for(var r=this,o=0,i=this.stack.length>>1,a=Math.min(i,e.length);o<a&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<i;)r.destroyRest(),r.top.dirty=0,r.index=r.stack.pop(),r.top=r.stack.pop(),i--;for(;i<e.length;){r.stack.push(r.top,r.index+1);for(var s=-1,l=this.index;l<Math.min(this.index+3,this.top.children.length);l++)if(r.top.children[l].matchesMark(e[i])){s=l;break}if(-1<s)s>r.index&&(r.changed=!0,r.top.children.splice(r.index,s-r.index)),r.top=r.top.children[r.index];else{var c=F.create(r.top,e[i],t,n);r.top.children.splice(r.index,0,c),r.top=c,r.changed=!0}r.index=0,i++}},J.prototype.findNodeMatch=function(e,t,n,r){var o=-1,i=this.preMatched[r],a=this.top.children;if(i&&i.matchesNode(e,t,n))o=a.indexOf(i);else for(var s=this.index,l=Math.min(a.length,s+5);s<l;s++){var c=a[s];if(c.matchesNode(e,t,n)&&this.preMatched.indexOf(c)<0){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},J.prototype.updateNextNode=function(e,t,n,r,o){if(this.index==this.top.children.length)return!1;var i=this.top.children[this.index];if(i instanceof _){var a=this.preMatched.indexOf(i);if(-1<a&&a!=o)return!1;var s=i.dom;if(i.update(e,t,n,r))return i.dom!=s&&(this.changed=!0),this.index++,!0}return!1},J.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,_.create(this.top,e,t,n,r,o)),this.changed=!0},J.prototype.placeWidget=function(e,t,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var r=new(e.spec.isCursorWrapper?P:R)(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},J.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof F;)e=e.children[e.children.length-1];if(!e||!(e instanceof L)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new B(this.top,N,t,null)),this.changed=!0}};var ce=function(e,t,n){this.prev=e,this.mapping=t,this.state=n},ue=function(e){this.seen=[new ce(null,null,e)],Jr.EditorState.addApplyListener(this.track=this.track.bind(this))};ue.prototype.destroy=function(){Jr.EditorState.removeApplyListener(this.track)},ue.prototype.find=function(e){for(var t=this.seen.length-1;0<=t;t--){var n=this.seen[t];if(n.state==e)return n}},ue.prototype.track=function(e,t,n){var r=this.seen.length<200?this.find(e):null;r&&this.seen.push(new ce(r,t.docChanged?t.mapping:null,n))},ue.prototype.getMapping=function(e,t){var n=this.find(e);if(!n)return null;for(var r=[],o=n;o;o=o.prev)o.mapping&&r.push(o.mapping);for(var i=t||new qr.Mapping,a=r.length-1;0<=a;a--)i.appendMapping(r[a]);return i};var pe=function(e){var t=this;this.view=e,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastSelection=e.state.selection,this.ignoreUpdates=!1,this.suppressUpdates=!1,this.poller=new("onselectionchange"in document?de:fe)(this),this.focusFunc=function(){return t.poller.start(be(t.view))}.bind(this),this.blurFunc=this.poller.stop,e.dom.addEventListener("focus",this.focusFunc),e.dom.addEventListener("blur",this.blurFunc),e.editable||this.poller.start(!1)};pe.prototype.destroy=function(){this.view.dom.removeEventListener("focus",this.focusFunc),this.view.dom.removeEventListener("blur",this.blurFunc),this.poller.stop()},pe.prototype.poll=function(e){this.poller.poll(e)},pe.prototype.editableChanged=function(){this.view.editable?be(this.view)||this.poller.stop():this.poller.start()},pe.prototype.domChanged=function(){var e=this.view.root.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastHeadNode||e.focusOffset!=this.lastHeadOffset},pe.prototype.storeDOMState=function(e){var t=this.view.root.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastHeadNode=t.focusNode,this.lastHeadOffset=t.focusOffset,this.lastSelection=e},pe.prototype.clearDOMState=function(){this.lastAnchorNode=this.lastSelection=null},pe.prototype.readFromDOM=function(e){if(!this.ignoreUpdates&&this.domChanged()&&be(this.view)){if(this.suppressUpdates)return he(this.view);if(this.view.inDOMChange||this.view.domObserver.flush(),!this.view.inDOMChange){var t,n,r=this.view.root.getSelection(),o=this.view.state.doc,i=this.view.docView.nearestDesc(r.focusNode),a=i&&0==i.size,s=this.view.docView.posFromDOM(r.focusNode,r.focusOffset),l=o.resolve(s);if(O(r)){for(t=l;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&Jr.NodeSelection.isSelectable(i.node)&&i.parent){var c=i.posBefore;n=new Jr.NodeSelection(s==c?l:o.resolve(c))}}else t=o.resolve(this.view.docView.posFromDOM(r.anchorNode,r.anchorOffset));if(!n){var u="pointer"==e||this.view.state.selection.head<l.pos&&!a?1:-1;n=ye(this.view,t,l,u)}if(this.view.state.selection.eq(n))he(this.view);else{var p=this.view.state.tr.setSelection(n);"pointer"==e?p.setMeta("pointer",!0):"key"==e&&p.scrollIntoView(),this.view.dispatch(p)}}}};var de=function(e){var t=this;this.listening=!1,this.curOrigin=null,this.originTime=0,this.reader=e,this.readFunc=function(){return e.readFromDOM(t.originTime>Date.now()-50?t.curOrigin:null)}};de.prototype.poll=function(e){this.curOrigin=e,this.originTime=Date.now()},de.prototype.start=function(e){this.listening||(this.reader.view.dom.ownerDocument.addEventListener("selectionchange",this.readFunc),this.listening=!0,e&&this.readFunc())},de.prototype.stop=function(){this.listening&&(this.reader.view.dom.ownerDocument.removeEventListener("selectionchange",this.readFunc),this.listening=!1)};var fe=function(e){this.polling=null,this.reader=e,this.pollFunc=this.doPoll.bind(this,null)};function he(e,t,n){var r=e.state.selection;if(function(e,t){if(t instanceof Jr.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(ge(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else ge(e)}(e,r),e.editable&&!e.hasFocus()){if(!t)return;S.gecko&&S.gecko_version<=55&&(e.selectionReader.ignoreUpdates=!0,e.dom.focus(),e.selectionReader.ignoreUpdates=!1)}else if(!e.editable&&!we(e)&&!t)return;var o=e.selectionReader;if(!o.lastSelection||!o.lastSelection.eq(r)||o.domChanged()){if(o.ignoreUpdates=!0,e.cursorWrapper)u=(c=e).root.getSelection(),p=document.createRange(),d=c.cursorWrapper.dom,p.setEnd(d,d.childNodes.length),p.collapse(!1),u.removeAllRanges(),u.addRange(p),!c.state.selection.visible&&S.ie&&S.ie_version<=11&&(d.disabled=!0,d.disabled=!1);else{var i,a,s=r.anchor,l=r.head;!me||r instanceof Jr.TextSelection||(r.$from.parent.inlineContent||(i=ve(e,r.from)),r.empty||r.$from.parent.inlineContent||(a=ve(e,r.to))),e.docView.setSelection(s,l,e.root,n),me&&(i&&(i.contentEditable="false"),a&&(a.contentEditable="false")),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):s!=l&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}var c,u,p,d;o.storeDOMState(r),o.ignoreUpdates=!1}}fe.prototype.doPoll=function(e){var t=this.reader.view;t.focused||!t.editable?(this.reader.readFromDOM(e),this.polling=setTimeout(this.pollFunc,100)):this.polling=null},fe.prototype.poll=function(e){clearTimeout(this.polling),this.polling=setTimeout(e?this.doPoll.bind(this,e):this.pollFunc,0)},fe.prototype.start=function(){null==this.polling&&this.poll()},fe.prototype.stop=function(){clearTimeout(this.polling),this.polling=null};var me=S.safari||S.chrome&&S.chrome_version<63;function ve(e,t){var n=e.docView.domFromPos(t),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return i.contentEditable="true",i;if(a)return a.contentEditable="true",a}}function ge(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function ye(t,n,r,e){return t.someProp("createSelectionBetween",function(e){return e(t,n,r)})||Jr.TextSelection.between(n,r,e)}function be(e){return(!e.editable||e.root.activeElement==e.dom)&&we(e)}function we(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Ce(e){return!1===e.type.spec.inclusive}function ke(e){var t=e.selection,n=t.$head,r=t.$anchor,o=t.visible,i=n.pos!=r.pos||o&&!n.parent.inlineContent?null:n;return i&&(!o||e.storedMarks||0==i.parent.content.length||i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.some(Ce))?i:null}var Ee=function e(t,n){var r=this;this.view=t,this.state=t.state,this.composing=n,this.compositionEndedAt=null,this.from=this.to=null,this.typeOver=!1,this.timeout=n?null:setTimeout(function(){return r.finish()},e.commitTimeout),this.trackMappings=new ue(t.state),this.mapping=new qr.Mapping,this.mappingTo=t.state};function xe(e,t){for(var n=t||0;n<e.depth;n++)if(e.index(n)+1<e.node(n).childCount)return!1;return e.parentOffset==e.parent.content.size}function Se(e,t){for(var n=t||0;n<e.depth;n++)if(0<e.index(0))return!1;return 0==e.parentOffset}function Oe(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Me(e,t,n,r){return Math.max(r.anchor,r.head)>t.content.size?null:ye(e,t.resolve(n.map(r.anchor)),t.resolve(n.map(r.head)))}function Ae(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;0<r&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function De(e,t){for(var n=[],r=t.content,o=t.openStart,i=t.openEnd;1<o&&1<i&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var s=e.someProp("clipboardSerializer")||Ur.DOMSerializer.fromSchema(e.state.schema),l=document.createElement("div");l.appendChild(s.serializeFragment(r));for(var c,u=l.firstChild;u&&1==u.nodeType&&(c=Re[u.nodeName.toLowerCase()]);){for(var p=c.length-1;0<=p;p--){for(var d=document.createElement(c[p]);l.firstChild;)d.appendChild(l.firstChild);l.appendChild(d)}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n)),{dom:l,text:e.someProp("clipboardTextSerializer",function(e){return e(t)})||t.content.textBetween(0,t.content.size,"\n\n")}}function Te(e,t,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",function(e){t=e(t)}),s)return new Ur.Slice(Ur.Fragment.from(e.state.schema.text(t)),0,0);var c=e.someProp("clipboardTextParser",function(e){return e(t,o)});c?a=c:(i=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach(function(e){i.appendChild(document.createElement("p")).textContent=e}))}else e.someProp("transformPastedHTML",function(e){return n=e(n)}),i=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=(Pe||(Pe=document.implementation.createHTMLDocument("title"))).createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=o&&Re[o[1].toLowerCase()])&&(e=n.map(function(e){return"<"+e+">"}).join("")+e+n.map(function(e){return"</"+e+">"}).reverse().join(""),i=n.length);r.innerHTML=e;for(var a=0;a<i;a++)r=r.firstChild;return r}(n);var u=i&&i.querySelector("[data-pm-slice]"),p=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||Ur.DOMParser.fromSchema(e.state.schema);a=d.parseSlice(i,{preserveWhitespace:!(!l&&!p),context:o})}return a=p?function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var o=t.content,i=t.openStart,a=t.openEnd,s=n.length-2;0<=s;s-=2){var l=r.nodes[n[s]];if(!l||l.hasRequiredAttrs())break;o=Ur.Fragment.from(l.create(n[s+1],o)),i++,a++}return new Ur.Slice(o,i,a)}(new Ur.Slice(a.content,Math.min(a.openStart,+p[1]),Math.min(a.openEnd,+p[2])),p[3]):Ur.Slice.maxOpen(function(n,r){if(n.childCount<2)return n;for(var e=function(e){var t=r.node(e),o=t.contentMatchAt(r.index(e)),i=void 0,a=[];if(n.forEach(function(e){if(a){var t,n=o.findWrapping(e.type);if(!n)return a=null;if(t=a.length&&i.length&&function e(t,n,r,o,i){if(i<t.length&&i<n.length&&t[i]==n[i]){var a=e(t,n,r,o.lastChild,i+1);if(a)return o.copy(o.content.replaceChild(o.childCount-1,a));var s=o.contentMatchAt(o.childCount);if(s.matchType(i==t.length-1?r.type:t[i+1]))return o.copy(o.content.append(Ur.Fragment.from(Ne(r,t,i+1))))}}(n,i,e,a[a.length-1],0))a[a.length-1]=t;else{a.length&&(a[a.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1));var o=t.contentMatchAt(t.childCount).fillBefore(Ur.Fragment.empty,!0);return t.copy(r.append(o))}(a[a.length-1],i.length));var r=Ne(e,n);a.push(r),o=o.matchType(r.type,r.attrs),i=n}}}),a)return{v:Ur.Fragment.from(a)}},t=r.depth;0<=t;t--){var o=e(t);if(o)return o.v}return n}(a.content,o),!1),e.someProp("transformPasted",function(e){a=e(a)}),a}function Ne(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;n<=r;r--)e=t[r].create(null,Ur.Fragment.from(e));return e}Ee.prototype.addRange=function(e,t){null==this.from?(this.from=e,this.to=t):(this.from=Math.min(e,this.from),this.to=Math.max(t,this.to))},Ee.prototype.changedRange=function(){if(null==this.from)return function(e){var t=e.$anchor.min(e.$head),n=e.$anchor.max(e.$head);{if(t.sameParent(n)&&t.parent.inlineContent&&t.parentOffset&&n.parentOffset<n.parent.content.size){var r=Math.max(0,t.parentOffset),o=t.parent.content.size,i=Math.min(o,n.parentOffset);if(0<r&&(r=t.parent.childBefore(r).offset),i<o){var a=t.parent.childAfter(i);i=a.offset+a.node.nodeSize}var s=t.start();return{from:s+r,to:s+i}}for(var l=0;;l++){var c=Se(t,l+1),u=xe(n,l+1);if(c||u||t.index(l)!=n.index(l)||n.node(l).isTextblock){var p=t.before(l+1),d=n.after(l+1);return c&&0<t.index(l)&&(p-=t.node(l).child(t.index(l)-1).nodeSize),u&&n.index(l)+1<n.node(l).childCount&&(d+=n.node(l).child(n.index(l)+1).nodeSize),{from:p,to:d}}}}}(this.state.selection);var e=this.state.doc.resolve(Math.min(this.from,this.state.selection.from)),t=this.state.doc.resolve(this.to),n=e.sharedDepth(this.to);return{from:e.before(n+1),to:t.after(n+1)}},Ee.prototype.markDirty=function(e){null==this.from?this.view.docView.markDirty((e=e||this.changedRange()).from,e.to):this.view.docView.markDirty(this.from,this.to)},Ee.prototype.stateUpdated=function(e){return this.trackMappings.getMapping(e,this.mapping)?(this.trackMappings.destroy(),this.trackMappings=new ue(e),this.mappingTo=e,!0):(this.markDirty(),this.destroy(),!1)},Ee.prototype.finish=function(e){if(clearTimeout(this.timeout),!this.composing||e){this.view.domObserver.flush();var t=this.changedRange();this.markDirty(t),this.destroy();var n=this.state.selection,r=this.typeOver&&n instanceof Jr.TextSelection&&!n.empty&&n.$head.sameParent(n.$anchor);!function(t,e,n,r,o){var i,a,s=function(e,t,n){var r=e.docView.parseRange(n.from,n.to),o=r.node,i=r.fromOffset,a=r.toOffset,s=r.from,l=r.to,c=e.root.getSelection(),u=null,p=c.anchorNode;p&&e.dom.contains(1==p.nodeType?p:p.parentNode)&&(u=[{node:p,offset:c.anchorOffset}],O(c)||u.push({node:c.focusNode,offset:c.focusOffset}));if(S.chrome&&8===e.lastKeyCode)for(var d=a;i<d;d--){var f=o.childNodes[d-1],h=f.pmViewDesc;if("BR"==f.nodeType&&!h){a=d;break}if(!h||h.size)break}var m=t.doc,v=e.someProp("domParser")||Ur.DOMParser.fromSchema(e.state.schema),g=m.resolve(s),y=null,b=v.parse(o,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:a,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:(w=v,C=g,function(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(S.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName))return w.matchTag(document.createElement("li"),C);if(e.parentNode.lastChild==e||S.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}}),context:g});var w,C;if(u&&null!=u[0].pos){var k=u[0].pos,E=u[1]&&u[1].pos;null==E&&(E=k),y={anchor:k+s,head:E+s}}return{doc:b,sel:y,from:s,to:l}}(t,n,r),l=n.doc,c=l.slice(s.from,s.to);a=8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(i=n.selection.to,"end"):(i=n.selection.from,"start");t.lastKeyCode=null;var u=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,l=a.b;if("end"==o){var c=Math.max(0,i-Math.min(s,l));r-=s+c-i}if(s<i&&e.size<t.size){var u=r<=i&&s<=r?i-r:0;l=(i-=u)+(l-s),s=i}else if(l<i){var p=r<=i&&l<=r?i-r:0;s=(i-=p)+(s-l),l=i}return{start:i,endA:s,endB:l}}(c.content,s.doc.content,s.from,i,a);if(!u){if(o){var p=t.state,d=p.selection;t.dispatch(p.tr.replaceSelectionWith(p.schema.text(p.doc.textBetween(d.from,d.to)),!0).scrollIntoView())}else if(s.sel){var f=Me(t,t.state.doc,e,s.sel);f&&!f.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(f))}return}n.selection.from<n.selection.to&&u.start==u.endB&&n.selection instanceof Jr.TextSelection&&(u.start>n.selection.from&&u.start<=n.selection.from+2?u.start=n.selection.from:u.endA<n.selection.to&&u.endA>=n.selection.to-2&&(u.endB+=n.selection.to-u.endA,u.endA=n.selection.to));var h,m=s.doc.resolveNoCache(u.start-s.from),v=s.doc.resolveNoCache(u.endB-s.from);if(!m.sameParent(v)&&m.pos<s.doc.content.size&&(h=Jr.Selection.findFrom(s.doc.resolve(m.pos+1),1,!0))&&h.head==v.pos&&t.someProp("handleKeyDown",function(e){return e(t,Oe(13,"Enter"))}))return;if(n.selection.anchor>u.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||Ae(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=e.resolve(Ae(i,!0,!0));if(!a.parent.isTextblock||a.pos>n||Ae(a,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(l,u.start,u.endA,m,v)&&t.someProp("handleKeyDown",function(e){return e(t,Oe(8,"Backspace"))}))return S.android&&S.chrome&&(t.selectionReader.suppressUpdates=!0,setTimeout(function(){return t.selectionReader.suppressUpdates=!1},50));var g,y,b,w,C=e.map(u.start),k=e.map(u.endA,-1);if(m.sameParent(v)&&m.parent.inlineContent)if(m.pos==v.pos)g=t.state.tr.delete(C,k),y=l.resolve(u.start).marksAcross(l.resolve(u.endA));else if(u.endA==u.endB&&(w=l.resolve(u.start))&&(b=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,s=i,l=a,c=0;c<a.length;c++)s=a[c].removeFromSet(s);for(var u=0;u<i.length;u++)l=i[u].removeFromSet(l);if(1==s.length&&0==l.length)r=s[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=l.length)return null;r=l[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var p=[],d=0;d<t.childCount;d++)p.push(o(t.child(d)));if(Ur.Fragment.from(p).eq(e))return{mark:r,type:n}}(m.parent.content.cut(m.parentOffset,v.parentOffset),w.parent.content.cut(w.parentOffset,u.endA-w.start()))))g=t.state.tr,"add"==b.type?g.addMark(C,k,b.mark):g.removeMark(C,k,b.mark);else if(m.parent.child(m.index()).isText&&m.index()==v.index()-(v.textOffset?0:1)){var E=m.parent.textBetween(m.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",function(e){return e(t,C,k,E)}))return;g=t.state.tr.insertText(E,C,k)}g||(g=t.state.tr.replace(C,k,s.doc.slice(u.start-s.from,u.endB-s.from)));if(s.sel){var x=Me(t,g.doc,e,s.sel);x&&g.setSelection(x)}y&&g.ensureMarks(y);t.dispatch(g.scrollIntoView())}(this.view,this.mapping,this.state,t,r),this.view.docView.dirty&&this.view.updateState(this.view.state)}},Ee.prototype.destroy=function(){clearTimeout(this.timeout),this.trackMappings.destroy(),this.view.inDOMChange=null},Ee.prototype.compositionEnd=function(e){var t=this;this.composing&&(this.composing=!1,e&&(this.compositionEndedAt=e.timeStamp),this.timeout=setTimeout(function(){return t.finish()},50))},Ee.prototype.ignoreKeyDownOnCompositionEnd=function(e){return!!(S.safari&&null!==this.compositionEndedAt&&Math.abs(e.timeStamp-this.compositionEndedAt)<500)&&!(this.compositionEndedAt=null)},Ee.start=function(e,t){return e.inDOMChange?t&&(clearTimeout(e.inDOMChange.timeout),e.inDOMChange.composing=!0,e.inDOMChange.compositionEndedAt=null):e.inDOMChange=new Ee(e,t),e.inDOMChange},Ee.commitTimeout=20;var Re={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Pe=null;var Fe={childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0},_e=S.ie&&S.ie_version<=11,Ie=function(e){var t=this;this.view=e,this.observer=window.MutationObserver&&new window.MutationObserver(function(e){return t.registerMutations(e)}),_e&&(this.onCharData=function(e){return t.registerMutation({target:e.target,type:"characterData",oldValue:e.prevValue})})};Ie.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Fe),_e&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData)},Ie.prototype.stop=function(){this.observer&&(this.flush(),this.observer.disconnect()),_e&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)},Ie.prototype.flush=function(){this.observer&&this.registerMutations(this.observer.takeRecords())},Ie.prototype.registerMutations=function(e){for(var t=0;t<e.length;t++)this.registerMutation(e[t])},Ie.prototype.registerMutation=function(e){if(this.view.editable){var t=this.view.docView.nearestDesc(e.target);if(("attributes"!=e.type||t!=this.view.docView&&"contenteditable"!=e.attributeName)&&t&&!t.ignoreMutation(e)){var n,r;if("childList"==e.type){var o=e.previousSibling&&e.previousSibling.parentNode==e.target?h(e.previousSibling)+1:0;if(-1==o)return;n=t.localPosFromDOM(e.target,o,-1);var i=e.nextSibling&&e.nextSibling.parentNode==e.target?h(e.nextSibling):e.target.childNodes.length;if(-1==i)return;r=t.localPosFromDOM(e.target,i,1)}else"attributes"==e.type?(n=t.posAtStart-t.border,r=t.posAtEnd+t.border):(n=t.posAtStart,r=t.posAtEnd,e.target.nodeValue==e.oldValue&&(Ee.start(this.view).typeOver=!0));Ee.start(this.view).addRange(n,r)}}};var Le={},Be={};function Ve(n){n.someProp("handleDOMEvents",function(e){for(var t in e)n.eventHandlers[t]||n.dom.addEventListener(t,n.eventHandlers[t]=function(e){return ze(n,e)})})}function ze(n,r){return n.someProp("handleDOMEvents",function(e){var t=e[r.type];return!!t&&(t(n,r)||r.defaultPrevented)})}function je(e){return{left:e.clientX,top:e.clientY}}Be.keydown=function(t,n){if(t.shiftKey=16==n.keyCode||n.shiftKey,t.inDOMChange){if(t.inDOMChange.composing)return;if(t.inDOMChange.ignoreKeyDownOnCompositionEnd(n))return;t.inDOMChange.finish()}t.lastKeyCode=n.keyCode,t.lastKeyCodeTime=Date.now(),t.someProp("handleKeyDown",function(e){return e(t,n)})||le(t,n)?n.preventDefault():t.selectionReader.poll("key")},Be.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Be.keypress=function(t,n){if(!(t.inDOMChange||!n.charCode||n.ctrlKey&&!n.altKey||S.mac&&n.metaKey))if(t.someProp("handleKeyPress",function(e){return e(t,n)}))n.preventDefault();else{var r=t.state.selection;if(!(r instanceof Jr.TextSelection&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(n.charCode);t.someProp("handleTextInput",function(e){return e(t,r.$from.pos,r.$to.pos,o)})||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}}};var $e={time:0,x:0,y:0,type:""};function We(n,e,r,t,o){if(-1==t)return!1;for(var i=n.state.doc.resolve(t),a=function(t){if(n.someProp(e,function(e){return t>i.depth?e(n,r,i.nodeAfter,i.before(t),o,!0):e(n,r,i.node(t),i.before(t),o,!1)}))return{v:!0}},s=i.depth+1;0<s;s--){var l=a(s);if(l)return l.v}return!1}function He(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Ue(t,n,e,r,o){return We(t,"handleClickOn",n,e,r)||t.someProp("handleClick",function(e){return e(t,n,r)})||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof Jr.NodeSelection&&(n=o.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;0<a;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(Jr.NodeSelection.isSelectable(s)){r=n&&0<o.$from.depth&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(He(e,Jr.NodeSelection.create(e.state.doc,r),"pointer"),!0)}(t,e):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Jr.NodeSelection.isSelectable(r))&&(He(e,new Jr.NodeSelection(n),"pointer"),!0)}(t,e))}function Ke(t,n,e,r){return We(t,"handleTripleClickOn",n,e,r)||t.someProp("handleTripleClick",function(e){return e(t,n,r)})||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(He(e,Jr.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),o=r.depth+1;0<o;o--){var i=o>r.depth?r.nodeAfter:r.node(o),a=r.before(o);if(i.inlineContent)He(e,Jr.TextSelection.create(n,a+1,a+1+i.content.size),"pointer");else{if(!Jr.NodeSelection.isSelectable(i))continue;He(e,Jr.NodeSelection.create(n,a),"pointer")}return!0}}(t,e)}function qe(e){return!!e.inDOMChange&&(e.inDOMChange.finish(!0),!0)}var Je=S.mac?"metaKey":"ctrlKey";Le.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n,r,o,i,a=qe(e),s=Date.now(),l="singleClick";s-$e.time<500&&(n=t,o=(r=$e).x-n.clientX,i=r.y-n.clientY,o*o+i*i<100)&&!t[Je]&&("singleClick"==$e.type?l="doubleClick":"doubleClick"==$e.type&&(l="tripleClick")),$e={time:s,x:t.clientX,y:t.clientY,type:l};var c=e.posAtCoords(je(t));c&&("singleClick"==l?e.mouseDown=new Ge(e,c,t,a):("doubleClick"==l?function(t,n,e,r){return We(t,"handleDoubleClickOn",n,e,r)||t.someProp("handleDoubleClick",function(e){return e(t,n,r)})}:Ke)(e,c.pos,c.inside,t)?t.preventDefault():e.selectionReader.poll("pointer"))};var Ge=function(e,t,n,r){var o,i,a=this;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[Je],this.allowDefault=n.shiftKey,-1<t.inside)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{var s=e.state.doc.resolve(t.pos);o=s.parent,i=s.depth?s.before():0}this.mightDrag=null;var l=r?null:n.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||e.state.selection instanceof Jr.NodeSelection&&i==e.state.selection.from)&&(this.mightDrag={node:o,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&S.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){return a.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),e.selectionReader.poll("pointer")};Ge.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Ge.prototype.up=function(e){this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)&&(this.allowDefault?(S.ie&&ke(this.view.state)&&this.view.updateState(this.view.state),this.view.selectionReader.poll("pointer")):Ue(this.view,this.pos.pos,this.pos.inside,e,this.selectNode)?e.preventDefault():this.flushed||S.chrome&&!(this.view.state.selection instanceof Jr.TextSelection)?(He(this.view,Jr.Selection.near(this.view.state.doc.resolve(this.pos.pos)),"pointer"),e.preventDefault()):this.view.selectionReader.poll("pointer"))},Ge.prototype.move=function(e){!this.allowDefault&&(4<Math.abs(this.event.x-e.clientX)||4<Math.abs(this.event.y-e.clientY))&&(this.allowDefault=!0),this.view.selectionReader.poll("pointer")},Le.touchdown=function(e){qe(e),e.selectionReader.poll("pointer")},Le.contextmenu=function(e){return qe(e)},Be.compositionstart=Be.compositionupdate=function(e){Ee.start(e,!0)},Be.compositionend=function(e,t){if(!e.inDOMChange){if(!t.data)return;Ee.start(e,!0)}e.inDOMChange.compositionEnd(t)},Be.input=function(e){var t=Ee.start(e);t.composing||t.finish()};var Xe=S.ie&&S.ie_version<15||S.ios&&S.webkit_version<604;function Ye(t,e,n,r){var o=Te(t,e,n,t.shiftKey,t.state.selection.$from);if(!o)return!1;if(t.someProp("handlePaste",function(e){return e(t,r,o)}))return!0;var i,a=0==(i=o).openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null,s=a?t.state.tr.replaceSelectionWith(a,t.shiftKey):t.state.tr.replaceSelection(o);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Le.copy=Be.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=Xe?null:t.clipboardData,i=De(e,n.content()),a=i.dom,s=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",s)):function(e,t){var n=t.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=n.createRange();i.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout(function(){n.body.removeChild(r),e.focus()},50)}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Be.paste=function(e,t){var n,r,o,i,a,s=Xe?null:t.clipboardData;s&&(Ye(e,s.getData("text/plain"),s.getData("text/html"),t)||0<s.files.length)?t.preventDefault():(r=t,o=(n=e).dom.ownerDocument,i=n.shiftKey||n.state.selection.$from.parent.type.spec.code,a=o.body.appendChild(o.createElement(i?"textarea":"div")),i||(a.contentEditable="true"),a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout(function(){n.focus(),o.body.removeChild(a),i?Ye(n,a.value,null,r):Ye(n,a.textContent,a.innerHTML,r)},50))};var Ze=function(e,t){this.slice=e,this.move=t},Qe=S.mac?"altKey":"ctrlKey";for(var et in Le.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,o=r.empty?null:e.posAtCoords(je(t));if(o&&o.pos>=r.from&&o.pos<=(r instanceof Jr.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(Jr.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(Jr.NodeSelection.create(e.state.doc,i.posBefore)))}var a=e.state.selection.content(),s=De(e,a),l=s.dom,c=s.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Xe?"Text":"text/html",l.innerHTML),Xe||t.dataTransfer.setData("text/plain",c),e.dragging=new Ze(a,!t[Qe])}},Le.dragend=function(e){window.setTimeout(function(){return e.dragging=null},50)},Be.dragover=Be.dragenter=function(e,t){return t.preventDefault()},Be.drop=function(t,n){var r=t.dragging;if(t.dragging=null,n.dataTransfer){var e=t.posAtCoords(je(n));if(e){var o=t.state.doc.resolve(e.pos);if(o){var i=r&&r.slice||Te(t,n.dataTransfer.getData(Xe?"Text":"text/plain"),Xe?null:n.dataTransfer.getData("text/html"),!1,o);if(i&&(n.preventDefault(),!t.someProp("handleDrop",function(e){return e(t,n,i,r&&r.move)}))){var a=i?qr.dropPoint(t.state.doc,o.pos,i):o.pos;null==a&&(a=o.pos);var s=t.state.tr;r&&r.move&&s.deleteSelection();var l=s.mapping.map(a),c=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,u=s.doc;if(c?s.replaceRangeWith(l,l,i.content.firstChild):s.replaceRange(l,l,i),!s.doc.eq(u)){var p=s.doc.resolve(l);c&&Jr.NodeSelection.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild)?s.setSelection(new Jr.NodeSelection(p)):s.setSelection(ye(t,p,s.doc.resolve(s.mapping.map(a)))),t.focus(),t.dispatch(s.setMeta("uiEvent","drop"))}}}}}},Le.focus=function(e){e.focused||(e.dom.classList.add("ProseMirror-focused"),e.focused=!0)},Le.blur=function(e){e.focused&&(e.dom.classList.remove("ProseMirror-focused"),e.focused=!1)},Be)Le[et]=Be[et];function tt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var nt=function(e,t){this.spec=t||lt,this.side=this.spec.side||0,this.toDOM=e};nt.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new it(i-n,i-n,this)},nt.prototype.valid=function(){return!0},nt.prototype.eq=function(e){return this==e||e instanceof nt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&tt(this.spec,e.spec))};var rt=function(e,t){this.spec=t||lt,this.attrs=e};rt.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i<=o?null:new it(o,i,this)},rt.prototype.valid=function(e,t){return t.from<t.to},rt.prototype.eq=function(e){return this==e||e instanceof rt&&tt(this.attrs,e.attrs)&&tt(this.spec,e.spec)},rt.is=function(e){return e.type instanceof rt};var ot=function(e,t){this.spec=t||lt,this.attrs=e};ot.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new it(o.pos-n,i.pos-n,this)},ot.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset;return o==t.from&&o+e.child(r).nodeSize==t.to},ot.prototype.eq=function(e){return this==e||e instanceof ot&&tt(this.attrs,e.attrs)&&tt(this.spec,e.spec)};var it=function(e,t,n){this.from=e,this.to=t,this.type=n},at={spec:{}};it.prototype.copy=function(e,t){return new it(e,t,this.type)},it.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},it.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},it.widget=function(e,t,n){return new it(e,e,new nt(t,n))},it.inline=function(e,t,n,r){return new it(e,t,new rt(n,r))},it.node=function(e,t,n,r){return new it(e,t,new ot(n,r))},at.spec.get=function(){return this.type.spec},Object.defineProperties(it.prototype,at);var st=[],lt={},ct=function(e,t){this.local=e&&e.length?e:st,this.children=t&&t.length?t:st};ct.create=function(e,t){return t.length?mt(t,e,0,lt):ut},ct.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},ct.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,n,r+l,o)}},ct.prototype.map=function(e,t,n){return this==ut||0==e.maps.length?this:this.mapInner(e,t,0,0,n||lt)},ct.prototype.mapInner=function(e,t,n,r,o){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(e,n,r);s&&s.type.valid(t,s)?(i||(i=[])).push(s):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?function(e,t,n,r,s,l,o){for(var c=e.slice(),i=function(e,t,n,r){for(var o=0;o<c.length;o+=3){var i=c[o+1],a=void 0;-1==i||i+l<e||(t>=c[o]+l?c[o+1]=-1:(a=r-n-(t-e)+(l-s))&&(c[o]+=a,c[o+1]+=a))}},a=0;a<n.maps.length;a++)n.maps[a].forEach(i);for(var u=!1,p=0;p<c.length;p+=3)if(-1==c[p+1]){var d=n.map(c[p]+l),f=d-s;if(f<0||f>=r.content.size){u=!0;continue}var h=n.map(e[p+1]+l,-1),m=h-s,v=r.content.findIndex(f),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==f&&y+b.nodeSize==m){var w=c[p+2].mapInner(n,b,d+1,c[p]+l+1,o);w!=ut?(c[p]=f,c[p+1]=m,c[p+2]=w):(c[p+1]=-2,u=!0)}else u=!0}if(u){var C=function(e,t,i,a,s,n,l){function c(e,t){for(var n=0;n<e.local.length;n++){var r=e.local[n].map(a,s,t);r?i.push(r):l.onRemove&&l.onRemove(e.local[n].spec)}for(var o=0;o<e.children.length;o+=3)c(e.children[o+2],e.children[o]+t+1)}for(var r=0;r<e.length;r+=3)-1==e[r+1]&&c(e[r+2],t[r]+n+1);return i}(c,e,t||[],n,s,l,o),k=mt(C,r,0,o);t=k.local;for(var E=0;E<c.length;E+=3)c[E+1]<0&&(c.splice(E,3),E-=3);for(var x=0,S=0;x<k.children.length;x+=3){for(var O=k.children[x];S<c.length&&c[S]<O;)S+=3;c.splice(S,0,k.children[x],k.children[x+1],k.children[x+2])}}return new ct(t&&t.sort(vt),c)}(this.children,i,e,t,n,r,o):i?new ct(i.sort(vt)):ut},ct.prototype.add=function(e,t){return t.length?this==ut?ct.create(e,t):this.addInner(e,t,0):this},ct.prototype.addInner=function(e,o,i){var a,s=this,l=0;e.forEach(function(e,t){var n,r=t+i;if(n=ft(o,e,r)){for(a||(a=s.children.slice());l<a.length&&a[l]<t;)l+=3;a[l]==t?a[l+2]=a[l+2].addInner(e,n,r+1):a.splice(l,0,t,t+e.nodeSize,mt(n,e,r+1,lt)),l+=3}});var t=dt(l?ht(o):o,-i);return new ct(t.length?this.local.concat(t).sort(vt):this.local,a||this.children)},ct.prototype.remove=function(e){return 0==e.length||this==ut?this:this.removeInner(e,0)},ct.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,a=n[o]+t,s=n[o+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>a&&c.to<s&&(e[l]=null,(i||(i=[])).push(c));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,a+1);u!=ut?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var p=0,d=void 0;p<e.length;p++)if(d=e[p])for(var f=0;f<r.length;f++)r[f].type.eq(d.type)&&(r==this.local&&(r=this.local.slice()),r.splice(f--,1));return n==this.children&&r==this.local?this:r.length||n.length?new ct(r,n):ut},ct.prototype.forChild=function(e,t){var n,r;if(this==ut)return this;if(t.isLeaf)return ct.empty;for(var o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,a=i+t.content.size,s=0;s<this.local.length;s++){var l=this.local[s];if(l.from<a&&l.to>i&&l.type instanceof rt){var c=Math.max(i,l.from)-i,u=Math.min(a,l.to)-i;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){var p=new ct(r.sort(vt));return n?new pt([p,n]):p}return n||ut},ct.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof ct)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!1},ct.prototype.locals=function(e){return gt(this.localsInner(e))},ct.prototype.localsInner=function(e){if(this==ut)return st;if(e.inlineContent||!this.local.some(rt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof rt||t.push(this.local[n]);return t};var ut=new ct;ct.empty=ut,ct.removeOverlap=gt;var pt=function(e){this.members=e};function dt(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new it(o.from+t,o.to+t,o.type))}return n}function ft(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,a=void 0;i<e.length;i++)(a=e[i])&&a.from>n&&a.to<r&&((o||(o=[])).push(a),e[i]=null);return o}function ht(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function mt(o,e,i,a){var s=[],l=!1;e.forEach(function(e,t){var n=ft(o,e,t+i);if(n){l=!0;var r=mt(n,e,i+t+1,a);r!=ut&&s.push(t,t+e.nodeSize,r)}});for(var t=dt(l?ht(o):o,-i).sort(vt),n=0;n<t.length;n++)t[n].type.valid(e,t[n])||(a.onRemove&&a.onRemove(t[n].spec),t.splice(n--,1));return t.length||s.length?new ct(t,s):ut}function vt(e,t){return e.from-t.from||e.to-t.to}function gt(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),yt(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),yt(t,o+1,i.copy(r.to,i.to)))}}return t}function yt(e,t,n){for(;t<e.length&&0<vt(n,e[t]);)t++;e.splice(t,0,n)}function bt(n){var r=[];return n.someProp("decorations",function(e){var t=e(n.state);t&&t!=ut&&r.push(t)}),n.cursorWrapper&&r.push(ct.create(n.state.doc,[n.cursorWrapper.deco])),pt.from(r)}pt.prototype.forChild=function(e,t){if(t.isLeaf)return ct.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=ut&&(o instanceof pt?n=n.concat(o.members):n.push(o))}return pt.from(n)},pt.prototype.eq=function(e){if(!(e instanceof pt)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},pt.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?gt(n?t:t.sort(vt)):st},pt.from=function(e){switch(e.length){case 0:return ut;case 1:return e[0];default:return new pt(e)}};var wt=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=xt(this),this.redraw=!1,this.cursorWrapper=null,Et(this),this.nodeViews=Ot(this),this.docView=I(this.state.doc,kt(this),bt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(n){n.shiftKey=!1,n.mouseDown=null,n.inDOMChange=null,n.lastKeyCode=null,n.lastKeyCodeTime=0,n.domObserver=new Ie(n),n.domObserver.start(),n.eventHandlers=Object.create(null);var e=function(e){var t=Le[e];n.dom.addEventListener(e,n.eventHandlers[e]=function(e){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(n,e)||ze(n,e)||!n.editable&&e.type in Be||t(n,e)})};for(var t in Le)e(t);Ve(n)}(this),this.selectionReader=new pe(this),this.pluginViews=[],this.updatePluginViews()},Ct={props:{},root:{}};function kt(n){var r=Object.create(null);return r.class="ProseMirror",r.contenteditable=String(n.editable),n.someProp("attributes",function(e){if("function"==typeof e&&(e=e(n.state)),e)for(var t in e)"class"==t?r.class+=" "+e[t]:r[t]||"contenteditable"==t||"nodeName"==t||(r[t]=String(e[t]))}),[it.node(0,n.state.doc.content.size,r)]}function Et(e){var t,n,r=ke(e.state);if(!r||S.ie&&e.mouseDown)e.cursorWrapper=null;else{var o,i=e.state.selection.visible,a=e.state.storedMarks||r.marks();e.cursorWrapper&&Ur.Mark.sameSet(e.cursorWrapper.deco.spec.marks,a)&&"\ufeff"==e.cursorWrapper.dom.textContent&&e.cursorWrapper.deco.spec.visible==i?e.cursorWrapper.deco.pos!=r.pos&&(o=e.cursorWrapper.dom):(t=i,(n=document.createElement("span")).textContent="\ufeff",t||(n.style.position="absolute",n.style.left="-100000px"),o=n),o&&(e.cursorWrapper={dom:o,deco:it.widget(r.pos,o,{isCursorWrapper:!0,marks:a,raw:!0,visible:i})})}}function xt(t){return!t.someProp("editable",function(e){return!1===e(t.state)})}function St(e){var t=e.getSelection(),n=t.focusOffset,r=t.focusNode;return r&&3!=r.nodeType?[r,n,1==r.nodeType?r.childNodes[n-1]:null,1==r.nodeType?r.childNodes[n]:null]:null}function Ot(e){var n={};return e.someProp("nodeViews",function(e){for(var t in e)Object.prototype.hasOwnProperty.call(n,t)||(n[t]=e[t])}),n}Ct.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},wt.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ve(this),this._props=e;var t=Ot(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(t,this.nodeViews)&&(this.nodeViews=t,this.redraw=!0),this.updateState(e.state)},wt.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},wt.prototype.updateState=function(e){var t=this,n=this.state;if(this.state=e,n.plugins!=e.plugins&&Ve(this),this.domObserver.flush(),!this.inDOMChange||!this.inDOMChange.stateUpdated(e)){var r=this.editable;this.editable=xt(this),Et(this);var o,i,a,s=bt(this),l=kt(this),c=n.config!=e.config?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",u=this.redraw||!this.docView.matchesNode(e.doc,l,s),p=u||!e.selection.eq(n.selection)||this.selectionReader.domChanged(),d="preserve"==c&&p&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=e.dom.ownerDocument,a=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var l=e.root.elementFromPoint(a,s);if(l!=e.dom&&e.dom.contains(l)){var c=l.getBoundingClientRect();if(c.top>=o-20){t=l,n=c.top;break}}}for(var u=[],p=e.dom;p&&(u.push({dom:p,top:p.scrollTop,left:p.scrollLeft}),p!=i.body);p=v(p));return{refDOM:t,refTop:n,stack:u}}(this);if(p){this.domObserver.stop();var f=!1;if(u){var h=S.chrome&&St(this.root);!this.redraw&&this.docView.update(e.doc,l,s,this)||(this.docView.destroy(),this.docView=I(e.doc,l,s,this.dom,this),this.redraw=!1),this.selectionReader.clearDOMState(),h&&(f=function(e,t){var n=St(t);if(!n||3==n[0].nodeType)return!1;for(var r=0;r<e.length;r++)if(n[r]!=e[r])return!0;return!1}(h,this.root))}!f&&this.mouseDown&&this.selectionReader.domChanged()&&(i=(o=this).docView.domFromPos(o.state.selection.anchor),a=o.root.getSelection(),g(i.node,i.offset,a.anchorNode,a.anchorOffset))||he(this,!1,f),this.domObserver.start()}if(r!=this.editable&&this.selectionReader.editableChanged(),this.updatePluginViews(n),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var m=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(e){return e(t)})||(e.selection instanceof Jr.NodeSelection?y(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),m):y(this,this.coordsAtPos(e.selection.head),m))}else d&&function(e){for(var t=e.refDOM,n=e.refTop,r=e.stack,o=t?t.getBoundingClientRect().top:0,i=0==o?0:o-n,a=0;a<r.length;a++){var s=r[a],l=s.dom,c=s.top,u=s.left;l.scrollTop!=c+i&&(l.scrollTop=c+i),l.scrollLeft!=u&&(l.scrollLeft=u)}}(d)}},wt.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},wt.prototype.updatePluginViews=function(e){var t=this.state.plugins;if(e&&e.plugins==t)for(var n=0;n<this.pluginViews.length;n++){var r=this.pluginViews[n];r.update&&r.update(this,e)}else{this.destroyPluginViews();for(var o=0;o<t.length;o++){var i=t[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},wt.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var a=o[i].props[e];if(null!=a&&(n=t?t(a):a))return n}},wt.prototype.hasFocus=function(){return this.root.activeElement==this.dom},wt.prototype.focus=function(){this.domObserver.stop(),he(this,!0),this.domObserver.start(),this.editable&&this.dom.focus()},Ct.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return this._root=t;return e||document},wt.prototype.posAtCoords=function(e){var t=u(this,e);return this.inDOMChange&&t&&(t.pos=this.inDOMChange.mapping.map(t.pos),-1!=t.inside&&(t.inside=this.inDOMChange.mapping.map(t.inside))),t},wt.prototype.coordsAtPos=function(e){return this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e)),p(this,e)},wt.prototype.domAtPos=function(e){return this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e)),this.docView.domFromPos(e)},wt.prototype.nodeDOM=function(e){this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e));var t=this.docView.descAt(e);return t?t.nodeDOM:null},wt.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return this.inDOMChange&&(r=this.inDOMChange.mapping.map(r)),r},wt.prototype.endOfTextblock=function(e,t){return A(this,t||this.state,e)},wt.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.inDOMChange&&e.inDOMChange.destroy(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t])}(this),this.destroyPluginViews(),this.selectionReader.destroy(),this.mounted?(this.docView.update(this.state.doc,[],bt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},wt.prototype.dispatchEvent=function(e){var t,n;ze(t=this,n=e)||!Le[n.type]||!t.editable&&n.type in Be||Le[n.type](t,n)},wt.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(wt.prototype,Ct),t.EditorView=wt,t.Decoration=it,t.DecorationSet=ct,t.__serializeForClipboard=De,t.__parseFromClipboard=Te});v(ta);ta.EditorView,ta.Decoration,ta.DecorationSet,ta.__serializeForClipboard,ta.__parseFromClipboard;var na=g(function(e,t){var n,r;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"!=typeof WeakMap){var o=new WeakMap;n=function(e){return o.get(e)},r=function(e,t){return o.set(e,t),t}}else{var i=[],a=0;n=function(e){for(var t=0;t<i.length;t+=2)if(i[t]==e)return i[t+1]},r=function(e,t){return 10==a&&(a=0),i[a++]=e,i[a++]=t}}var d=function(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r},D=function(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r};function T(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}D.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,a=o+1,s=1;i<this.width&&this.map[t+s]==n;s++)i++;for(var l=1;a<this.height&&this.map[t+this.width*l]==n;l++)a++;return new d(r,o,i,a)}}throw new RangeError("No cell with offset "+e+" found")},D.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},D.prototype.nextCell=function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,a=r.top,s=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[a*this.width+(n<0?o-1:i)]:(n<0?0==a:s==this.height)?null:this.map[o+this.width*(n<0?a-1:s)]},D.prototype.rectBetween=function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,a=n.bottom,s=this.findCell(t),l=s.left,c=s.right,u=s.top,p=s.bottom;return new d(Math.min(r,l),Math.min(i,u),Math.max(o,c),Math.max(a,p))},D.prototype.cellsInRect=function(e){for(var t=[],n=[],r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,a=this.map[i];-1<n.indexOf(a)||(n.push(a),o==e.left&&o&&this.map[i-1]==a||r==e.top&&r&&this.map[i-this.width]==a||t.push(a))}return t},D.prototype.positionAt=function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){for(var a=t+e*this.width,s=(e+1)*this.width;a<s&&this.map[a]<o;)a++;return a==s?i-1:this.map[a]}o=i}},D.get=function(e){return n(e)||r(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var a=0;a<r;a++)for(var s=e.child(a),l=0;l<s.childCount;l++){var c=s.child(l);a+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}for(var u=0;u<o.childCount;u++){var p=o.child(u);i+=p.attrs.colspan,1<p.attrs.rowspan&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,a=[],s=0,l=t*n;s<l;s++)r[s]=0;for(var c=0,u=0;c<n;c++){var p=e.child(c);u++;for(var d=0;;d++){for(;o<r.length&&0!=r[o];)o++;if(d==p.childCount)break;for(var f=p.child(d),h=f.attrs,m=h.colspan,v=h.rowspan,g=h.colwidth,y=0;y<v;y++){if(n<=y+c){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:v-y});break}for(var b=o+y*t,w=0;w<m;w++){0==r[b+w]?r[b+w]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:m-w});var C=g&&g[w];if(C){var k=(b+w)%t*2,E=a[k];null==E||E!=C&&1==a[k+1]?(a[k]=C,a[k+1]=1):E==C&&a[k+1]++}}}o+=m,u+=f.nodeSize}for(var x=(c+1)*t,S=0;o<x;)0==r[o++]&&S++;S&&(i||(i=[])).push({type:"missing",row:c,n:S}),u++}for(var O=new D(t,n,r,i),M=!1,A=0;!M&&A<a.length;A+=2)null!=a[A]&&a[A+1]<n&&(M=!0);M&&function(e,t,n){e.problems||(e.problems=[]);for(var r=0,o=[];r<e.map.length;r++){var i=e.map[r];if(!(-1<o.indexOf(i))){o.push(i);for(var a=n.nodeAt(i),s=null,l=0;l<a.attrs.colspan;l++){var c=(r+l)%e.width,u=t[2*c];null==u||a.attrs.colwidth&&a.attrs.colwidth[l]==u||((s||(s=T(a.attrs)))[l]=u)}s&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}}(O,a,e);return O}(e))};var l=new Jr.PluginKey("selectingCells");function g(e){for(var t=e.depth-1;0<t;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function u(e){for(var t=e.selection.$head,n=t.depth;0<n;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function p(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:g(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var a=o.type.spec.tableRole;if("cell"==a||"header_cell"==a)return e.doc.resolve(i-o.nodeSize)}}(t.$head)}function c(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function s(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function f(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function h(e,t,n){var r=e.start(-1),o=D.get(e.node(-1)).nextCell(e.pos-r,t,n);return null==o?null:e.node(0).resolve(r+o)}function S(e,t,n){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r}function O(e,t,n){void 0===n&&(n=1);var r=S(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(function(e){return 0<e})||(r.colwidth=null)),r}function y(e,t,n){void 0===n&&(n=1);var r=S(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}var b=function(u){function s(e,t){void 0===t&&(t=e);var r=e.node(-1),n=D.get(r),o=e.start(-1),i=n.rectBetween(e.pos-o,t.pos-o),a=e.node(0),s=n.cellsInRect(i).filter(function(e){return e!=t.pos-o});s.unshift(t.pos-o);var l=s.map(function(e){var t=r.nodeAt(e),n=e+o+1;return new Jr.SelectionRange(a.resolve(n),a.resolve(n+t.content.size))});u.call(this,l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=t}return u&&(s.__proto__=u),((s.prototype=Object.create(u&&u.prototype)).constructor=s).prototype.map=function(e,t){var n=e.resolve(t.map(this.$anchorCell.pos)),r=e.resolve(t.map(this.$headCell.pos));if(c(n)&&c(r)&&f(n,r)){var o=this.$anchorCell.node(-1)!=n.node(-1);return o&&this.isRowSelection()?s.rowSelection(n,r):o&&this.isColSelection()?s.colSelection(n,r):new s(n,r)}return Jr.TextSelection.between(n,r)},s.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=D.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o=[],i=[],a=r.top;a<r.bottom;a++){for(var s=[],l=a*t.width+r.left,c=r.left;c<r.right;c++,l++){var u=t.map[l];if(-1==o.indexOf(u)){o.push(u);var p=t.findCell(u),d=e.nodeAt(u),f=r.left-p.left,h=p.right-r.right;if(0<f||0<h){var m=d.attrs;0<f&&(m=O(m,0,f)),0<h&&(m=O(m,m.colspan-h,h)),d=p.left<r.left?d.type.createAndFill(m):d.type.create(m,d.content)}if(p.top<r.top||p.bottom>r.bottom){var v=S(d.attrs,"rowspan",Math.min(p.bottom,r.bottom)-Math.max(p.top,r.top));d=p.top<r.top?d.type.createAndFill(v):d.type.create(v,d.content)}s.push(d)}}i.push(e.child(a).copy(Ur.Fragment.from(s)))}var g=this.isColSelection()&&this.isRowSelection()?e:i;return new Ur.Slice(Ur.Fragment.from(g),1,1)},s.prototype.replace=function(e,t){void 0===t&&(t=Ur.Slice.empty);for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,l=e.mapping.slice(n);e.replace(l.map(a.pos),l.map(s.pos),o?Ur.Slice.empty:t)}var c=u.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);c&&e.setSelection(c)},s.prototype.replaceWith=function(e,t){this.replace(e,new Ur.Slice(Ur.Fragment.from(t),0,0))},s.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=D.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])},s.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(0<Math.min(e,t))return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},s.colSelection=function(e,t){void 0===t&&(t=e);var n=D.get(e.node(-1)),r=e.start(-1),o=n.findCell(e.pos-r),i=n.findCell(t.pos-r),a=e.node(0);return o.top<=i.top?(0<o.top&&(e=a.resolve(r+n.map[o.left])),i.bottom<n.height&&(t=a.resolve(r+n.map[n.width*(n.height-1)+i.right-1]))):(0<i.top&&(t=a.resolve(r+n.map[i.left])),o.bottom<n.height&&(e=a.resolve(r+n.map[n.width*(n.height-1)+o.right-1]))),new s(e,t)},s.prototype.isRowSelection=function(){var e=D.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);if(0<Math.min(n,r))return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==e.width},s.prototype.eq=function(e){return e instanceof s&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},s.rowSelection=function(e,t){void 0===t&&(t=e);var n=D.get(e.node(-1)),r=e.start(-1),o=n.findCell(e.pos-r),i=n.findCell(t.pos-r),a=e.node(0);return o.left<=i.left?(0<o.left&&(e=a.resolve(r+n.map[o.top*n.width])),i.right<n.width&&(t=a.resolve(r+n.map[n.width*(i.top+1)-1]))):(0<i.left&&(t=a.resolve(r+n.map[i.top*n.width])),o.right<n.width&&(e=a.resolve(r+n.map[n.width*(o.top+1)-1]))),new s(e,t)},s.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},s.fromJSON=function(e,t){return new s(e.resolve(t.anchor),e.resolve(t.head))},s.create=function(e,t,n){return void 0===n&&(n=t),new s(e.resolve(t),e.resolve(n))},s.prototype.getBookmark=function(){return new m(this.$anchorCell.pos,this.$headCell.pos)},s}(Jr.Selection);b.prototype.visible=!1,Jr.Selection.jsonID("cell",b);var m=function(e,t){this.anchor=e,this.head=t};function v(e){if(!(e.selection instanceof b))return null;var n=[];return e.selection.forEachCell(function(e,t){n.push(ta.Decoration.node(t,t+e.nodeSize,{class:"selectedCell"}))}),ta.DecorationSet.create(e.doc,n)}function w(e,t){var n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(function(e){return Number(e)}):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var a in t){var s=t[a].getFromDOM,l=s&&s(e);null!=l&&(i[a]=l)}return i}function C(e,t){var n={};for(var r in 1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(",")),t){var o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function M(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}function k(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(0<n&&0<r||"table"==t.firstChild.type.spec.tableRole);)n--,r--,t=t.firstChild.content;var o=t.firstChild,i=o.type.spec.tableRole,a=o.type.schema,s=[];if("row"==i)for(var l=0;l<t.childCount;l++){var c=t.child(l).content,u=l?0:Math.max(0,n-1),p=l<t.childCount-1?0:Math.max(0,r-1);(u||p)&&(c=E(M(a).row,new Ur.Slice(c,u,p)).content),s.push(c)}else{if("cell"!=i&&"header_cell"!=i)return null;s.push(n||r?E(M(a).row,new Ur.Slice(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],i=o.childCount-1;0<=i;i--)for(var a=o.child(i).attrs,s=a.rowspan,l=a.colspan,c=r;c<r+s;c++)n[c]=(n[c]||0)+l;for(var u=0,p=0;p<n.length;p++)u=Math.max(u,n[p]);for(var d=0;d<n.length;d++)if(d>=t.length&&t.push(Ur.Fragment.empty),n[d]<u){for(var f=M(e).cell.createAndFill(),h=[],m=n[d];m<u;m++)h.push(f);t[d]=t[d].append(Ur.Fragment.from(h))}return{height:t.length,width:u,rows:t}}(a,s)}function E(e,t){var n=e.createAndFill();return new qr.Transform(n).replace(0,n.content.size,t).doc}function x(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var a=[],s=[],l=0;l<i.length;l++){for(var c=i[l],u=[],p=a[l]||0,d=0;p<t;d++){var f=c.child(d%c.childCount);p+f.attrs.colspan>t&&(f=f.type.create(O(f.attrs,f.attrs.colspan,p+f.attrs.colspan-t),f.content)),u.push(f),p+=f.attrs.colspan;for(var h=1;h<f.attrs.rowspan;h++)a[l+h]=(a[l+h]||0)+f.attrs.colspan}s.push(Ur.Fragment.from(u))}i=s,r=t}if(o!=n){for(var m=[],v=0,g=0;v<n;v++,g++){for(var y=[],b=i[g%o],w=0;w<b.childCount;w++){var C=b.child(w);v+C.attrs.rowspan>n&&(C=C.type.create(S(C.attrs,"rowspan",n-C.attrs.rowspan),C.content)),y.push(C)}m.push(Ur.Fragment.from(y))}i=m,o=n}return{width:r,height:o,rows:i}}function A(e,t,n,r,o,i,a,s){if(0==a||a==t.height)return!1;for(var l=!1,c=o;c<i;c++){var u=a*t.width+c,p=t.map[u];if(t.map[u-t.width]==p){l=!0;var d=n.nodeAt(p),f=t.findCell(p),h=f.top,m=f.left;e.setNodeMarkup(e.mapping.slice(s).map(p+r),null,S(d.attrs,"rowspan",a-h)),e.insert(e.mapping.slice(s).map(t.positionAt(a,m,n)),d.type.createAndFill(S(d.attrs,"rowspan",h+d.attrs.rowspan-a))),c+=d.attrs.colspan-1}}return l}function N(e,t,n,r,o,i,a,s){if(0==a||a==t.width)return!1;for(var l=!1,c=o;c<i;c++){var u=c*t.width+a,p=t.map[u];if(t.map[u-1]==p){l=!0;var d=n.nodeAt(p),f=t.colCount(p),h=e.mapping.slice(s).map(p+r);e.setNodeMarkup(h,null,O(d.attrs,a-f,d.attrs.colspan-(a-f))),e.insert(h+d.nodeSize,d.type.createAndFill(O(d.attrs,0,a-f))),c+=d.attrs.rowspan-1}}return l}function R(e,t,n,r,o){var i=n?e.doc.nodeAt(n-1):e.doc,a=D.get(i),s=r.top,l=r.left,c=l+o.width,u=s+o.height,p=e.tr,d=0;function f(){i=n?p.doc.nodeAt(n-1):p.doc,a=D.get(i),d=p.mapping.maps.length}(function(e,t,n,r,o,i,a){var s,l,c=M(e.doc.type.schema);if(o>t.width)for(var u=0,p=0;u<t.height;u++){var d=n.child(u);p+=d.nodeSize;var f=[],h=void 0;h=null==d.lastChild||d.lastChild.type==c.cell?s||(s=c.cell.createAndFill()):l||(l=c.header_cell.createAndFill());for(var m=t.width;m<o;m++)f.push(h);e.insert(e.mapping.slice(a).map(p-1+r),f)}if(i>t.height){for(var v=[],g=0,y=(t.height-1)*t.width;g<Math.max(t.width,o);g++){var b=!(g>=t.width)&&n.nodeAt(t.map[y+g]).type==c.header_cell;v.push(b?l||(l=c.header_cell.createAndFill()):s||(s=c.cell.createAndFill()))}for(var w=c.row.create(null,Ur.Fragment.from(v)),C=[],k=t.height;k<i;k++)C.push(w);e.insert(e.mapping.slice(a).map(r+n.nodeSize-2),C)}return!(!s&&!l)})(p,a,i,n,c,u,d)&&f(),A(p,a,i,n,l,c,s,d)&&f(),A(p,a,i,n,l,c,u,d)&&f(),N(p,a,i,n,s,u,l,d)&&f(),N(p,a,i,n,s,u,c,d)&&f();for(var h=s;h<u;h++){var m=a.positionAt(h,l,i),v=a.positionAt(h,c,i);p.replace(p.mapping.slice(d).map(m+n),p.mapping.slice(d).map(v+n),new Ur.Slice(o.rows[h-s],0,0))}f(),p.setSelection(new b(p.doc.resolve(n+a.positionAt(s,l,i)),p.doc.resolve(n+a.positionAt(u-1,c-1,i)))),t(p)}m.prototype.map=function(e){return new m(e.map(this.anchor),e.map(this.head))},m.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&f(t,n)?new b(t,n):Jr.Selection.near(n,1)};var P=mo.keydownHandler({ArrowLeft:_("horiz",-1),ArrowRight:_("horiz",1),ArrowUp:_("vert",-1),ArrowDown:_("vert",1),"Shift-ArrowLeft":I("horiz",-1),"Shift-ArrowRight":I("horiz",1),"Shift-ArrowUp":I("vert",-1),"Shift-ArrowDown":I("vert",1),Backspace:L,"Mod-Backspace":L,Delete:L,"Mod-Delete":L});function F(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function _(s,l){return function(e,t,n){var r=e.selection;if(r instanceof b)return F(e,t,Jr.Selection.near(r.$headCell,l));if("horiz"!=s&&!r.empty)return!1;var o=j(n,s,l);if(null==o)return!1;if("horiz"==s)return F(e,t,Jr.Selection.near(e.doc.resolve(r.head+l),l));var i=e.doc.resolve(o),a=h(i,s,l);return F(e,t,a?Jr.Selection.near(a,1):l<0?Jr.Selection.near(e.doc.resolve(i.before(-1)),-1):Jr.Selection.near(e.doc.resolve(i.after(-1)),1))}}function I(a,s){return function(e,t,n){var r=e.selection;if(!(r instanceof b)){var o=j(n,a,s);if(null==o)return!1;r=new b(e.doc.resolve(o))}var i=h(r.$headCell,a,s);return!!i&&F(e,t,new b(r.$anchorCell,i))}}function L(e,t){var n=e.selection;if(!(n instanceof b))return!1;if(t){var r=e.tr,o=M(e.schema).cell.createAndFill().content;n.forEachCell(function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new Ur.Slice(o,0,0))}),r.docChanged&&t(r)}return!0}function B(e,t){var n=g(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new b(n))),!0)}function V(e,t,n){if(!u(e.state))return!1;var r=k(n),o=e.state.selection;if(o instanceof b){r||(r={width:1,height:1,rows:[Ur.Fragment.from(E(M(e.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),s=D.get(i).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return r=x(r,s.right-s.left,s.bottom-s.top),R(e.state,e.dispatch,a,s,r),!0}if(r){var l=p(e.state),c=l.start(-1);return R(e.state,e.dispatch,c,D.get(l.node(-1)).findCell(l.pos-c),r),!0}return!1}function z(a,r){if(!r.ctrlKey&&!r.metaKey){var e,o=$(a,r.target);if(r.shiftKey&&a.state.selection instanceof b)i(a.state.selection.$anchorCell,r),r.preventDefault();else if(r.shiftKey&&o&&null!=(e=g(a.state.selection.$anchor))&&W(a,r).pos!=e.pos)i(e,r),r.preventDefault();else if(!o)return;a.root.addEventListener("mouseup",s),a.root.addEventListener("dragstart",s),a.root.addEventListener("mousemove",t)}function i(e,t){var n=W(a,t),r=null==l.getState(a.state);if(!n||!f(e,n)){if(!r)return;n=e}var o=new b(e,n);if(r||!a.state.selection.eq(o)){var i=a.state.tr.setSelection(o);r&&i.setMeta(l,e.pos),a.dispatch(i)}}function s(){a.root.removeEventListener("mouseup",s),a.root.removeEventListener("dragstart",s),a.root.removeEventListener("mousemove",t),null!=l.getState(a.state)&&a.dispatch(a.state.tr.setMeta(l,-1))}function t(e){var t,n=l.getState(a.state);if(null!=n)t=a.state.doc.resolve(n);else if($(a,e.target)!=o&&!(t=W(a,r)))return s();t&&i(t,e)}}function j(e,t,n){if(!(e.state.selection instanceof Jr.TextSelection))return null;for(var r=e.state.selection.$head,o=r.depth-1;0<=o;o--){var i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){var a=r.before(o),s="vert"==t?0<n?"down":"up":0<n?"right":"left";return e.endOfTextblock(s)?a:null}}return null}function $(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function W(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?g(e.state.doc.resolve(n.pos)):null}function H(n,e){var r,t=function(e,t){"table"==e.type.spec.tableRole&&(r=function(e,t,n,r){var o=D.get(t);if(!o.problems)return r;r||(r=e.tr);for(var i,a,s=[],l=0;l<o.height;l++)s.push(0);for(var c=0;c<o.problems.length;c++){var u=o.problems[c];if("collision"==u.type){for(var p=t.nodeAt(u.pos),d=0;d<p.attrs.rowspan;d++)s[u.row+d]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,O(p.attrs,p.attrs.colspan-u.n,u.n))}else if("missing"==u.type)s[u.row]+=u.n;else if("overlong_rowspan"==u.type){var f=t.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,S(f.attrs,"rowspan",f.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var h=t.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,S(h.attrs,"colwidth",u.colwidth))}}for(var m=0;m<s.length;m++)s[m]&&(null==i&&(i=m),a=m);for(var v=0,g=n+1;v<o.height;v++){var y=t.child(v),b=g+y.nodeSize,w=s[v];if(0<w){var C="cell";y.firstChild&&(C=y.firstChild.type.spec.tableRole);for(var k=[],E=0;E<w;E++)k.push(M(e.schema)[C].createAndFill());var x=0!=v&&i!=v-1||a!=v?b-1:g+1;r.insert(r.mapping.map(x),k)}g=b}return r}(n,e,t,r))};return e?e.doc!=n.doc&&function e(t,n,r,o){var i=t.childCount,a=n.childCount;e:for(var s=0,l=0;s<a;s++){for(var c=n.child(s),u=l,p=Math.min(i,s+3);u<p;u++)if(t.child(u)==c){l=u+1,r+=c.nodeSize;continue e}o(c,r),l<i&&t.child(l).sameMarkup(c)?e(t.child(l),c,r+1,o):c.nodesBetween(0,c.content.size,o,r+1),r+=c.nodeSize}}(e.doc,n.doc,0,t):n.doc.descendants(t),r}function U(e){var t,n=e.selection,r=p(e),o=r.node(-1),i=r.start(-1),a=D.get(o);return(t=n instanceof b?a.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):a.findCell(r.pos-i)).tableStart=i,t.map=a,t.table=o,t}function K(e,t,n){var r=t.map,o=t.tableStart,i=t.table,a=0<n?-1:0;(function(e,t,n){for(var r=M(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0})(r,i,n+a)&&(a=0==n||n==r.width?null:0);for(var s=0;s<r.height;s++){var l=s*r.width+n;if(0<n&&n<r.width&&r.map[l-1]==r.map[l]){var c=r.map[l],u=i.nodeAt(c);e.setNodeMarkup(e.mapping.map(o+c),null,y(u.attrs,n-r.colCount(c))),s+=u.attrs.rowspan-1}else{var p=null==a?M(i.type.schema).cell:i.nodeAt(r.map[l+a]).type,d=r.positionAt(s,n,i);e.insert(e.mapping.map(o+d),p.createAndFill())}}return e}function q(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=e.mapping.maps.length,s=0;s<r.height;){var l=s*r.width+n,c=r.map[l],u=o.nodeAt(c);if(0<n&&r.map[l-1]==c||n<r.width-1&&r.map[l+1]==c)e.setNodeMarkup(e.mapping.slice(a).map(i+c),null,O(u.attrs,n-r.colCount(c)));else{var p=e.mapping.slice(a).map(i+c);e.delete(p,p+u.nodeSize)}s+=u.attrs.rowspan}}function J(e,t,n){for(var r=t.map,o=t.tableStart,i=t.table,a=o,s=0;s<n;s++)a+=i.child(s).nodeSize;var l=[],c=0<n?-1:0;(function(e,t,n){for(var r=M(t.type.schema).header_cell,o=0;o<e.width;o++)if(t.nodeAt(e.map[o+n*e.width]).type!=r)return!1;return!0})(r,i,n+c)&&(c=0==n||n==r.height?null:0);for(var u=0,p=r.width*n;u<r.width;u++,p++)if(0<n&&n<r.height&&r.map[p]==r.map[p-r.width]){var d=r.map[p],f=i.nodeAt(d).attrs;e.setNodeMarkup(o+d,null,S(f,"rowspan",f.rowspan+1)),u+=f.colspan-1}else{var h=null==c?M(i.type.schema).cell:i.nodeAt(r.map[p+c*r.width]).type;l.push(h.createAndFill())}return e.insert(a,M(i.type.schema).row.create(null,l)),e}function G(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=0,s=0;s<n;s++)a+=o.child(s).nodeSize;var l=a+o.child(n).nodeSize,c=e.mapping.maps.length;e.delete(a+i,l+i);for(var u=0,p=n*r.width;u<r.width;u++,p++){var d=r.map[p];if(0<n&&d==r.map[p-r.width]){var f=o.nodeAt(d).attrs;e.setNodeMarkup(e.mapping.slice(c).map(d+i),null,S(f,"rowspan",f.rowspan-1)),u+=f.colspan-1}else if(n<r.width&&d==r.map[p+r.width]){var h=o.nodeAt(d),m=h.type.create(S(h.attrs,"rowspan",h.attrs.rowspan-1),h.content),v=r.positionAt(n+1,u,o);e.insert(e.mapping.slice(c).map(i+v),m),u+=h.attrs.colspan-1}}}function X(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function Y(c){return function(e,t){if(!u(e))return!1;if(t){for(var n=M(e.schema),r=U(e),o=e.tr,i=r.map.cellsInRect("column"==c?new d(r.left,0,r.right,r.map.height):"row"==c?new d(0,r.top,r.map.width,r.bottom):r),a=i.map(function(e){return r.table.nodeAt(e)}),s=0;s<i.length;s++)a[s].type==n.header_cell&&o.setNodeMarkup(r.tableStart+i[s],n.cell,a[s].attrs);if(0==o.steps.length)for(var l=0;l<i.length;l++)o.setNodeMarkup(r.tableStart+i[l],n.header_cell,a[l].attrs);t(o)}return!0}}var Z=Y("row"),Q=Y("column"),ee=Y("cell");var te=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ne(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function ne(e,t,n,r,o,i){for(var a=0,s=!0,l=t.firstChild,c=e.firstChild,u=0,p=0;u<c.childCount;u++)for(var d=c.child(u).attrs,f=d.colspan,h=d.colwidth,m=0;m<f;m++,p++){var v=o==p?i:h&&h[m],g=v?v+"px":"";a+=v||r,v||(s=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=g}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}n.style.minWidth=s?(n.style.width=a+"px",""):(n.style.width="",a+"px")}te.prototype.update=function(e){return e.type==this.node.type&&(ne(this.node=e,this.colgroup,this.table,this.cellMinWidth),!0)},te.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var re=new Jr.PluginKey("tableColumnResizing");var oe=function(e,t){this.activeHandle=e,this.dragging=t};function ie(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY}).pos,o=g(e.state.doc.resolve(r));if(!o)return-1;if("right"==n)return o.pos;var i=D.get(o.node(-1)),a=o.start(-1),s=i.map.indexOf(o.pos-a);return s%i.width==0?-1:a+i.map[s-1]}function ae(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function se(e,t){e.dispatch(e.state.tr.setMeta(re,{setHandle:t}))}function le(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}oe.prototype.apply=function(e){var t=this,n=e.getMeta(re);if(n&&null!=n.setHandle)return new oe(n.setHandle,null);if(n&&void 0!==n.setDragging)return new oe(t.activeHandle,n.setDragging);if(-1<t.activeHandle&&e.docChanged){var r=e.mapping.map(t.activeHandle,-1);c(e.doc.resolve(r))||(r=null),t=new oe(r,t.dragging)}return t},t.tableEditing=function(){return new Jr.Plugin({key:l,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(l);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:v,handleDOMEvents:{mousedown:z},createSelectionBetween:function(e){if(null!=l.getState(e.state))return e.state.selection},handleTripleClick:B,handleKeyDown:P,handlePaste:V},appendTransaction:function(e,t,n){return function(e,t){var n,r,o=(t||e).selection,i=(t||e).doc;if(o instanceof Jr.NodeSelection&&(r=o.node.type.spec.tableRole))if("cell"==r||"header_cell"==r)n=b.create(i,o.from);else if("row"==r){var a=i.resolve(o.from+1);n=b.rowSelection(a,a)}else{var s=D.get(o.node),l=o.from+1,c=l+s.map[s.width*s.height-1];n=b.create(i,l+1,c)}else o instanceof Jr.TextSelection&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;0<=i&&!(t.after(i+1)<t.end(i));i--,r++);for(var a=n.depth;0<=a&&!(n.before(a+1)>n.start(a));a--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(o)?n=Jr.TextSelection.create(i,o.from):o instanceof Jr.TextSelection&&function(e){for(var t,n,r=e.$from,o=e.$to,i=r.depth;0<i;i--){var a=r.node(i);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){t=a;break}}for(var s=o.depth;0<s;s--){var l=o.node(s);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){n=l;break}}return t!==n&&0===o.parentOffset}(o)&&(n=Jr.TextSelection.create(i,o.$from.start(),o.$from.end()));return n&&(t||(t=e.tr)).setSelection(n),t}(n,H(n,t))}})},t.fixTables=H,t.handlePaste=V,t.cellAround=g,t.isInTable=u,t.selectionCell=p,t.moveCellForward=s,t.inSameTable=f,t.findCell=function(e){return D.get(e.node(-1)).findCell(e.pos-e.start(-1))},t.colCount=function(e){return D.get(e.node(-1)).colCount(e.pos-e.start(-1))},t.nextCell=h,t.tableNodes=function(e){var t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(e){return w(e,t)}}],toDOM:function(e){return["td",C(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(e){return w(e,t)}}],toDOM:function(e){return["th",C(e,t),0]}}}},t.CellSelection=b,t.TableMap=D,t.columnResizing=function(e){void 0===e&&(e={});var n=e.handleWidth;void 0===n&&(n=5);var r=e.cellMinWidth;void 0===r&&(r=25);var o=e.View;void 0===o&&(o=te);var i=e.lastColumnResizable;return void 0===i&&(i=!0),new Jr.Plugin({key:re,state:{init:function(e,t){return this.spec.props.nodeViews[M(t.schema).table.name]=function(e,t){return new o(e,r,t)},new oe(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return-1<re.getState(e).activeHandle?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,t){!function(e,t,n,r,o){var i=re.getState(e.state);if(!i.dragging){var a=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),s=-1;if(a){var l=a.getBoundingClientRect(),c=l.left,u=l.right;t.clientX-c<=n?s=ie(e,t,"left"):u-t.clientX<=n&&(s=ie(e,t,"right"))}if(s!=i.activeHandle){if(!o&&-1!==s){var p=e.state.doc.resolve(s),d=p.node(-1),f=D.get(d),h=p.start(-1),m=f.colCount(p.pos-h)+p.nodeAfter.attrs.colspan-1;if(m==f.width-1)return}se(e,s)}}}(e,t,n,0,i)},mouseleave:function(e){var t,n;t=e,-1<(n=re.getState(t.state)).activeHandle&&!n.dragging&&se(t,-1)},mousedown:function(e,t){!function(r,e,o){var t=re.getState(r.state);if(-1!=t.activeHandle&&!t.dragging){var n=r.state.doc.nodeAt(t.activeHandle),i=function(e,t,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var a=e.domAtPos(t),s=a.node.childNodes[a.offset].offsetWidth,l=r;if(o)for(var c=0;c<r;c++)o[c]&&(s-=o[c],l--);return s/l}(r,t.activeHandle,n.attrs);r.dispatch(r.state.tr.setMeta(re,{setDragging:{startX:e.clientX,startWidth:i}})),window.addEventListener("mouseup",a),window.addEventListener("mousemove",s),e.preventDefault()}function a(e){window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",s);var t=re.getState(r.state);t.dragging&&(function(e,t,n){for(var r=e.state.doc.resolve(t),o=r.node(-1),i=D.get(o),a=r.start(-1),s=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,l=e.state.tr,c=0;c<i.height;c++){var u=c*i.width+s;if(!c||i.map[u]!=i.map[u-i.width]){var p=i.map[u],d=o.nodeAt(p),f=d.attrs,h=1==f.colspan?0:s-i.colCount(p);if(!f.colwidth||f.colwidth[h]!=n){var m=f.colwidth?f.colwidth.slice():le(f.colspan);m[h]=n,l.setNodeMarkup(a+p,null,S(f,"colwidth",m))}}}l.docChanged&&e.dispatch(l)}(r,t.activeHandle,ae(t.dragging,e,o)),r.dispatch(r.state.tr.setMeta(re,{setDragging:null})))}function s(e){if(!e.which)return a(e);var t=re.getState(r.state),n=ae(t.dragging,e,o);!function(e,t,n,r){for(var o=e.state.doc.resolve(t),i=o.node(-1),a=o.start(-1),s=D.get(i).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1,l=e.domAtPos(o.start(-1)).node;"TABLE"!=l.nodeName;)l=l.parentNode;ne(i,l.firstChild,l,r,s,n)}(r,t.activeHandle,n,o)}}(e,t,r)}},decorations:function(e){var t=re.getState(e);if(-1<t.activeHandle)return function(e,t){for(var n=[],r=e.doc.resolve(t),o=r.node(-1),i=D.get(o),a=r.start(-1),s=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan,l=0;l<i.height;l++){var c=s+l*i.width-1;if(!(s!=i.width&&i.map[c]==i.map[c+1]||0!=l&&i.map[c-1]==i.map[c-1-i.width])){var u=i.map[c],p=a+u+o.nodeAt(u).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",n.push(ta.Decoration.widget(p,d))}}return ta.DecorationSet.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}})},t.columnResizingPluginKey=re,t.updateColumnsOnResize=ne,t.__pastedCells=k,t.__insertCells=R,t.__clipCells=x,t.addColumn=K,t.addColumnBefore=function(e,t){if(!u(e))return!1;if(t){var n=U(e);t(K(e.tr,n,n.left))}return!0},t.addColumnAfter=function(e,t){if(!u(e))return!1;if(t){var n=U(e);t(K(e.tr,n,n.right))}return!0},t.removeColumn=q,t.deleteColumn=function(e,t){if(!u(e))return!1;if(t){var n=U(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;q(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=D.get(n.table);t(r)}return!0},t.addRow=J,t.addRowBefore=function(e,t){if(!u(e))return!1;if(t){var n=U(e);t(J(e.tr,n,n.top))}return!0},t.addRowAfter=function(e,t){if(!u(e))return!1;if(t){var n=U(e);t(J(e.tr,n,n.bottom))}return!0},t.removeRow=G,t.deleteRow=function(e,t){if(!u(e))return!1;if(t){var n=U(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;G(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=D.get(n.table);t(r)}return!0},t.mergeCells=function(e,t){var n=e.selection;if(!(n instanceof b)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=U(e),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,a=i,s=(t.bottom-1)*n+t.left,l=i+(t.right-t.left-1),c=t.top;c<t.bottom;c++){if(0<t.left&&o[a]==o[a-1]||t.right<n&&o[l]==o[l+1])return!0;a+=n,l+=n}for(var u=t.left;u<t.right;u++){if(0<t.top&&o[i]==o[i-n]||t.bottom<r&&o[s]==o[s+n])return!0;i++,s++}return!1}(o,r))return!1;if(t){for(var i,a,s=e.tr,l=[],c=Ur.Fragment.empty,u=r.top;u<r.bottom;u++)for(var p=r.left;p<r.right;p++){var d=o.map[u*o.width+p],f=r.table.nodeAt(d);if(!(-1<l.indexOf(d)))if(l.push(d),null==i)i=d,a=f;else{X(f)||(c=c.append(f.content));var h=s.mapping.map(d+r.tableStart);s.delete(h,h+f.nodeSize)}}if(s.setNodeMarkup(i+r.tableStart,null,S(y(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan),"rowspan",r.bottom-r.top)),c.size){var m=i+1+a.content.size,v=X(a)?i+1:m;s.replaceWith(v+r.tableStart,m+r.tableStart,c)}s.setSelection(new b(s.doc.resolve(i+r.tableStart))),t(s)}return!0},t.splitCell=function(e,t){var n,r,o=e.selection;if(o instanceof b){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;n=o.$anchorCell.nodeAfter,r=o.$anchorCell.pos}else{if(!(n=function(e){for(var t=e.depth-1;0<t;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(o.$from)))return!1;r=g(o.$from).pos}if(1==n.attrs.colspan&&1==n.attrs.rowspan)return!1;if(t){var i=n.attrs,a=[],s=i.colwidth;1<i.rowspan&&(i=S(i,"rowspan",1)),1<i.colspan&&(i=S(i,"colspan",1));for(var l=U(e),c=e.tr,u=0;u<l.right-l.left;u++)a.push(s?S(i,"colwidth",s&&s[u]?[s[u]]:null):i);for(var p,d=M(e.schema)[n.type.spec.tableRole],f=0;f<l.bottom;f++)if(f>=l.top){var h=l.map.positionAt(f,l.left,l.table);f==l.top&&(h+=n.nodeSize);for(var m=l.left,v=0;m<l.right;m++,v++)m==l.left&&f==l.top||c.insert(p=c.mapping.map(h+l.tableStart,1),d.createAndFill(a[v]))}c.setNodeMarkup(r,null,a[0]),o instanceof b&&c.setSelection(new b(c.doc.resolve(o.$anchorCell.pos),p&&c.doc.resolve(p))),t(c)}return!0},t.setCellAttr=function(o,i){return function(e,t){if(!u(e))return!1;var n=p(e);if(n.nodeAfter.attrs[o]===i)return!1;if(t){var r=e.tr;e.selection instanceof b?e.selection.forEachCell(function(e,t){e.attrs[o]!==i&&r.setNodeMarkup(t,null,S(e.attrs,o,i))}):r.setNodeMarkup(n.pos,null,S(n.nodeAfter.attrs,o,i)),t(r)}return!0}},t.toggleHeaderRow=Z,t.toggleHeaderColumn=Q,t.toggleHeaderCell=ee,t.goToNextCell=function(o){return function(e,t){if(!u(e))return!1;var n=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();0<=r;r--){var i=e.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var a=e.node(-1),s=e.indexAfter(-1),l=e.after();s<a.childCount;s++){var c=a.child(s);if(c.childCount)return l+1;l+=c.nodeSize}}}(p(e),o);if(null!=n){if(t){var r=e.doc.resolve(n);t(e.tr.setSelection(Jr.TextSelection.between(r,s(r))).scrollIntoView())}return!0}}},t.deleteTable=function(e,t){for(var n=e.selection.$anchor,r=n.depth;0<r;r--)if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}}),ra=v(na),oa=na.tableEditing,ia=na.fixTables,aa=na.handlePaste,sa=na.cellAround,la=na.isInTable,ca=na.selectionCell,ua=na.moveCellForward,pa=na.inSameTable,da=na.findCell,fa=na.colCount,ha=na.nextCell,ma=na.tableNodes,va=na.CellSelection,ga=na.TableMap,ya=na.columnResizing,ba=na.columnResizingPluginKey,wa=na.updateColumnsOnResize,Ca=na.__pastedCells,ka=na.__insertCells,Ea=na.__clipCells,xa=na.addColumn,Sa=na.addColumnBefore,Oa=na.addColumnAfter,Ma=na.removeColumn,Aa=na.deleteColumn,Da=na.addRow,Ta=na.addRowBefore,Na=na.addRowAfter,Ra=na.removeRow,Pa=na.deleteRow,Fa=na.mergeCells,_a=na.splitCell,Ia=na.setCellAttr,La=na.toggleHeaderRow,Ba=na.toggleHeaderColumn,Va=na.toggleHeaderCell,za=na.goToNextCell,ja=na.deleteTable,$a=Object.freeze({default:ra,__moduleExports:na,tableEditing:oa,fixTables:ia,handlePaste:aa,cellAround:sa,isInTable:la,selectionCell:ca,moveCellForward:ua,inSameTable:pa,findCell:da,colCount:fa,nextCell:ha,tableNodes:ma,CellSelection:va,TableMap:ga,columnResizing:ya,columnResizingPluginKey:ba,updateColumnsOnResize:wa,__pastedCells:Ca,__insertCells:ka,__clipCells:Ea,addColumn:xa,addColumnBefore:Sa,addColumnAfter:Oa,removeColumn:Ma,deleteColumn:Aa,addRow:Da,addRowBefore:Ta,addRowAfter:Na,removeRow:Ra,deleteRow:Pa,mergeCells:Fa,splitCell:_a,setCellAttr:Ia,toggleHeaderRow:La,toggleHeaderColumn:Ba,toggleHeaderCell:Va,goToNextCell:za,deleteTable:ja}),Wa=function(e){function o(){var e,u;a(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(u=f(this,(e=d(o)).call.apply(e,[this].concat(n)))).state={menuPosition:{left:0,top:0},menuVisible:!1},u.componentDidMount=function(){u.updateStatePosition()},u.componentDidUpdate=function(e){e.marker!==u.props.marker&&u.updateStatePosition()},u.updateStatePosition=function(){var e=u.props,t=e.editorWrapper,n=e.marker,r=t.current.getBoundingClientRect(),o=r.top,i=r.left,a=n.getBoundingClientRect(),s=a.top,l=a.left,c=a.width;u.setState({top:s-o,left:l+c-i-20,menuVisible:!1})},u.toggleMenuVisible=function(){u.setState({menuVisible:!u.state.menuVisible})},u}return c(o,w.Component),s(o,[{key:"render",value:function(){var t=this;if(this.props.marker){var e=this.state,n=e.top,r=e.left,o=e.menuVisible;return I.createElement($r,{render:function(e){return I.createElement(Ha,{onMouseDown:function(e){return e.preventDefault()},style:{top:n,left:r}},I.createElement(Ua,{onClick:t.toggleMenuVisible}),o&&I.createElement(Ka,{view:t.props.view,updateMenuPosition:t.updateStatePosition}))}})}}}]),o}(),Ha=Ie("div",{target:"e1t6nl7x0"})("position:absolute;"),Ua=Ie($e.ArrowDown,{target:"e1t6nl7x1"})("fill:#9e9e9e;height:20px;width:20px;&:hover{fill:#212121;}"),Ka=function(e){function o(){var e,s;a(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(s=f(this,(e=d(o)).call.apply(e,[this].concat(n)))).updateTable=function(e){var t=e.target.getAttribute("name"),n=s.props,r=n.view,o=n.updateMenuPosition,i=r.state,a=r.dispatch;$a[t](i,a),o()},s}return c(o,w.Component),s(o,[{key:"render",value:function(){return I.createElement(qa,null,I.createElement(Ja,{name:"addRowBefore",onClick:this.updateTable},"Add Row Before"),I.createElement(Ja,{name:"addRowAfter",onClick:this.updateTable},"Add Row After"),I.createElement(Ja,{name:"addColumnBefore",onClick:this.updateTable},"Add Column Before"),I.createElement(Ja,{name:"addColumnAfter",onClick:this.updateTable},"Add Column After"),I.createElement(Ja,{name:"deleteRow",onClick:this.updateTable},"Delete Row"),I.createElement(Ja,{name:"deleteColumn",onClick:this.updateTable,lastOption:!0},"Delete Column"))}}]),o}(),qa=Ie("div",{target:"e1t6nl7x2"})("border:1px solid rgba(158,158,158,0.75);background:white;cursor:pointer;left:-155px;position:absolute;font-size:12px;border-radius:2px;top:16px;box-shadow:#cdcdcdbf 0px 2px 8px -2px,#cdcdcdbf 0px 0px 1px;"),Ja=Ie("div",{target:"e1t6nl7x3"})("border-bottom:",function(e){return e.lastOption?"":"1px solid rgba(158, 158, 158, 0.75)"},";padding:5px;width:150px;text-align:center;&:hover{background-color:#e0e0e0;}"),Ga=[{elmClassName:"nib-table-cell-marker",component:Wa}],Xa=g(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var u=function(i,a){return function(e){Array.isArray(i)||(i=[i]);for(var t=0,n=i.length;t<n;t++){var r=b(i[t])(e.selection);if(r){var o=s(r.pos,a)(e);if(o!==e)return o}}return e}},p=function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return function(e){var t=Jr.Selection.findFrom(e.doc.resolve(n),r,!0);return t?e.setSelection(t):e}},h=function(l,c){return function(e){var t="number"==typeof c,n=e.selection.$from,r=t?e.doc.resolve(c):d(e.selection)?e.doc.resolve(n.pos+1):n,o=r.parent;r.depth;if(g(o)&&e!==(e=u(o.type,l)(e)))return p(r.pos)(e);if(v(r,l))return e.insert(r.pos,l),f(p(t?r.pos:e.selection.$anchor.pos)(e));for(var i=r.depth;0<i;i--){var a=r.after(i),s=e.doc.resolve(a);if(v(s,l))return e.insert(a,l),f(p(a)(e))}return e}},d=function(e){return e instanceof Jr.NodeSelection},o=function(e,t){return Array.isArray(e)&&-1<e.indexOf(t.type)||t.type===e},f=function(e){return Object.assign(Object.create(e),e).setTime(Date.now())},s=function(o,i){return function(e){var t=e.doc.nodeAt(o),n=e.doc.resolve(o);if(a(n,i)){var r=(e=e.replaceWith(o,o+t.nodeSize,i)).selection.$from.pos-1;return e=p(Math.max(r,0),-1)(e),e=p(e.selection.$from.start())(e),f(e)}return e}},a=function(e,t){var n=e.node(e.depth);return n&&n.type.validContent(t instanceof Ur.Fragment?t:Ur.Fragment.from(t))},r=function(n){return function(e){var t=e.doc.nodeAt(n);return f(e.delete(n,n+t.nodeSize))}},m=function(n){if(n.cached.tableNodeTypes)return n.cached.tableNodeTypes;var r={};return Object.keys(n.nodes).forEach(function(e){var t=n.nodes[e];t.spec.tableRole&&(r[t.spec.tableRole]=t)}),n.cached.tableNodeTypes=r},v=function(e,t){var n=e.index();return t instanceof Ur.Fragment?e.parent.canReplace(n,n,t):t instanceof Ur.Node&&e.parent.canReplaceWith(n,n,t.type)},g=function(e){return!e||"paragraph"===e.type.name&&2===e.nodeSize},y=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return t?e.createChecked(null,t):e.createAndFill()},i=function(o){return function(e){for(var t=e.$from,n=t.depth;0<n;n--){var r=t.node(n);if(o(r))return{pos:0<n?t.before(n):0,start:t.start(n),depth:n,node:r}}}},l=function(e,t){for(var n=e.depth;0<n;n--){var r=e.node(n);if(t(r))return{pos:0<n?e.before(n):0,start:e.start(n),depth:n,node:r}}},c=function(n,r){return function(e){var t=i(n)(e);if(t)return C(t.pos,r)}},n=function(t){return function(e){return!!i(t)(e)}},b=function(t){return function(e){return i(function(e){return o(t,e)})(e)}},w=function(e){var t=e.$from.nodeBefore,n=Jr.Selection.findFrom(e.$from,-1);if(n&&t){var r=b(t.type)(n);return r?r.pos:n.$from.pos}},C=function(e,t){var n=t(e),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},k=function(e){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');var r=[];return e.descendants(function(e,t){if(r.push({node:e,pos:t}),!n)return!1}),r},E=function(e,t,n){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return k(e,n).filter(function(e){return t(e.node)})},x=function(e,t,n){return E(e,function(e){return e.type===t},n)};var S=function(e){return i(function(e){return e.type.spec.tableRole&&"table"===e.type.spec.tableRole})(e)},O=function(e){return e instanceof na.CellSelection},M=function(e){if(O(e)){var t=e.$anchorCell.start(-1);return na.TableMap.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},A=function(e){return!!O(e)&&(e.isColSelection()&&e.isRowSelection())},D=function(t){return function(e){var r=S(e);if(r){var o=na.TableMap.get(r.node);return(Array.isArray(t)?t:Array.from([t])).reduce(function(e,t){if(0<=t&&t<=o.width-1){var n=o.cellsInRect({left:t,right:t+1,top:0,bottom:o.height});return e.concat(n.map(function(e){var t=r.node.nodeAt(e),n=e+r.start;return{pos:n,start:n+1,node:t}}))}},[])}}},T=function(t){return function(e){var r=S(e);if(r){var o=na.TableMap.get(r.node);return(Array.isArray(t)?t:Array.from([t])).reduce(function(e,t){if(0<=t&&t<=o.height-1){var n=o.cellsInRect({left:0,right:o.width,top:t,bottom:t+1});return e.concat(n.map(function(e){var t=r.node.nodeAt(e),n=e+r.start;return{pos:n,start:n+1,node:t}}))}},[])}}},N=function(e){var r=S(e);if(r){var t=na.TableMap.get(r.node);return t.cellsInRect({left:0,right:t.width,top:0,bottom:t.height}).map(function(e){var t=r.node.nodeAt(e),n=e+r.start;return{pos:n,start:n+1,node:t}})}},R=function(f){return function(t){var e=S(t.selection);if(e){var n=na.TableMap.get(e.node);if(0<=f&&f<=n.height){for(var r=e.node,o=m(r.type.schema),i=e.start,a=0;a<f+1;a++)i+=r.child(a).nodeSize;var s=r.child(f),l=[],c=0;if(s.forEach(function(e){1===e.attrs.rowspan&&(c+=e.attrs.colspan,l.push(o[e.type.spec.tableRole].createAndFill(e.attrs,e.marks)))}),c<n.width){for(var u=[],p=function(r){var e=V(r,function(e,t){var n=e.node.attrs.rowspan;return 1<n&&f<r+n})(t);u.push.apply(u,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))},d=f;0<=d;d--)p(d);u.length&&u.forEach(function(e){t=I(e,{rowspan:e.node.attrs.rowspan+1})(t)})}return h(o.row.create(s.attrs,l),i)(t)}}return t}},P=function(r){return function(e){var t=S(e.selection);if(t){var n=na.TableMap.get(t.node);if(0===r&&1===n.width)return _(e);if(0<=r&&r<=n.width)return na.removeColumn(e,{map:n,tableStart:t.start,table:t.node},r),f(e)}return e}},F=function(r){return function(e){var t=S(e.selection);if(t){var n=na.TableMap.get(t.node);if(0===r&&1===n.height)return _(e);if(0<=r&&r<=n.height)return na.removeRow(e,{map:n,tableStart:t.start,table:t.node},r),f(e)}return e}},_=function(e){for(var t=e.selection.$from,n=t.depth;0<n;n--){if("table"===t.node(n).type.spec.tableRole)return f(e.delete(t.before(n),t.after(n)))}return e},I=function(t,n){return function(e){return t?(e.setNodeMarkup(t.pos,null,Object.assign({},t.node.attrs,n)),f(e)):e}},L=function(e){return l(e,function(e){return e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)})},B=function(e){var t=L(e);if(t){var n=l(e,function(e){return e.type.spec.tableRole&&/table/i.test(e.type.spec.tableRole)}),r=na.TableMap.get(n.node),o=t.pos-n.start;return r.rectBetween(o,o)}},V=function(o,i){return function(e){var t=[],n=T(o)(e.selection);if(n)for(var r=n.length-1;0<=r;r--)i(n[r],e)&&t.push(n[r]);return t}};t.isNodeSelection=d,t.canInsert=v,t.findParentNode=i,t.findParentNodeClosestToPos=l,t.findParentDomRef=c,t.hasParentNode=n,t.findParentNodeOfType=b,t.findParentNodeOfTypeClosestToPos=function(e,t){return l(e,function(e){return o(t,e)})},t.hasParentNodeOfType=function(t){return function(e){return n(function(e){return o(t,e)})(e)}},t.findParentDomRefOfType=function(t,n){return function(e){return c(function(e){return o(t,e)},n)(e)}},t.findSelectedNodeOfType=function(r){return function(e){if(d(e)){var t=e.node,n=e.$from;if(o(r,t))return{node:t,pos:n.pos,depth:n.depth}}}},t.findPositionOfNodeBefore=w,t.findDomRefAtPos=C,t.flatten=k,t.findChildren=E,t.findTextNodes=function(e,t){return E(e,function(e){return e.isText},t)},t.findInlineNodes=function(e,t){return E(e,function(e){return e.isInline},t)},t.findBlockNodes=function(e,t){return E(e,function(e){return e.isBlock},t)},t.findChildrenByAttr=function(e,t,n){return E(e,function(e){return!!t(e.attrs)},n)},t.findChildrenByType=x,t.findChildrenByMark=function(e,t,n){return E(e,function(e){return t.isInSet(e.marks)},n)},t.contains=function(e,t){return!!x(e,t).length},t.findTable=S,t.isCellSelection=O,t.getSelectionRect=M,t.isColumnSelected=function(n){return function(e){if(O(e)){var t=M(e);return!!t&&e.isColSelection()&&n>=t.left&&n<t.right}return!1}},t.isRowSelected=function(n){return function(e){if(O(e)){var t=M(e);return!!t&&e.isRowSelection()&&n>=t.top&&n<t.bottom}return!1}},t.isTableSelected=A,t.getCellsInColumn=D,t.getCellsInRow=T,t.getCellsInTable=N,t.selectColumn=function(o){return function(e){var t=D(o)(e.selection);if(t){var n=e.doc.resolve(t[0].pos),r=e.doc.resolve(t[t.length-1].pos);return f(e.setSelection(new na.CellSelection(n,r)))}return e}},t.selectRow=function(o){return function(e){var t=T(o)(e.selection);if(t){var n=e.doc.resolve(t[0].pos),r=e.doc.resolve(t[t.length-1].pos);return f(e.setSelection(new na.CellSelection(n,r)))}return e}},t.selectTable=function(e){var t=N(e.selection);if(t){var n=e.doc.resolve(t[0].pos),r=e.doc.resolve(t[t.length-1].pos);return f(e.setSelection(new na.CellSelection(n,r)))}return e},t.emptyCell=function(n,r){return function(e){if(n){var t=m(r).cell.createAndFill().content;if(!n.node.content.eq(t))return e.replaceWith(n.pos,n.pos+n.node.nodeSize-1,new Ur.Slice(t,0,0)),f(e)}return e}},t.addColumnAt=function(r){return function(e){var t=S(e.selection);if(t){var n=na.TableMap.get(t.node);if(0<=r&&r<=n.width)return f(na.addColumn(e,{map:n,tableStart:t.start,table:t.node},r))}return e}},t.addRowAt=function(o,i){return function(e){var t=S(e.selection);if(t){var n=na.TableMap.get(t.node),r=o-1;if(i&&0<=r)return f(R(r)(e));if(0<=o&&o<=n.height)return f(na.addRow(e,{map:n,tableStart:t.start,table:t.node},o))}return e}},t.cloneRowAt=R,t.removeColumnAt=P,t.removeRowAt=F,t.removeTable=_,t.removeSelectedColumns=function(e){var t=e.selection;if(A(t))return _(e);if(O(t)){var n=S(t);if(n){var r=na.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.left&&o.right==r.width)return!1;for(var i=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=i.right-1;na.removeColumn(e,i,a),a!==i.left;a--)i.table=i.tableStart?e.doc.nodeAt(i.tableStart-1):e.doc,i.map=na.TableMap.get(i.table);return f(e)}}return e},t.removeSelectedRows=function(e){var t=e.selection;if(A(t))return _(e);if(O(t)){var n=S(t);if(n){var r=na.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.top&&o.bottom==r.height)return!1;for(var i=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=i.bottom-1;na.removeRow(e,i,a),a!==i.top;a--)i.table=i.tableStart?e.doc.nodeAt(i.tableStart-1):e.doc,i.map=na.TableMap.get(i.table);return f(e)}}return e},t.removeColumnClosestToPos=function(n){return function(e){var t=B(n);return t?P(t.left)(p(n.pos)(e)):e}},t.removeRowClosestToPos=function(n){return function(e){var t=B(n);return t?F(t.top)(p(n.pos)(e)):e}},t.forEachCellInColumn=function(o,i,a){return function(e){var t=D(o)(e.selection);if(t){for(var n=t.length-1;0<=n;n--)e=i(t[n],e);if(a){var r=e.doc.resolve(e.mapping.map(t[t.length-1].pos));e.setSelection(Jr.Selection.near(r))}return f(e)}return e}},t.forEachCellInRow=function(o,i,a){return function(e){var t=T(o)(e.selection);if(t){for(var n=t.length-1;0<=n;n--)e=i(t[n],e);if(a){var r=e.doc.resolve(e.mapping.map(t[t.length-1].pos));e.setSelection(Jr.Selection.near(r))}}return e}},t.setCellAttrs=I,t.createTable=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3,r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,i=m(e),a=i.cell,s=i.header_cell,l=i.row,c=i.table,u=[],p=[],d=0;d<n;d++)u.push(y(a,o)),r&&p.push(y(s,o));for(var f=[],h=0;h<t;h++)f.push(l.createChecked(null,r&&0===h?p:u));return c.createChecked(null,f)},t.findCellClosestToPos=L,t.findCellRectClosestToPos=B,t.getSelectionRangeInColumn=function(m){return function(e){for(var r=m,o=m,t=function(n){D(n)(e.selection).forEach(function(e){var t=e.node.attrs.colspan+n-1;r<=t&&(r=n),o<t&&(o=t)})},n=m;0<=n;n--)t(n);var i=function(n){D(n)(e.selection).forEach(function(e){var t=e.node.attrs.colspan+n-1;1<e.node.attrs.colspan&&o<t&&(o=t)})};for(n=m;n<=o;n++)i(n);var a=[];for(n=r;n<=o;n++){var s=D(n)(e.selection);s&&s.length&&a.push(n)}r=a[0],o=a[a.length-1];for(var l=D(r)(e.selection),c=T(0)(e.selection),u=e.doc.resolve(l[l.length-1].pos),p=void 0,d=o;r<=d;d--){var f=D(d)(e.selection);if(f&&f.length){for(var h=c.length-1;0<=h;h--)if(c[h].pos===f[0].pos){p=f[0];break}if(p)break}}return{$anchor:u,$head:e.doc.resolve(p.pos),indexes:a}}},t.getSelectionRangeInRow=function(m){return function(e){for(var r=m,o=m,t=function(n){T(n)(e.selection).forEach(function(e){var t=e.node.attrs.rowspan+n-1;r<=t&&(r=n),o<t&&(o=t)})},n=m;0<=n;n--)t(n);var i=function(n){T(n)(e.selection).forEach(function(e){var t=e.node.attrs.rowspan+n-1;1<e.node.attrs.rowspan&&o<t&&(o=t)})};for(n=m;n<=o;n++)i(n);var a=[];for(n=r;n<=o;n++){var s=T(n)(e.selection);s&&s.length&&a.push(n)}r=a[0],o=a[a.length-1];for(var l=T(r)(e.selection),c=D(0)(e.selection),u=e.doc.resolve(l[l.length-1].pos),p=void 0,d=o;r<=d;d--){var f=T(d)(e.selection);if(f&&f.length){for(var h=c.length-1;0<=h;h--)if(c[h].pos===f[0].pos){p=f[0];break}if(p)break}}return{$anchor:u,$head:e.doc.resolve(p.pos),indexes:a}}},t.removeParentNodeOfType=function(n){return function(e){var t=b(n)(e.selection);return t?r(t.pos)(e):e}},t.replaceParentNodeOfType=u,t.removeSelectedNode=function(e){if(d(e.selection)){var t=e.selection.$from.pos,n=e.selection.$to.pos;return f(e.delete(t,n))}return e},t.replaceSelectedNode=function(o){return function(e){if(d(e.selection)){var t=e.selection,n=t.$from,r=t.$to;if(n.parent.canReplaceWith(n.index(),n.indexAfter(),o.type))return f(e.replaceWith(n.pos,r.pos,o))}return e}},t.setTextSelection=p,t.safeInsert=h,t.setParentNodeMarkup=function(n,r,o,i){return function(e){var t=b(n)(e.selection);return t?f(e.setNodeMarkup(t.pos,r,Object.assign({},t.node.attrs,o),i)):e}},t.selectParentNodeOfType=function(n){return function(e){if(!d(e.selection)){var t=b(n)(e.selection);if(t)return f(e.setSelection(Jr.NodeSelection.create(e.doc,t.pos)))}return e}},t.removeNodeBefore=function(e){var t=w(e.selection);return"number"==typeof t?r(t)(e):e}});v(Xa);Xa.isNodeSelection,Xa.canInsert;var Ya=Xa.findParentNode,Za=(Xa.findParentNodeClosestToPos,Xa.findParentDomRef,Xa.hasParentNode,Xa.findParentNodeOfType,Xa.findParentNodeOfTypeClosestToPos,Xa.hasParentNodeOfType,Xa.findParentDomRefOfType,Xa.findSelectedNodeOfType,Xa.findPositionOfNodeBefore,Xa.findDomRefAtPos,Xa.flatten,Xa.findChildren,Xa.findTextNodes,Xa.findInlineNodes,Xa.findBlockNodes,Xa.findChildrenByAttr,Xa.findChildrenByType,Xa.findChildrenByMark,Xa.contains,Xa.findTable,Xa.isCellSelection,Xa.getSelectionRect,Xa.isColumnSelected,Xa.isRowSelected,Xa.isTableSelected,Xa.getCellsInColumn,Xa.getCellsInRow,Xa.getCellsInTable,Xa.selectColumn,Xa.selectRow,Xa.selectTable,Xa.emptyCell,Xa.addColumnAt,Xa.addRowAt,Xa.cloneRowAt,Xa.removeColumnAt,Xa.removeRowAt,Xa.removeTable,Xa.removeSelectedColumns,Xa.removeSelectedRows,Xa.removeColumnClosestToPos,Xa.removeRowClosestToPos,Xa.forEachCellInColumn,Xa.forEachCellInRow,Xa.setCellAttrs,Xa.createTable,Xa.findCellClosestToPos,Xa.findCellRectClosestToPos,Xa.getSelectionRangeInColumn,Xa.getSelectionRangeInRow,Xa.removeParentNodeOfType,Xa.replaceParentNodeOfType,Xa.removeSelectedNode,Xa.replaceSelectedNode,Xa.setTextSelection,Xa.safeInsert,Xa.setParentNodeMarkup,Xa.selectParentNodeOfType,Xa.removeNodeBefore,new Zr("table")),Qa=new Yr({key:Za,state:{init:function(){return{}},apply:function(e,t,n,r){var o,i=r.schema,a=r.selection,s=i.nodes,l=s.table_cell,c=s.table_header,u=Ya(function(e){var t=e.type;return t===l||t===c})(a);return u&&(o=Fo.create(r.doc,[Po.node(u.start-1,u.start+u.node.nodeSize-1,{class:"nib-table-cell-marker",style:"position: relative;"})])),{decoration:o}}},props:{decorations:function(e){return(e&&Za.getState(e)).decoration}}}),es=function(e,t){return t?e.createChecked(null,t):e.createAndFill()},ts={block:To,common:Io,help:Zo,history:pi,image:Ci,inline:Di,link:ji,list:ea,table:{modals:Ga,name:"table",plugin:Qa,schema:{nodes:["table","table_row","table_cell","table_header"]},style:'\n  .ProseMirror.tableWrapper {\n    overflow-x: auto;\n  }\n  .ProseMirror table {\n    border-collapse: collapse;\n    table-layout: fixed;\n    width: 100%;\n    overflow: hidden;\n  }\n  .ProseMirror td, .ProseMirror th {\n    vertical-align: top;\n    box-sizing: border-box;\n    position: relative;\n  }\n  .ProseMirror.column-resize-handle {\n    position: absolute;\n    right: -2px;\n    top: 0;\n    bottom: 0;\n    width: 4px;\n    z-index: 20;\n    background-color: #adf;\n    pointer-events: none;\n  }\n  .ProseMirror.resize-cursor {\n    cursor: ew-resize;\n    cursor: col-resize;\n  }\n  /* Give selected cells a blue overlay */\n  .ProseMirror.selectedCell: after {\n    z-index: 2;\n    position: absolute;\n    content: "";\n    left: 0; right: 0; top: 0; bottom: 0;\n    background: rgba(200, 200, 255, 0.4);\n    pointer-events: none;\n  }\n  /* Style beloe to be made configurable */\n  .ProseMirror table td, .ProseMirror table th {\n    border: 1px solid rgba(158, 158, 158, 0.75)\n  }\n',toolbarComponent:function(e){function i(){var e,t;a(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=f(this,(e=d(i)).call.apply(e,[this].concat(r)))).insertTable=function(){var e=t.props.app_params.view;!function(e,t){for(var n=e.schema.nodes,r=n.table_cell,o=n.table_header,i=n.table_row,a=n.table,s=[],l=[],c=0;c<3;c++)l.push(es(o)),s.push(es(r));for(var u=[],p=0;p<3;p++)u.push(i.createChecked(null,0===p?l:s));var d=a.createChecked(null,u),f=e.selection,h=e.tr,m=f.$from,v=f.$to;t(h.replaceWith(m.pos,v.pos,d).scrollIntoView())}(e.state,e.dispatch)},t}return c(i,w.PureComponent),s(i,[{key:"render",value:function(){return I.createElement(Le,{name:"table",onClick:this.insertTable,title:"Table"},I.createElement($e.Table,null))}}]),i}()}},ns=function(e){return e.trim().split(" ").map(function(e){return ts[e]})},rs=["em",0],is=["s",0],as=["strong",0],ss=["u",0],ls={em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return rs}},link:{attrs:{href:{}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href")}}}],toDOM:function(e){return["a",e.attrs,0]}},strike:{parseDOM:[{tag:"strike"},{tag:"s"},{tag:"del"},{style:"text-decoration",getAttrs:function(e){return"line-through"===e&&null}}],toDOM:function(){return is}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!=e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return as}},subsup:{inclusive:!0,attrs:{type:{default:"sub"}},parseDOM:[{tag:"sub",attrs:{type:"sub"}},{tag:"sup",attrs:{type:"sup"}}],toDOM:function(e){return[e.attrs.type]}},underline:{parseDOM:[{tag:"u"},{style:"text-decoration: underline"}],toDOM:function(){return ss}}},cs=["ul",0],us={content:"listItem+",parseDOM:[{tag:"ul"}],group:"block",toDOM:function(){return cs}},ps=["li",0],ds={content:"(paragraph | heading){1} (paragraph | heading | orderedList | bulletList)*",group:"block",parseDOM:[{tag:"li"}],toDOM:function(){return ps},defining:!0},fs=["ol",0],hs={content:"listItem+",attrs:{order:{default:1}},group:"block",parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?fs:["ol",{start:e.attrs.order},0]}},ms=["p",0],vs={content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return ms}},gs=ma({tableGroup:"block",cellContent:"block+"}),ys=gs.table,bs=gs.table_row,ws={bulletList:us,doc:{content:"block+",group:"block"},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(e){return["h"+e.attrs.level,0]}},image:{group:"inline",inline:!0,attrs:{src:{default:""},style:{default:{height:"auto",width:"auto"}}},draggable:!0,parseDOM:[{tag:'img[src^="data:image/"]',ignore:!0},{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),style:e.getAttribute("style")}}}],toDOM:function(e){return["img",e.attrs]}},listItem:ds,orderedList:hs,paragraph:vs,table:ys,table_cell:gs.table_cell,table_header:gs.table_header,table_row:bs,text:{group:"inline"}},Cs={type:"doc",content:[{type:"paragraph"}]},ks=function(e,t){return Xr.fromJSON({schema:(r=e,o=r.map(function(e){return e&&e.schema}).reduce(function(e,t){return t&&(e.nodes=p(e.nodes).concat(p(t.nodes||[])),e.marks=p(e.marks).concat(p(t.marks||[]))),e},{nodes:["paragraph"],marks:[]}),o.marks=o.marks.reduce(function(e,t){return e[t]=ls[t],e},{}),o.nodes=o.nodes.reduce(function(e,t){return e[t]=ws[t],e},{}),new Kr(o)),plugins:[yo(e)].concat(p((n=e,n.map(function(e){return e&&e.plugin}))))},{doc:t||Cs,selection:{type:"text",anchor:1,head:1}});var n,r,o},Es=function(e,n){return e&&ns(e).reduce(function(e,t){return t[n]?p(e).concat(p(t[n])):e},[])},xs=function(e){return ns(e).map(function(e){return{name:e.name,toolbarComponent:e.toolbarComponent}})},Ss=function(e){return ns(e).filter(function(e){return e.KeymapInfo}).map(function(e){return{name:e.name,keymaps:Object.values(e.KeymapInfo)}})},Os=function(e){var t=e.options,n=e.app_params,r=t.filter(function(e){return"help"===e.name});if(!r.length)return null;var o=r[0].toolbarComponent;return I.createElement(o,{app_params:n})},Ms=function(e){function t(){return a(this,t),f(this,d(t).apply(this,arguments))}return c(t,w.Component),s(t,[{key:"render",value:function(){var r=this.context.config.toolbar.top,e=xs(r.options),t=e.filter(function(e){return"help"!==e.name}),o=t.length;return I.createElement($r,{render:function(n){return I.createElement(As,{onMouseDown:function(e){return e.preventDefault()}},I.createElement(Ds,null,t.map(function(e,t){return I.createElement(w.Fragment,{key:"top-toolbar-option-".concat(e.name)},I.createElement(e.toolbarComponent,{config:r[e.name],app_params:n}),t<o-1&&I.createElement(Vr,null))})),I.createElement(Os,{options:e,app_params:n}))}})}}]),t}();Ms.contextType=zo;var As=Ie("div",{target:"e12508ag0"})("align-items:center;display:flex;flex-wrap:wrap;justify-content:space-between;padding:4px;background-color:",function(e){return e.theme.toolbar.top.backgroundColor},";color:",function(e){return e.theme.toolbar.top.color},";border-bottom:",function(e){return e.theme.toolbar.top.borderBottom},";border-left:",function(e){return e.theme.toolbar.top.borderLeft},";border-right:",function(e){return e.theme.toolbar.top.borderRight},";border-top:",function(e){return e.theme.toolbar.top.borderTop},";border-bottom-left-radius:",function(e){return e.theme.toolbar.top.borderBottomLeftRadius},";border-bottom-right-radius:",function(e){return e.theme.toolbar.top.borderBottomLeftRadius},";border-top-left-radius:",function(e){return e.theme.toolbar.top.borderTopLeftRadius},";border-top-right-radius:",function(e){return e.theme.toolbar.top.borderTopLeftRadius},";font-size:",function(e){return e.theme.toolbar.top.fontSize},";font-style:",function(e){return e.theme.toolbar.top.fontStyle},";font-family:",function(e){return e.theme.toolbar.top.fontFamily},";"),Ds=Ie("div",{target:"e12508ag1"})("align-items:center;display:flex;flex-wrap:wrap;"),Ts=function(e){function i(){var e,n;a(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=f(this,(e=d(i)).call.apply(e,[this].concat(r)))).closeModal=function(){var e=n.props.app_params.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("HIDE_MODALS",!0))},n}return c(i,w.Component),s(i,[{key:"render",value:function(){var e=this.props,t=e.editorWrapper,n=e.app_params,r=this.context.config.toolbar.inline,o=xs(r.options),i=o.length,a=document.getElementsByClassName("nib-selected");return I.createElement("div",null,a[0]?I.createElement(qe,{closeModal:this.closeModal,editorWrapper:t,marker:a[0],render:function(){return I.createElement(Ns,{onMouseDown:function(e){return e.preventDefault()}},o.map(function(e,t){return I.createElement(w.Fragment,{key:"inline-toolbar-option-".concat(e.name)},I.createElement(e.toolbarComponent,{config:r[e.name],app_params:n}),t<i-1&&I.createElement(Vr,null))}))}}):null)}}]),i}();Ts.contextType=zo;var Ns=Ie("div",{target:"e1kmuua90"})("align-items:center;display:flex;position:relative;background-color:",function(e){return e.theme.toolbar.inline.backgroundColor},";color:",function(e){return e.theme.toolbar.inline.color},";border-bottom:",function(e){return e.theme.toolbar.inline.borderBottom},";border-left:",function(e){return e.theme.toolbar.inline.borderLeft},";border-right:",function(e){return e.theme.toolbar.inline.borderRight},";border-top:",function(e){return e.theme.toolbar.inline.borderTop},";border-bottom-left-radius:",function(e){return e.theme.toolbar.inline.borderBottomLeftRadius},";border-bottom-right-radius:",function(e){return e.theme.toolbar.inline.borderBottomLeftRadius},";border-top-left-radius:",function(e){return e.theme.toolbar.inline.borderTopLeftRadius},";border-top-right-radius:",function(e){return e.theme.toolbar.inline.borderTopLeftRadius},";padding:",function(e){return e.theme.toolbar.inline.padding},";font-size:",function(e){return e.theme.toolbar.inline.fontSize},";font-style:",function(e){return e.theme.toolbar.inline.fontStyle},";font-family:",function(e){return e.theme.toolbar.inline.fontFamily},";"),Rs={top:Ms,inline:function(t){return I.createElement($r,{render:function(e){return I.createElement(Ts,n({app_params:e},t))}})}},Ps=function t(n,r){if(void 0===r)return n;if("object"!==i(n))return void 0===r?n:r;var o={};return Object.keys(n).forEach(function(e){"object"===i(n[e])?o[e]=t(n[e],r[e]):o[e]=void 0===r[e]?n[e]:r[e]}),o},Fs={p:{display:"block",marginBlockStart:"1em",marginBlockEnd:"1em",marginInlineStart:"0px",marginInlineEnd:"0px"},h1:{display:"block",fontSize:"2em",marginBlockStart:"0.67em",marginBlockEnd:"0.67em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"},h2:{display:"block",fontSize:"1.5em",marginBlockStart:"0.83em",marginBlockEnd:"0.83em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"},h3:{display:"block",fontSize:"1.17em",marginBlockStart:"1em",marginBlockEnd:"1em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"},h4:{display:"block",marginBlockStart:"1.33em",marginBlockEnd:"1.33em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"},h5:{display:"block",fontSize:"0.83em",marginBlockStart:"1.67em",marginBlockEnd:"1.67em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"},h6:{display:"block",fontSize:"0.67em",marginBlockStart:"2.33em",marginBlockEnd:"2.33em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"}},_s=[{cssKey:"display",jsKey:"display"},{cssKey:"font-size",jsKey:"fontSize"},{cssKey:"font-weight",jsKey:"fontWeight"},{cssKey:"margin-block-start",jsKey:"marginBlockStart"},{cssKey:"margin-block-end",jsKey:"marginBlockEnd"},{cssKey:"margin-inline-start",jsKey:"marginInlineStart"},{cssKey:"margin-inline-end",jsKey:"marginInlineEnd"}],Is=function(n){return _s.reduce(function(e,t){return"".concat(e).concat(t.cssKey,":").concat(n[t.jsKey],";")},"")},Ls=function(e){return"\n  p  {".concat(Is(e.p),"}\n  h1 {").concat(Is(e.h1),"}\n  h2 {").concat(Is(e.h2),"}\n  h3 {").concat(Is(e.h3),"}\n  h4 {").concat(Is(e.h4),"}\n  h5 {").concat(Is(e.h5),"}\n  h6 {").concat(Is(e.h6),"}\n")},Bs=Ie("div",{target:"ekka5440"})("position:relative;background-color:",function(e){return e.theme.wrapper.backgroundColor},";color:",function(e){return e.theme.wrapper.color},";border-bottom:",function(e){return e.theme.wrapper.borderBottom},";border-left:",function(e){return e.theme.wrapper.borderLeft},";border-right:",function(e){return e.theme.wrapper.borderRight},";border-top:",function(e){return e.theme.wrapper.borderTop},";border-bottom-left-radius:",function(e){return e.theme.wrapper.borderBottomLeftRadius},";border-bottom-right-radius:",function(e){return e.theme.wrapper.borderBottomRightRadius},";border-top-left-radius:",function(e){return e.theme.wrapper.borderTopLeftRadius},";border-top-right-radius:",function(e){return e.theme.wrapper.borderTopRightRadius},";height:",function(e){return e.theme.wrapper.height},";width:",function(e){return e.theme.wrapper.width},";padding:",function(e){return e.theme.wrapper.padding},";font-style:",function(e){return e.theme.wrapper.fontStyle},";font-family:",function(e){return e.theme.wrapper.fontFamily},";text-align:",function(e){return e.theme.wrapper.textAlign},";",function(e){var t=e.theme;return Ls(t.blockStyles)},";"),Vs=Ie("div",{target:"ekka5441"})("background-color:",function(e){return e.theme.editor.backgroundColor},";color:",function(e){return e.theme.editor.color},";border-bottom:",function(e){return e.theme.editor.borderBottom},";border-left:",function(e){return e.theme.editor.borderLeft},";border-right:",function(e){return e.theme.editor.borderRight},";border-top:",function(e){return e.theme.editor.borderTop},";border-bottom-left-radius:",function(e){return e.theme.editor.borderBottomLeftRadius},";border-bottom-right-radius:",function(e){return e.theme.editor.borderBottomRightRadius},";border-top-left-radius:",function(e){return e.theme.editor.borderTopLeftRadius},";border-top-right-radius:",function(e){return e.theme.editor.borderTopRightRadius},";height:",function(e){return e.theme.editor.height},";width:",function(e){return e.theme.editor.width},";padding:",function(e){return e.theme.editor.padding},";font-size:",function(e){return e.theme.editor.fontSize},";font-style:",function(e){return e.theme.editor.fontStyle},";font-family:",function(e){return e.theme.editor.fontFamily},';& .ProseMirror{&:focus{outline:none;}}.ProseMirror{position:relative;}.ProseMirror{word-wrap:break-word;white-space:pre-wrap;-webkit-font-variant-ligatures:none;font-variant-ligatures:none;}.ProseMirror pre{white-space:pre-wrap;}.ProseMirror li{position:relative;}.ProseMirror-hideselection *::selection{background:transparent;}.ProseMirror-hideselection *::-moz-selection{background:transparent;}.ProseMirror-hideselection{caret-color:transparent;}.ProseMirror-selectednode{outline:2px solid #8cf;}li.ProseMirror-selectednode{outline:none;}li.ProseMirror-selectednode:after{content:"";position:absolute;left:-32px;right:-2px;top:-2px;bottom:-2px;border:2px solid #8cf;pointer-events:none;}',function(e){var t=e.theme;return Ls(t.blockStyles)},";",function(e){return e.pluginStyles}),zs=function(e){function n(e){var t;return a(this,n),(t=f(this,d(n).call(this,e))).editorRef=I.createRef(),t}return c(n,w.Component),s(n,[{key:"componentDidMount",value:function(){var o=this,e=this.context.config.plugins,t=this.props,n=t.defaultValue,i=t.onChange,r=t.autofocus,a=ks(ns("".concat(e.options," history common")),n);this.view=new Ro(this.editorRef.current,{state:a,dispatchTransaction:function(e){var t,n,r;t=o.view,n=e,r=t.state.apply(n),t.updateState(r),jr.dispatch(o.view),i&&e.docChanged&&i(o.view.state.toJSON().doc)}}),r&&this.view.focus(),jr.dispatch(this.view)}},{key:"componentWillUnmount",value:function(){this.view.destroy()}},{key:"render",value:function(){var e,t=this.props.spellcheck,n=this.context.config.plugins;return I.createElement(Vs,{ref:this.editorRef,spellcheck:t,pluginStyles:(e=n.options,e.trim().split(" ").map(function(e){return e&&ts[e].style}).reduce(function(e,t){return e+(t||"")},""))})}}]),n}();zs.contextType=zo,zs.propTypes={config:R.object,defaultValue:R.object,onChange:R.func,updateView:R.func};var js={border:"rgba(158, 158, 158, 0.75)",boxShadow:"#cdcdcdbf",highlight:"#065FD4",gray1:"#E0E0E0",gray2:"#9E9E9E",gray3:"#BDBDBD",grayText:"#616161",lightBorder:"#EbBCF0",text:"#212121",white:"#FFFFFF",opaque:"rgba(0, 0, 0, 0.25)"},$s={Color:js,FontSize:{large:"16px",medium:"14px",small:"12px"},DisabledStyle:{opacity:.5},Border:"1px solid ".concat(js.border),BoxShadow:"".concat(js.boxShadow," 0px 2px 8px -2px,").concat(js.boxShadow," 0px 0px 1px")},Ws=$s.Color,Hs=$s.FontSize,Us=$s.BoxShadow,Ks=$s.Border,qs="auto",Js="inherit",Gs="none",Xs="0px",Ys={wrapper:{backgroundColor:Ws.white,borderBottom:Ks,borderBottomLeftRadius:"2px",borderBottomRightRadius:"2px",borderLeft:Ks,borderRight:Ks,borderTop:Ks,borderTopLeftRadius:"2px",borderTopRightRadius:"2px",color:Ws.text,fontFamily:Js,fontSize:Hs.medium,fontStyle:Js,height:qs,padding:Xs,textAlign:"left",width:qs},editor:{backgroundColor:Ws.white,borderBottom:Gs,borderBottomLeftRadius:Xs,borderBottomRightRadius:Xs,borderLeft:Gs,borderRight:Gs,borderTop:Gs,borderTopLeftRadius:Xs,borderTopRightRadius:Xs,color:Ws.text,fontFamily:Js,fontSize:Hs.medium,fontStyle:Js,height:qs,padding:"4px",width:qs},button:{toolbar:{backgroundColor:Ws.white,border:Gs,borderRadius:"2px",color:Ws.text,fontSize:Hs.medium,height:"28px",margin:Xs,padding:Xs,width:"28px","&:active":"\n        background-color: ".concat(Ws.gray2," !important;\n      "),"&:disabled":"{\n        opacity: ".concat($s.DisabledStyle.opacity,";\n      }"),"&:focus":"{\n        outline: none;\n        background-color: ".concat(Ws.gray1,";\n      }"),"&:hover":"{\n        background-color: ".concat(Ws.gray1,";\n      }"),"&:selected":"{\n        background-color: ".concat(Ws.gray3," !important;\n      }")},primary:{backgroundColor:Ws.highlight,border:Gs,borderRadius:"2px",color:Ws.white,fontSize:Hs.medium,height:"32px",margin:Xs,padding:Xs,width:"124px","&:active":"\n        border-radius: 3px !important;\n        background-color: ".concat(Ws.gray2," !important;\n      "),"&:disabled":"{\n        opacity: ".concat($s.DisabledStyle.opacity,";\n      }"),"&:focus":"{\n        outline: none;\n        background-color: ".concat(Ws.gray1,";\n      }"),"&:hover":"{\n        background-color: ".concat(Ws.gray1,";\n      }"),"&:selected":"{\n        background-color: ".concat(Ws.gray3," !important;\n      }")},link:{backgroundColor:Ws.white,border:Gs,borderRadius:Xs,color:Ws.text,fontSize:Hs.medium,height:qs,margin:Xs,padding:Xs,width:qs,"&:active":"{\n        color: ".concat(Ws.highlight,";\n      }"),"&:disabled":"{\n        opacity: ".concat($s.DisabledStyle.opacity,";\n      }"),"&:focus":"{\n        color: ".concat(Ws.highlight,";\n        outline: none;\n        text-decoration: underline;\n      }"),"&:hover":"{\n        text-decoration: underline;\n      }"}},blockSelect:{backgroundColor:Ws.white,border:Gs,borderRadius:"2px",color:Ws.text,dropdownWidth:"188px",fontSize:Hs.medium,height:"28px",keymapColor:Ws.grayText,optionHeight:"44px",width:"112px","&:hover":{backgroundColor:Ws.gray1},"&:selected":{backgroundColor:Ws.gray3}},icon:{fill:Ws.text},link:{backgroundColor:Ws.white,color:Ws.highlight,fontSize:Hs.small,"&:hover":"{\n      text-decoration: underline;\n    }"},input:{backgroundColor:Ws.white,border:Ks,color:Ws.text,fontSize:Hs.medium,height:"20px",margin:"4px 8px",padding:"2px",width:"180px","&:focus":"{\n      border: 1px solid ".concat(Ws.highlight,";\n      outline: none;\n    }")},toolbarSeparator:{backgroundColor:Ws.lightBorder,height:"24px",margin:"0px 4px"},modal:{arrowBorderColor:Ws.border,backgroundColor:Ws.white,borderBottom:"1px solid ".concat(Ws.border),borderBottomLeftRadius:"2px",borderBottomRightRadius:"2px",borderLeft:"1px solid ".concat(Ws.border),borderRight:"1px solid ".concat(Ws.border),borderTop:"1px solid ".concat(Ws.border),borderTopLeftRadius:"2px",borderTopRightRadius:"2px",boxShadow:Us,color:Ws.text,fontWeight:"600"},overlay:{backgroundColor:Ws.opaque,contentBoxShadow:Us,contentBorderRadius:"2px"},spinner:{borderColor:Ws.white,borderTopColor:Ws.highlight,borderWidth:"5px",height:"24px",width:"24px"},toolbar:{top:{backgroundColor:Ws.white,borderBottom:Ks,borderBottomLeftRadius:Xs,borderBottomRightRadius:Xs,borderLeft:Gs,borderRight:Gs,borderTop:Gs,borderTopLeftRadius:Xs,borderTopRightRadius:Xs,color:Ws.text,fontFamily:Js,fontSize:Hs.medium,fontStyle:Js},inline:{backgroundColor:Ws.white,borderBottom:Gs,borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderLeft:Gs,borderRight:Gs,borderTop:Gs,borderTopLeftRadius:"4px",borderTopRightRadius:"4px",color:Ws.text,fontFamily:Js,fontSize:Hs.medium,fontStyle:Js,padding:"2px"}},imageUploadOverlay:{backgroundColor:Ws.gray1,borderActiveColor:Ws.highlight,borderColor:Ws.text,height:"240px",wdith:"320px"}},Zs=function(e){function o(){var e,i;a(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(i=f(this,(e=d(o)).call.apply(e,[this].concat(n)))).getVisibleOverlay=function(){for(var e=i.props,t=e.overlays,n=e.view,r=0;r<t.length;r++){var o=t[r];if(o.condition(n.state))return o.component}},i}return c(o,w.Component),s(o,[{key:"render",value:function(){var e=this.props.view;if(!e)return null;var t=this.getVisibleOverlay();return t?I.createElement(t,{view:e}):null}}]),o}(),Qs=function(e){function n(e){var t;return a(this,n),(t=f(this,d(n).call(this,e))).config=Ps(Vo,e.config),t.theme=Ps(Ys,e.theme),t.theme=l({},t.theme,{blockStyles:Ps(Fs,e.blockStyles)}),t.editorWrapper=I.createRef(),t}return c(n,w.Component),s(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.defaultValue,r=e.onChange,o=e.autofocus,i=e.spellcheck,a=this.config,s=a.toolbar,l=a.plugins,c=0<=s.options.indexOf("inline"),u=0<=s.options.indexOf("top"),p=Es(l.options,"modals"),d=Es(l.options,"overlays");return I.createElement($r,{render:function(e){return I.createElement(zo.Provider,{value:{config:t.config}},I.createElement(Oe,{theme:t.theme},I.createElement(Bs,{id:"nib-wrapper",ref:t.editorWrapper},u&&I.createElement(Rs.top,null),I.createElement(zs,{autoFocus:o,defaultValue:n,onChange:r,spellcheck:i}),c&&I.createElement(Rs.inline,{editorWrapper:t.editorWrapper}),I.createElement(De,{editorWrapper:t.editorWrapper,modals:p,view:e.view}),I.createElement(Zs,{editorWrapper:t.editorWrapper,overlays:d,view:e.view}))))}})}}]),n}();return Qs.propTypes={autofocus:R.bool,blockStyles:R.object,config:R.object,defaultValue:R.object,onChange:R.func,spellcheck:R.bool,theme:R.object},Qs});
